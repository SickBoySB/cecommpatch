<jobsDB>

	<!-- 
	categories:
	All jobs are sorted into categories, which are the second-level tags here. (i.e., lower_class, human)
	  
	job: 
	name="Eat (Starving)" - the name we use internally
	display_name = "Eat Food" - the name we use in the engine
	mandatory_eval - do I have this job automatically pushed into my list of choices by the engine whenever a character can make a decision (1),
	or does it have to come from the job dispatcher? (0)  
      
	minimum_utility - do not evaluate this job unless it is at LEAST this useful
     
          
	require_gameobject - I require a game object of some sort. Typically you'd use this in conjunction with object tags. For example:
	<require_gameobject input="bush" objectinput="berry_source" />
	  
	Object tags will distinguish between different sorts of objects and make sure you get the right one.

          
	utility - this is how useful this is. HIGHER IS BEST.
      
	utility function is expressed as a linear combination of everything in here
        
	base_job_utility - a constant (multiplied by the weight)
	distance_from    - distance from a filled in tag.
	input="bush"     - what tag are we measuring the distance from
          
	weight="x"       - use this multiplier for the weight (positive or negative integer)
	require_eval="1" - when evaluating what resource, stockpile, whatever, that might be tagged:
	if we have multiple resources that could satisfy this tag, we determine
	which one to use using the utility functions that are tagged as being
	associated with this resource. We then pick the maximizer.           
                           
	putting this together:
      
	<distance_from input="bush" weight="-1" require_eval="1"/> 
      
	would choose the closest bush, at resource-filling time.
      
	fsm:
    
	<consume input="foo"/> - consumes the item tagged by foo. 
      
	assignment:
    
	Some jobs require an assignment. The assignment serves as a master collection. 
    
	<assignment name="Create Building"/>
           
           
	interruptee types:
	0: a non-job, can be interrupted for social jobs, obligation jobs, maslow jobs, and combat jobs
	1: a social job, can be interrupted for obligation jobs, maslow jobs, and combat jobs
	2: an obligation job, can be interrupted for maslow jobs, and combat jobs
	3: a "maslow" job, can be interrupted for combat jobs
	4: a combat job, can not be interrupted. (e.g. fight or flight)
	5: Don't use 5. If you must, first reconsider the interruptee type of all other jobs. Your job will be done in priority over ALL OTHER JOBS, including running and fighting.
	
	" interrupter is how much I can interrupt an interruptee
	I will interrupt an interruptee if my interrupter type is >= their interruptee type"
	I will successfully attack a defending job if my attacking value is >= its defense value
	attack = interrupt, attacking value = interrupter, defense value = interruptee
	-->

	<!-- N/A for now
	<military_and_vehicles>

	</military_and_vehicles>
  
	-->
	<!--
	Do not need:
	class_restriction
	example: <class_restriction name="Poet"/>
	-->

	<!--
	May not need:
	must_lock in <job>
	tag_from_string_attrib in <require_gameobject> (used for grabbing loadouts)
	<any_civilization/> within <utility>
	-->
	<!--
	<job name="" display_name="" mandatory_eval="" interruptee_type="" interrupter_type="" icon_skin="" icon="" can_interrupt="" can_be_social="" loop="" must_lock="" tag="" put_in_jobs="" test_for_interrupts="">
	<require_no_item_instant/>
	<require_no_loadout/>
	<require_no_item/>
	<require_no_tool/>
	<require_not_sitting/>
	<require_not_attending_party/>
	<require_not_at_civilization/>
	<require_empty_hands failure_reason=""/>
	<require_character_has_tag tag=""/>
	<require_character_has_no_tag tag=""/>
	<require_wield_tool tag="" failure_reason=""/>
	<failure_alert icon_file="" icon="" headihg="" description="" snooze=""/>
	<require_character_personal_stat_geq name="" amount=""/>
	<require_work_party_rally_point failure_reason="" input="" must_lock="" min_distance="" max_distance=""/>
	<require_gameobject input="" random="" range="" failure_reason="" tag="" must_lock="" closest="" tag_from_string_attrib="" not_tag="" tag_from_job="" not_member_of_a="" member_of_a="" amount="" />
	<require_work_party failure_reason=""/>
	<require_work_party_filter name=""/>
	<require_correct_tool failure=""/>
	<require_character_personal_stat_leq name="" amount="" failure_reason=""/>
	<require_random_location tag="" input="" range="" failure_reason="" must_lock="" use_origin="" />
	<require_building_module input="" tag="" must_lock="" failure_reason="" range="" not_tag="" claimed_building="" in_gsd=""/>
    
	<utility min="" max="" >
	<session_bool name="" value="" weight="" />
	<random value="" weight=""/>
	<trait name="" weight=""/>
	<base_job_utility weight=""/>
	<character_personal_stat name="" weight=""/>
	<any_civilization input="" weight=""/>
	<has_tag input="" tag="" weight=""/>
	<distance_from input="" weight=""/>
	<target_preference input="" weight=""/>
	<carrying_tool name="" weight=""/>
	</utility>
	<fsm>
	<animate name=""/>
	<attack_melee input="" name=""/>
	<attack_ranged input="" name=""/>
	<attempt_thought_bubble name=""/>
	<building_destroy_item input=""/>
	<building_study_item input=""/>
	<butcher input=""/>
	<chop_tree input=""/>
	<clear_object input=""/>
	<dismantle_object input=""/>
	<feel_happy/>
	<force_wander/>
	<force_wander_immediate/>
	<give_sermon/>
	<gossip_with/>
	<harvest_forageSource input=""/>
	<inspect_machinery/>
	<mine_surface_node/>
	<nurture_sapling input=""/>
	<pickup_tool input=""/>
	<pickup_combat_supplies input=""/>
	<pickup_item input=""/>
	<place_gabion input="" name=""/>
	<place_landmine input=""/>
	<poetry_target input=""/>
	<printjob name=""/>
	<read_poetry input=""/>
	<remove_tag name=""/>
	<remove_zone_square input=""/>
	<see_horror input=""/>
	<set_tag name=""/>
	<till_soil input=""/>
	<unlock input=""/>
	<walk_away_from_creature input="" name=""/>
	<walk_to input="" name=""/>
	<walk_to_module input="" />
	<walk_to_adjacent_position input=""/>
	<walk_to_adjacent_target_position input="" name=""/>
	<waste_time/>
	<weak_follow input=""/>
	</fsm>
	<fills_reqs>
	<require_carry_tool input="" tag_from_string_attrib=""/>
	<require_wield_tool input="" tag_from_string_attrib=""/>
	<require_correct_tool/>
	</fills_reqs>
	<on_abort behavior=""/>
    
    
	</job>
	-->
	
	<!-- POET JOBS -->
	<poet>
		<job name="Trying To Be Inspired" display_name="Seeking Inspiration"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml" icon="writing_in_book"
			interruptee_type="2" interrupter_type="2"
			can_be_social="1"
			test_for_interrupts="1"
			is_social="1">
			
			<require_gameobject input="inspiration"
							random="1"
							range="30"
							failure_reason="Cannot find anything inspirational."/>
			
			<require_not_sitting/>

			<utility>
				<base_job_utility weight="8"/>
			</utility>
			<fsm>
				<walk_to input="inspiration"/>
				<poetry_target input="inspiration"/>
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Read Poetry" display_name="Reading Poem"
			mandatory_eval="1"
			test_for_interrupts="1"
			icon_skin="ui\orderIcons.xml" icon="writing_in_book"
			interruptee_type="2" interrupter_type="2"
			is_social="1">
			
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_empty_hands/>
			<require_gameobject range="50" input="victim" tag="conversable" />
			<require_gameobject_can_be_sociable input="victim"/>
			<utility>
				<base_job_utility weight="3"/>
			</utility>
			<fsm>
				<weak_follow input="victim" />
				<read_poetry input="victim"/>
			</fsm>
			<history importance="10" />
		</job>
	</poet>

	<!-- BEACON JOBS  (Naturalist) -->

	<naturalism_jobs>
		<job name="Resupply Office 1 (naturalists office)"
			display_name="Supply Naturalist's Office (ammo)"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="lower_class" />
			<require_work_building input="building" tag="needs_resupply1" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="ammo1"
								range="150" closest="1"
								failure_reason="Requires Stone Pellet Ammo."
								require_owned="1" />
               
               <require_can_path_to input="building"/>
			
			<utility>
				<base_job_utility weight="0"/>
				<has_tag input="building" tag="mode_hunt" weight="1500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 1 (naturalists office, overseer)"
			display_name="Supply Naturalist's Office (ammo)"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="middle_class" />
			<require_work_building input="building" tag="needs_resupply1_badly" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="ammo1"
								range="150" closest="1"
								failure_reason="Requires Stone Pellet Ammo."
								require_owned="1" />
			
			<utility>
				<base_job_utility weight="0"/>
				<has_tag input="building" tag="mode_hunt" weight="1500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 2 (naturalists office)"
			display_name="Supply Naturalist's Office (paper)"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="lower_class" />
			<require_work_building input="building" tag="needs_resupply2" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="paper_stack"
								range="150" closest="1"
								failure_reason="Requires Paper."
								require_owned="1" />
			
			<utility>
				<base_job_utility weight="0"/>
				<has_tag input="building" tag="mode_survey" weight="1500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 2 (naturalists office, overseer)"
			display_name="Supply Naturalist's Office (paper)"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="middle_class" />
			<require_work_building input="building"
							   tag="needs_resupply2_badly"
							   not_tag="under_construction"
							   must_lock="0"/>
			
			<require_gameobject input="supplies" tag="paper_stack"
							range="150" closest="1"
							failure_reason="Requires Paper."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="0"/>
				<has_tag input="building" tag="mode_survey" weight="1500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Do Event Arc (naturalist)"
			display_name="Research Special Project"
			mandatory_eval="1"
			icon_skin="ui\\orderIcons.xml"
			icon="standing_desk_icon"
			interruptee_type="3"
			interrupter_type="2"
			can_be_social="0"
			filter="workshop">
		
			<require_work_building input="building"
							   failure_reason="Character requires a work building to research in."
							   not_tag="building_shutdown"
							   must_lock="0"
							   tag="eventlocked"/>
			
			<require_work_building_position input="destination" failure_reason="Requires avaiable space within work building."/>
	
			<!--<require_building_module input="desk"
								name="Standing Desk"
								claimed_workparty_building="1"
								failure_reason="Requires a standing desk."/> -->
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
	
			<utility>
				<base_job_utility weight="1500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_target_position input="destination"/>
				<do_event_arc_naturalism input="building"/>
			</fsm>
		</job>
		
	<!-- Hunting Jobs for hunting-naturalist -->
		<job name="Hunt Animals"
			display_name="Hunt"
			mandatory_eval="0"
			test_for_interrupts="1"
			icon_skin="ui\orderIcons.xml" icon="hunting"
			interruptee_type="4"
			interrupter_type="3"
			filter="workshop">
			
			<on_abort behaviour="yield"/>
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			
			<require_work_building input="building"
							   must_lock="0"
							   failure_reason="Requires hunting mode selected in office."
							   not_tag="no_supplies1"
							   tag="mode_hunt"/>
			
			<utility >
				<base_job_utility weight="1100"/>
			</utility>
			<fsm>
				<attack_ranged_hunt input="animal" name="run"/>
				<create_job input="animal" name="Butcher Animal Corpse (spontaneous)" />
				<reload_gun />
			</fsm>
		</job>
	
		<job name="Cull Troublesome Animal (hunter)"
			display_name="Cull Troublesome Animal"
			mandatory_eval="1"
			test_for_interrupts="1"
			icon_skin="ui\orderIcons.xml" icon="hunting"
			interruptee_type="4"
			interrupter_type="3"
			filter="workshop">

			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_character_has_no_tag tag="military" />
			<require_work_building input="building"
							   must_lock="0"
							   failure_reason="Requires hunting mode selected in office."
							   not_tag="no_supplies1"
							   tag="mode_hunt"/>
			
			<require_gameobject input="animal"
							tag="bad_animal"
							not_tag="dead"
							closest="1"
							range="18"
							must_lock="0"
							failure_reason="Attacking requires a target huntable."/>
			 
			<utility >
				<base_job_utility weight="1050"/>
			</utility>
			<fsm>
				<attack_ranged_hunt input="animal" name="run"/>
				<create_job input="animal" name="Butcher Animal Corpse (spontaneous)" />
				<reload_gun />
			</fsm>
		</job>
	
		<job name="Hunt Animal (spontaneous target)"
			display_name="Hunt (spontaneous)"
			mandatory_eval="1"
			test_for_interrupts="1"
			icon_skin="ui\orderIcons.xml" icon="hunting"
			interruptee_type="2"
			interrupter_type="1"
			filter="workshop">

			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			
			<require_work_building input="building"
							   must_lock="0"
							   failure_reason="Requires hunting mode selected in office."
							   not_tag="no_supplies1"
							   tag="mode_hunt"/>
			
			<require_gameobject input="animal"
							tag="animal"
							not_tag="dead"
							closest="1"
							range="16"
							must_lock="0"
							failure_reason="Attacking requires a target huntable."/>
			 
			<utility >
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<attack_ranged_hunt input="animal" name="run"/>
				<create_job input="animal" name="Butcher Animal Corpse (spontaneous)" />
				<reload_gun />
			</fsm>
		</job>
		
		<job name="Butcher Animal Corpse (naturalist)"
			display_name="Butcher Animal Corpse"
			mandatory_eval="1"
			interruptee_type="3" 
			interrupter_type="2"
			icon_skin="ui\orderIcons.xml" 
			icon="butcher_icon"
			can_be_social="0"
			filter="hauling">
			
			<!--<require_work_party_filter name="hunting"/>-->
			<require_character_on_shift/>
			<require_not_sitting/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_work_building input="building"
							   must_lock="0"
							   failure_reason="Requires hunting mode selected in office."
							   not_tag="building_shutdown"
							   tag="mode_hunt"/>
			
			<require_gameobject input="food"
							range="24"
							tag="animal,meat_source,dead"
							failure_reason="Butchering animal corpses requires available animal corpses (obviously)."
							must_lock="1"
							closest="1"/>
			
			<on_abort behaviour="yield" />
			
			<utility>
				<base_job_utility weight="800"/>
			</utility>
			<fsm>
				<walk_to input="food"/>
				<butcher_to_stack input="food"/>
			</fsm>
		</job>
		
		<job name="Search for Animals (spontaneous, naturalist)"
			display_name="Search for Game"
			icon_skin="ui\orderIcons.xml" icon="explore_image"
			mandatory_eval="1"
			test_for_interrupts="1"
			interruptee_type="1"
			interrupter_type="0"
			filter="workshop"
			is_social="1">

			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_building input="building"
							   must_lock="0"
							   failure_reason="Requires scouting mode selected in office."
							   not_tag="no_supplies1"
							   tag="mode_hunt"/>
			
			<require_random_location range="30"
								input="destination"
								min_elevation="2"
								failure_reason="Requires available random location."/>
			
			<on_abort behaviour="yield"/>
			<utility>
				<base_job_utility weight="750"/>
			</utility>
			<fsm>
				<walk_to_adjacent_target_position input="destination"/>
				<naturalist_search_for_game />
			</fsm>
			<history importance="10" />
		</job>
		
		
		<!-- Scout mode jobs for naturalist -->
		
		<job name="Go To Explore Beacon (Naturalist)"
			display_name="Explore Near Beacon"
			mandatory_eval="1"
			test_for_interrupts="1"
			interruptee_type="2" interrupter_type="1"
			icon_skin="ui\thoughtIcons.xml" icon="retreat"
			filter="workshop" >
			
			<require_no_item />
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_building input="building"
							   must_lock="0"
							   failure_reason="Requires scouting mode selected in office."
							   not_tag="building_scout"
							   tag="mode_scout"/>
			
			<require_gameobject input="destination"
							tag="explore_waypoint"
							range="500"
							must_lock="1"
							closest="1"
							failure_reason="Requires beacon to explore to."
							do_not_fill_dependency="1"/>
			
			<utility min="800" max="1599">
				<base_job_utility weight="1100"/>
				<distance_from input="destination" weight="-1" />
			</utility>
			<fsm>
				<naturalist_explore_to_adjacent_target_position input="destination" />
				<send_clear_to input="destination"/>
				<force_wander_immediate />
			</fsm>
		</job>

		<job name="Explore (Spontaneous)" display_name="Exploring Spontaneously"
			icon_skin="ui\orderIcons.xml" icon="explore_image"
			mandatory_eval="1"
			test_for_interrupts="1"
			interruptee_type="1"
			interrupter_type="0"
			filter="workshop"
			is_social="1">

			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_building input="building"
							   must_lock="0"
							   failure_reason="Requires scouting mode selected in office."
							   not_tag="building_shutdown"
							   tag="mode_scout"/>
			
			<require_random_location range="32"
								input="destination"
								min_elevation="2"
								failure_reason="Requires available random location."/>
			
			<utility>
				<base_job_utility weight="900"/>
			</utility>
			<fsm>
				<naturalist_explore_to_adjacent_target_position input="destination"/>
				
			</fsm>
			<history importance="10" />
		</job>
		
		<!-- surveying jobs for naturalist -->
		
		<job name="Conduct Mineralogical Survey"
			display_name="Conduct Mineralogical Survey"
			mandatory_eval="1"
			test_for_interrupts="1"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="exploration_plus_naturalism"
			filter="workshop"
			is_social="1">
			
			<require_not_sitting/>
			<require_character_on_shift/>
			
			<require_work_building input="building"
								must_lock="0"
								failure_reason="Naturalist's Office must be set to Survey mode."
								not_tag="no_supplies2"
								tag="mode_survey"/>
			
			<require_gameobject input="rock"
							tag="requires_mineralogy_report"
							not_tag="surveyed"
							range="150"
							must_lock="0"
							closest="1"
							do_not_fill_dependency="1"/>
			 
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<naturalist_conduct_mineralogical_survey input="rock" />
			</fsm>
		</job>
		
		<job name="Conduct Mineralogical Survey (player order)"
			display_name="Conduct Mineralogical Survey (order)"
			mandatory_eval="0"
			can_be_social="0"
			test_for_interrupts="1"
			interruptee_type="3"
			interrupter_type="2"
			icon_skin="ui\orderIcons.xml"
			icon="exploration_plus_naturalism"
			filter="workshop"
			is_social="0">
			
			<require_not_sitting/>
			<require_character_on_shift/>
			
			<require_work_building input="building"
								failure_reason="Naturalist's Office must be set to Survey mode and supplied with paper."
								not_tag="no_supplies2"
								must_lock="0"
								tag="mode_survey"/>
			
			<utility>
				<base_job_utility weight="1500"/>
			</utility>
			<fsm>
				<naturalist_conduct_mineralogical_survey input="rock" />
			</fsm>
		</job>
		
		<!-- Horror policy jobs.
		<session_bool value="1" name="isNight" weight="100" />
		horror_policy_study
		horror_policy_harvest
		horror_policy_dump
		-->
		
		<job name="Study Horror Corpse (automatic)"
			display_name="Dissect Monstrous Corpse"
			mandatory_eval="1"
			can_be_social="0"
			test_for_interrupts="1"
			interruptee_type="3" interrupter_type="2"
			icon_skin="ui\orderIcons.xml"
			icon="exploration_plus_naturalism"
			filter="workshop"
			is_social="1">>

			<require_not_sitting/>
			<require_character_on_shift/>
			<require_session_bool name="horror_policy_study" value="1"/>
			<require_gameobject input="corpse"
							range="150"
							tag="horror_corpse"
							not_tag="studied"
							failure_reason="Requires dead horror corpse."
							closest="1"
							do_not_fill_dependency="1"/>

			<utility >
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="corpse" />
				<naturalist_dissect_horror_corpse input="corpse" />
				<increment_character_skill name ="naturalism"/>
			</fsm>
		</job>
		
		<job name="Harvest Horror Corpse (automatic)"
			display_name="Harvest Monstrous Corpse"
			mandatory_eval="1"
			can_be_social="0"
			test_for_interrupts="1"
			interruptee_type="3" interrupter_type="2"
			icon_skin="ui\orderIcons.xml"
			icon="exploration_plus_naturalism"
			filter="workshop"
			is_social="1">>

			<require_not_sitting/>
			<require_character_on_shift/>
			<require_session_bool name="horror_policy_harvest" value="1"/>
			<require_gameobject input="corpse"
							range="150"
							tag="horror_corpse"
							not_tag="studied"
							failure_reason="Requires dead horror corpse."
							closest="1"
							do_not_fill_dependency="1"/>

			<utility >
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="corpse" />
				<butcher_to_stack input="corpse" />
				<increment_character_skill name ="naturalism"/>
			</fsm>
		</job>
		
		<job name="Destroy Horror Corpse (automatic)"
			display_name="Remove Evidence of Monster"
			mandatory_eval="1"
			can_be_social="0"
			test_for_interrupts="1"
			interruptee_type="3" interrupter_type="2"
			icon_skin="ui\orderIcons.xml"
			icon="exploration_plus_naturalism"
			filter="workshop"
			is_social="1">>

			<require_not_sitting/>
			<require_character_on_shift/>
			<require_session_bool name="horror_policy_dump" value="1"/>
			<require_gameobject input="corpse"
							range="150"
							tag="horror_corpse"
							failure_reason="Requires dead horror corpse."
							closest="1"
							do_not_fill_dependency="1"/>

			<utility >
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="corpse" />
				<naturalist_destroy_horror_corpse input="corpse" />
				<!--<increment_character_skill name ="naturalism"/>-->
			</fsm>
		</job>
		
		<!--
		<job name="Study Rock" display_name="Survey Geomorphology"
			mandatory_eval="1"
			test_for_interrupts="1"
			interruptee_type="1"
			interrupter_type="0"
			icon_skin="ui\orderIcons.xml" icon="naturalism_icon"
			filter="workshop"
			is_social="1">
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_character_has_tag tag="did_survey"/>
			<require_gameobject input="rock" tag="rock" not_tag="surveyed" range="8" must_lock="1" closest="1"/>
			 
			<utility min="800" max="1599">
				<base_job_utility weight="750"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="rock" />
				<naturalist_study_rock input="rock" />
			</fsm>
		</job>
		
		<job name="Study Tree" display_name="Conduct Dendrological Study"
			mandatory_eval="1"
			test_for_interrupts="1"
			can_be_social="1"
			interruptee_type="1"
			interrupter_type="0"
			icon_skin="ui\orderIcons.xml" icon="naturalism_icon"
			filter="workshop"
			is_social="1">
				
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_character_has_tag tag="did_survey"/>
			<require_gameobject input="tree" tag="tree" not_tag="surveyed" range="8" must_lock="1" closest="1"/>
			 
			<utility min="800" max="1599">
				<base_job_utility weight="750"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="tree" />
				<animate name="generic_ground_interaction"/>
				<animate name="generic_ground_interaction"/>
				<attempt_thought_bubble name="science" />
				<animate name="generic_ground_interaction"/>
				<set_tag_other input="tree" name="surveyed" />
				<remove_tag name="did_survey" />
			</fsm>
		</job>

		<job name="Study Plant" display_name="Establish Botanical Taxonomy"
			mandatory_eval="1"
			test_for_interrupts="1"
			can_be_social="1"
			interruptee_type="1"
			interrupter_type="0"
			icon_skin="ui\orderIcons.xml" icon="naturalism_icon"
			filter="workshop"
			is_social="1">

			<require_not_sitting/>
			<require_character_on_shift/>
			<require_character_has_tag tag="did_survey"/>
			<require_gameobject input="plant"
							tag="plant"
							not_tag="surveyed"
							range="8"
							must_lock="1"
							closest="1"
							do_not_fill_dependency="1"/>
			
			<utility min="800" max="1599">
				<base_job_utility weight="750"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="plant" />
				<naturalist_study_plant input="plant" />
			</fsm>
		</job>

		<job name="Study Bones" display_name="Examine Unknown Ossification"
			mandatory_eval="1"
			test_for_interrupts="1"
			can_be_social="1"
			interruptee_type="1"
			interrupter_type="0"
			icon_skin="ui\orderIcons.xml" icon="cycle_image"
			filter="workshop"
			is_social="1">
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_character_has_tag tag="did_survey"/>
			<require_gameobject input="bones"
							tag="bones"
							not_tag="surveyed"
							range="8"
							must_lock="1"
							closest="1"
							do_not_fill_dependency="1"/>
			 
			<utility min="800" max="1599">
				<base_job_utility weight="750"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="bones" />
				<animate name="generic_ground_interaction"/>
				<animate name="generic_ground_interaction"/>
				<attempt_thought_bubble name="science" />
				<animate name="generic_ground_interaction"/>
				<set_tag_other input="bones" name="surveyed" />
				<remove_tag name="did_survey" />
				<unlock input="bones" />
			</fsm>
		</job>

		<job name="Study Corpse" display_name="Investigate Necrotic Corpus"
			mandatory_eval="1"
			test_for_interrupts="1"
			can_be_social="1"
			interruptee_type="1"
			interrupter_type="0"
			icon_skin="ui\orderIcons.xml" icon="cycle_image"
			filter="workshop"
			is_social="1">
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_character_has_tag tag="did_survey"/>
			<require_gameobject input="corpse"
							tag="corpse"
							not_tag="surveyed"
							range="8"
							must_lock="1"
							closest="1"
							do_not_fill_dependency="1"/>
			 
			<utility min="800" max="1599">
				<base_job_utility weight="750"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="corpse" />
				<animate name="generic_ground_interaction"/>
				<animate name="generic_ground_interaction"/>
				<attempt_thought_bubble name="science" />
				<animate name="generic_ground_interaction"/>
				<set_tag_other input="corpse" name="surveyed" />
				<remove_tag name="did_survey" />
			</fsm>
		</job> -->

		<!-- study vermin -->
		<!-- find a place to dig for artifacts -->

		<!--
		<job name="Return To Civilization (Naturalism)" display_name="Return To Civilization"
			mandatory_eval="1"
			test_for_interrupts="1"
			can_be_social="0"
			icon_skin="ui\orderIcons.xml" icon="cycle_image"
			interruptee_type="1"
			interrupter_type="0"
			filter="workshop"
			is_social="1">
			
			<require_not_sitting/>
			<require_not_at_civilization/>
			<require_civ_dist_geq input="100"/>
			<require_closest_civilization_location input="destination"/>

			<utility>
				<base_job_utility weight="1" />
				<character_personal_stat name="hunger" weight="10"/>
				<session_bool value="1" name="isNight" weight="100" />
			</utility>
			<fsm>
				<walk_to input="destination"/>
			</fsm>
		</job> -->

		<job name="Study Horror (obeliskian)"
			display_name="Dissect Obeliskian"
			mandatory_eval="0"
			can_be_social="0"
			test_for_interrupts="1"
			interruptee_type="3" interrupter_type="2"
			icon_skin="ui\orderIcons.xml"
			icon="exploration_plus_naturalism"
			filter="workshop" >

			<on_abort behaviour="yield" />
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_gameobject input="corpse"
							range="250"
							tag="dead,obeliskian"
							not_tag="studied"
							failure_reason="Requires dead obeliskian."
							closest="1"
							do_not_fill_dependency="1"/>
			
			
			
			<!--<require_character_has_tag tag="naturalist" failure_reason="Requires naturalist." />-->
			 
			<utility min="800" max="1599">
				<base_job_utility weight="1500"/>
			</utility>
			<fsm>
				<walk_to input="corpse" />
				<naturalist_dissect_horror_corpse input="corpse" />
				<increment_character_skill name ="naturalism"/>
			</fsm>
		</job>
		
		<job name="Study Horror (fishperson)"
			display_name="Dissect Fishperson"
			mandatory_eval="0"
			can_be_social="0"
			test_for_interrupts="1"
			interruptee_type="3" interrupter_type="2"
			icon_skin="ui\orderIcons.xml"
			icon="exploration_plus_naturalism"
			filter="workshop" >

			<on_abort behaviour="yield" />
			
			<require_no_tool />
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_gameobject input="corpse"
							range="250"
							tag="fishperson,corpse"
							not_tag="studied,food"
							failure_reason="Requires dead Fishperson."
							closest="1"
							do_not_fill_dependency="1"/>
			
			<utility min="800" max="1599">
				<base_job_utility weight="1500"/>
			</utility>
			<fsm>
				<walk_to input="corpse" />
				<naturalist_dissect_horror_corpse input="corpse" />
				<increment_character_skill name ="naturalism"/>
			</fsm>
		</job>

	</naturalism_jobs>


<diplomacy_jobs>
	<job name="Do Diplomatic Paperwork"
		display_name="Do Diplomacy"
		mandatory_eval="1"
		icon_skin="ui\\orderIcons.xml"
		icon="standing_desk_icon"
		interruptee_type="3"
		interrupter_type="2"
		can_be_social="0"
		filter="workshop">
		
		<require_work_building input="building"
						   tag="foreign_office"
						   not_tag="no_supplies1"
						   failure_reason="Requires work building."
						   must_lock="0" />
		
		<require_building_module input="desk"
							tag="diplomatic_desk"
							claimed_workparty_building="1"
							failure_reason="Requires a standing desk."/>
		
		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_on_shift/>

		<utility>
			<base_job_utility weight="1000"/>
			<has_tag input="desk" tag="diplomatic_desk2" weight="100"/>
		</utility>
		<fsm>
			<walk_to_module input="desk"/>
			<do_paperwork_diplomacy input="desk"/>
		</fsm>
	</job>
	
	<job name="Do Event Arc Paperwork"
			display_name="Research Special Project"
			mandatory_eval="1"
			icon_skin="ui\\orderIcons.xml"
			icon="standing_desk_icon"
			interruptee_type="3"
			interrupter_type="2"
			can_be_social="0"
			filter="workshop">
		
		<require_work_building input="building"
							tag="eventlocked"
							failure_reason="Requires work building."
							not_tag="no_supplies1"
							must_lock="0" />
		
		<require_building_module input="desk"
							for_building="building"
							tag="diplomatic_desk"
							not_tag="under_construction"
							claimed_workparty_building="1"
							failure_reason="Requires a standing desk."/>
		
		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_on_shift/>

		<utility>
			<base_job_utility weight="1500"/>
			<has_tag input="desk" tag="diplomatic_desk2" weight="100"/>
		</utility>
		<fsm>
			<walk_to_module input="desk"/>
			<do_event_arc_diplomacy input="desk"/>
		</fsm>
	</job>
	
	<job name="Resupply Office (foreign office)"
		display_name="Resupply Foreign Office"
		mandatory_eval="1"
		loop="0"
		interruptee_type="2"
		interrupter_type="1"
		icon_skin="ui\orderIcons.xml"
		icon="foreign_office"
		can_be_social="0"
		filter="workshop">

		<require_empty_hands />
		<require_not_sitting/>
		<require_work_party_filter name="workshop"/>
		<require_character_on_shift/>
		<require_character_has_tag tag="lower_class" />
		<require_work_building input="building" tag="needs_resupply1" not_tag="under_construction" must_lock="0"/>
		<require_gameobject input="supplies" tag="paper_stack"
							range="150" closest="1"
							failure_reason="Requires paper."
							require_owned="1" />
		
		<on_abort behaviour="yield"/>
		<utility>
			<base_job_utility weight="1500"/>
		</utility>
		<fsm>
			<walk_to_adjacent_position input="supplies"/>
			<pickup_item input="supplies"/>
			<building_held_supply_check input="building" />
			<walk_to_building input="building" />
			<building_add_supplies input="building"/>
		</fsm>
	</job>
	
	<job name="Resupply Office (foreign office, overseer)"
		display_name="Resupply Foreign Office"
		mandatory_eval="1"
		loop="0"
		interruptee_type="2"
		interrupter_type="1"
		icon_skin="ui\orderIcons.xml"
		icon="foreign_office"
		can_be_social="0"
		filter="workshop">

		<require_empty_hands />
		<require_not_sitting/>
		<require_work_party_filter name="workshop"/>
		<require_character_on_shift/>
		<require_character_has_tag tag="middle_class" />
		<require_work_building input="building" tag="needs_resupply1_badly" not_tag="under_construction" must_lock="0"/>
		<require_gameobject input="supplies" tag="paper_stack"
							range="150" closest="1"
							failure_reason="Requires paper."
							require_owned="1" />
		
		<on_abort behaviour="yield"/>
		<utility>
			<base_job_utility weight="1500"/>
		</utility>
		<fsm>
			<walk_to_adjacent_position input="supplies"/>
			<pickup_item input="supplies"/>
			<building_held_supply_check input="building" />
			<walk_to_building input="building" />
			<building_add_supplies input="building"/>
		</fsm>
	</job>
	
</diplomacy_jobs>

<science_jobs>
	<job name="Do Event Arc Science"
			display_name="Research Special Project"
			mandatory_eval="1"
			icon_skin="ui\\orderIcons.xml"
			icon="standing_desk_icon"
			interruptee_type="3"
			interrupter_type="2"
			can_be_social="0"
			filter="workshop">
		
		<require_work_building input="building"
						   must_lock="0"
						   failure_reason="Requires work building."
							not_tag="no_supplies1"
						   tag="eventlocked"/>
		
		<require_building_module input="lab_equipment"
								for_building="building"
								tag="lab_equipment"
								not_tag="under_construction"
								failure_reason="Requires a chalkboard to read."
								do_not_fill_dependency="1"/>
		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_on_shift/>

		<utility>
			<base_job_utility weight="1500"/>
		</utility>
		<fsm>
			<walk_to_module input="lab_equipment"/>
			<do_event_arc_science input="lab_equipment"/>
			<increment_character_skill name ="science"/>
		</fsm>
	</job>

	<job name="Do Science"
			display_name="Do Science"
			mandatory_eval="1"
			icon_skin="ui\\orderIcons.xml"
			icon="standing_desk_icon"
			interruptee_type="3"
			interrupter_type="2"
			can_be_social="0"
			filter="workshop">
		
		<require_work_building input="building"
						   must_lock="0"
						   failure_reason="Requires work building."
						   not_tag="no_supplies1"/>
		
		<require_building_module input="lab_equipment"
							for_building="building"
							tag="lab_equipment"
							not_tag="under_construction"
							failure_reason="Requires a chalkboard to read."
							do_not_fill_dependency="1"/>
		
		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_on_shift/>

		<utility>
			<base_job_utility weight="950"/>
		</utility>
		<fsm>
			<walk_to_module input="lab_equipment"/>
			<do_science input="lab_equipment"/>
			<increment_character_skill name ="science"/>
		</fsm>
	</job>
	
	<job name="Do Science!"
			display_name="Do Mad Science"
			mandatory_eval="1"
			icon_skin="ui\\orderIcons.xml"
			icon="standing_desk_icon"
			interruptee_type="3"
			interrupter_type="2"
			can_be_social="0"
			filter="workshop">
		
		<require_character_has_tag tag="despair_state" />
		<require_work_building input="building"
						   must_lock="0"
						   failure_reason="Requires work building."
						   not_tag="no_supplies1"/>
		
		<require_building_module input="lab_equipment"
								for_building="building"
								tag="lab_equipment"
								not_tag="under_construction"
								failure_reason="Requires a chalkboard to read."
								do_not_fill_dependency="1"/>
		
		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_on_shift/>

		<utility>
			<base_job_utility weight="955"/>
		</utility>
		<fsm>
			<walk_to_module input="lab_equipment"/>
			<do_science input="lab_equipment"/>
			<increment_character_skill name ="science"/>
		</fsm>
	</job>
	
	<job name="Resupply Office 1 (lab)"
			display_name="Supply Laboratory"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="lower_class" />
			<require_work_building input="building" tag="needs_resupply1" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="lab_goods1"
							range="150" closest="1"
							failure_reason="Requires lab materials."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 1 (lab, overseer)"
			display_name="Supply Laboratory"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="middle_class" />
			<require_work_building input="building" tag="needs_resupply1_badly" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="lab_goods1"
							range="150" closest="1"
							failure_reason="Requires lab materials."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 2 (lab)"
			display_name="Supply Laboratory"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="lower_class" />
			<require_work_building input="building" tag="needs_resupply2" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="lab_goods2"
							range="150" closest="1"
							failure_reason="Requires leyden jars."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 2 (lab, overseer)"
			display_name="Supply Laboratory"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="middle_class" />
			<require_work_building input="building" tag="needs_resupply2_badly" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="lab_goods2"
							range="150" closest="1"
							failure_reason="Requires leyden jars."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
	
</science_jobs>
	
<barber_jobs>
	<job name="Resupply Office 1 (barber)"
		display_name="Collect Medical Supplies"
		mandatory_eval="1"
		loop="0"
		interruptee_type="2"
		interrupter_type="1"
		icon_skin="ui\orderIcons.xml"
		icon="barbershop_image"
		can_be_social="0"
		filter="workshop">

		<require_empty_hands/>
		<require_not_sitting/>
		<require_character_on_shift/>
		<require_work_party_filter name="workshop"/>
		<require_character_has_tag tag="lower_class" />
		<require_work_building input="building" tag="needs_resupply1" not_tag="under_construction" must_lock="0"/>
		<require_gameobject input="supplies" tag="medical_bag"
							range="150" closest="1"
							failure_reason="Requires medical supplies."
							require_owned="1" />
		
		<utility>
			<base_job_utility weight="1500"/>
		</utility>
		<fsm>
			<walk_to_adjacent_position input="supplies"/>
			<pickup_item input="supplies"/>
			<building_held_supply_check input="building" />
			<walk_to_building input="building" />
			<building_add_supplies input="building"/>
		</fsm>
	</job>
	
	<job name="Resupply Office 1 (barber, overseer)"
		display_name="Collect Medical Supplies"
		mandatory_eval="1"
		loop="0"
		interruptee_type="2"
		interrupter_type="1"
		icon_skin="ui\orderIcons.xml"
		icon="barbershop_image"
		can_be_social="0"
		filter="workshop">

		<require_empty_hands/>
		<require_not_sitting/>
		<require_character_on_shift/>
		<require_work_party_filter name="workshop"/>
		<require_character_has_tag tag="middle_class" />
		<require_work_building input="building" tag="needs_resupply1_badly" not_tag="under_construction" must_lock="0"/>
		<require_gameobject input="supplies" tag="medical_bag"
							range="150" closest="1"
							failure_reason="Requires medical supplies."
							require_owned="1" />
		
		<utility>
			<base_job_utility weight="1500"/>
		</utility>
		<fsm>
			<walk_to_adjacent_position input="supplies"/>
			<pickup_item input="supplies"/>
			<building_held_supply_check input="building" />
			<walk_to_building input="building" />
			<building_add_supplies input="building"/>
		</fsm>
	</job>
	
	<job name="Resupply Office 2 (barber)"
		display_name="Collect Sulphur Tonic"
		mandatory_eval="1"
		loop="0"
		interruptee_type="2"
		interrupter_type="1"
		icon_skin="ui\orderIcons.xml"
		icon="barbershop_image"
		can_be_social="0"
		filter="workshop">

		<require_empty_hands />
		<require_not_sitting/>
		<require_work_party_filter name="workshop"/>
		<require_character_on_shift/>
		<require_character_has_tag tag="lower_class" />
		<require_work_building input="building" tag="needs_resupply2" not_tag="under_construction" must_lock="0"/>
		<require_gameobject input="supplies" tag="sulphur_tonic"
							range="150" closest="1"
							failure_reason="Requires Sulphur Tonic."
							require_owned="1" />
		
		<on_abort behaviour="yield"/>
		<utility>
			<base_job_utility weight="1500"/>
		</utility>
		<fsm>
			<walk_to_adjacent_position input="supplies"/>
			<pickup_item input="supplies"/>
			<building_held_supply_check input="building" />
			<walk_to_building input="building" />
			<building_add_supplies input="building"/>
		</fsm>
	</job>
	
	<job name="Resupply Office 2 (barber, overseer)"
		display_name="Collect Sulphur Tonic"
		mandatory_eval="1"
		loop="0"
		interruptee_type="2"
		interrupter_type="1"
		icon_skin="ui\orderIcons.xml"
		icon="barbershop_image"
		can_be_social="0"
		filter="workshop">

		<require_empty_hands/>
		<require_not_sitting/>
		<require_character_on_shift/>
		<require_work_party_filter name="workshop"/>
		<require_character_has_tag tag="middle_class" />
		<require_work_building input="building" tag="needs_resupply2_badly" not_tag="under_construction" must_lock="0"/>
		<require_gameobject input="supplies" tag="sulphur_tonic"
							range="150" closest="1"
							failure_reason="Requires Sulphur Tonic."
							require_owned="1" />
		
		<on_abort behaviour="yield"/>
		<utility>
			<base_job_utility weight="1500"/>
		</utility>
		<fsm>
			<walk_to_adjacent_position input="supplies"/>
			<pickup_item input="supplies"/>
			<building_held_supply_check input="building" />
			<walk_to_building input="building" />
			<building_add_supplies input="building"/>
		</fsm>
	</job>
	
	<job name="Administer Medical Treatment"
		display_name="Administer Medical Treatment" 
		test_for_interrupts="1"	
		icon_skin="ui\orderIcons.xml"
		icon="barbershop_image" 
		interruptee_type="3" interrupter_type="2"
		filter="workshop">

		<require_not_sitting/>
		<require_empty_hands/>
		<!--<require_character_on_shift/>-->
		<require_work_building input="building"
							must_lock="0"
							failure_reason="Requires medical supplies."
							not_tag="no_supplies1"
							tag="barbershop"/>
		
		<utility> 
			<base_job_utility weight="2000"/>
		</utility>
		<fsm>
			<barber_administer_treatment input="sender"/>
		</fsm>
	</job>
	
	<job name="Sweep Idle (barber)" display_name="Tidy Shop (Barber)"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml" icon="cycle_image"
			interruptee_type="1" interrupter_type="0"
			is_social="1">
			
		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_on_shift/>
		<require_character_has_no_tag tag="military" />
		
		<require_work_building input="building"
						   must_lock="0"
						   failure_reason="Character requires a designated work building to tidy."/>
		
		<require_work_building_position input="destination"
								  failure_reason="Requires avaiable space within work building."/>

		<utility max="99">
			<base_job_utility weight="30"/>
		</utility>
		<fsm>
			<walk_to_adjacent_target_position input="destination"/>
			<sweep/>
		</fsm>
	</job>
	
	<job name="Inspect Modules (barber)"
			display_name="Inspect Furniture"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml" icon="cycle_image"
			interruptee_type="1" interrupter_type="0"
			is_social="1">
			
			<require_character_on_shift/>
			<require_work_building input="building"
							   failure_reason="Requires work building."
							   must_lock="0"/>
			
			<require_building_module input="module"
								tag="module"
								claimed_building="1"
								failure_reason="Requires a building module."
								in_gsd="1"/>
			
			<require_not_sitting/>
			<utility min="0" max="49">
				<base_job_utility weight="10"/>
			</utility>
			<fsm>
				<walk_to_module input="module"/>
				<inspect_machinery/>
			</fsm>
		</job>
	
	<!--
	<job name="Administer Medical Treatment (roaming)"
		display_name="Administer Medical Treatment" 
		test_for_interrupts="1"	
		icon_skin="ui\orderIcons.xml"
		icon="barbershop_image"
		mandatory_eval="1"
		interruptee_type="3" interrupter_type="2"
		filter="workshop">

		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_on_shift/>
		<require_work_building input="building"
							must_lock="0"
							failure_reason="Requires hunting mode selected in office."
							not_tag="no_supplies1"
							tag="barbershop"/>
		
		<require_gameobject input="patient"
						    tag="waiting_for_treatment"
						    not_tag="dead"
						    range="150"
						    failure_reason="Requires available patient."
						    closest="1"/>
		
		<utility> 
			<base_job_utility weight="2000"/>
		</utility>
		<fsm>
			<barber_administer_treatment input="patient"/>
		</fsm>
	</job>-->
	
</barber_jobs>

	<public_house_jobs>
		<job name="Fill Booze Vat (brew 3x)"
			display_name="Collect Brew for Pub (3x)"
			mandatory_eval="1"
			test_for_interrupts="1"
			icon_skin="ui\\commodityIcons.xml"
			icon="basic_brew_category"
			interruptee_type="2" interrupter_type="1"
			can_be_social="0"
			filter="workshop" >
	
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_work_building input="building"
							   tag="collect_brew"
							   not_tag="building_shutdown"
							   must_lock="0"/>
			
			<require_building_module input="booze_vat"
								for_building="building"
								tag="booze_vat"
								not_tag="under_construction"
								must_lock="0"/>
			
			<require_can_path_to input="booze_vat" failure_reason="Booze Vat is blocked!"/>
			
			<require_multiple_gameobjects input="drink" amount="3" use_multiplier="1"
									tag="booze,brewed" range="100" closest="1"
									require_owned="1" must_unlock="0"/>
			
			<utility min="0" max="1599">
				<base_job_utility weight="1100"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position_and_pickup_things input="drink"/>
				<building_booze_supply_check input="building" />
				<walk_to_module input="booze_vat"/>
				<place_item_in_module_container input="booze_vat"/>
			</fsm>
		</job>

		<job name="Fill Booze Vat (brew)"
			display_name="Collect Brew for Pub"
			mandatory_eval="1"
			test_for_interrupts="1"
			icon_skin="ui\\commodityIcons.xml"
			icon="basic_brew_category"
			interruptee_type="2" interrupter_type="1"
			can_be_social="0"
			filter="workshop" >
	
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_work_building input="building"
							   tag="collect_brew"
							   not_tag="building_shutdown"
							   must_lock="0"/>
			
			<require_building_module input="booze_vat"
								for_building="building"
								tag="booze_vat"
								not_tag="under_construction"
								must_lock="0"/>
			
			<require_can_path_to input="booze_vat" failure_reason="Booze Vat is blocked!"/>
			
			<require_gameobject input="drink"
						    tag="booze,brewed"
						    amount="1"
						    range="75"
						    require_owned="1"
						    failure_reason="Requires available beverage."
						    closest="1">
				
				<failure_alert
					icon_file="ui\commodityIcons.xml" icon="basic_brew_category"
					heading="Not Enough Booze"
					description="We need brewed booze to stock the Public House!"
					snooze="600000" />
				
			</require_gameobject>
			
			<utility min="0" max="1599">
				<base_job_utility weight="1050"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="drink"/>
				<pickup_item input="drink"/>
				<walk_to_module input="booze_vat"/>
				<place_item_in_module_container input="booze_vat"/>
			</fsm>
		</job>
		
		<job name="Fill Booze Vat (spirits 3x)"
			display_name="Collect Spirits For Pub (3x)"
			mandatory_eval="1"
			test_for_interrupts="1"
			icon_skin="ui\\commodityIcons.xml"
			icon="basic_brew_category"
			interruptee_type="2" interrupter_type="1"
			filter="workshop" >
	
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_work_building input="building" tag="collect_spirits" not_tag="building_shutdown" must_lock="0"/>
			
			<require_building_module input="booze_vat"
								for_building="building"
								tag="booze_vat"
								not_tag="under_construction,module_disabled"
								must_lock="0"/>
			
			<require_can_path_to input="booze_vat" failure_reason="Booze Vat is blocked!"/>
			
			<require_multiple_gameobjects input="drink" amount="3" use_multiplier="1"
									tag="booze,spirits" range="100" closest="1"
									require_owned="1" must_unlock="0"/>
			
			<utility min="0" max="1599">
				<base_job_utility weight="1050"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position_and_pickup_things input="drink"/>
				<walk_to_module input="booze_vat"/>
				<place_item_in_module_container input="booze_vat"/>
			</fsm>
		</job>
		
		<job name="Fill Booze Vat (spirits)"
			display_name="Collect Spirits for Pub"
			mandatory_eval="1"
			test_for_interrupts="1"
			icon_skin="ui\\commodityIcons.xml"
			icon="basic_brew_category"
			interruptee_type="2" interrupter_type="1"
			filter="workshop" >
	
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_work_building input="building" tag="collect_spirits" not_tag="building_shutdown" must_lock="0"/>
			
			<require_building_module input="booze_vat"
								for_building="building"
								tag="booze_vat"
								not_tag="under_construction,module_disabled"
								must_lock="0"/>
			<require_can_path_to input="booze_vat" failure_reason="Booze Vat is blocked!"/>
			
			<require_gameobject input="drink"
						    tag="booze,spirits"
						    amount="1"
						    range="75"
						    require_owned="1"
						    failure_reason="Requires available beverage."
						    closest="1">
			
				<failure_alert
					icon_file="ui\orderIcons2.xml" icon="booze_spirits_on"
					heading="Not Enough Booze"
					description="We need brewed booze to stock the Public House!"
					snooze="600000" />
				
			</require_gameobject>
			
			<utility min="0" max="1599">
				<base_job_utility weight="1050"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="drink"/>
				<pickup_item input="drink"/>
				<walk_to_module input="booze_vat"/>
				<place_item_in_module_container input="booze_vat"/>
			</fsm>
		</job>
		
		<job name="Fill Booze Vat (laudanum 3x)"
			display_name="Collect Laudanum for Pub (3x)"
			mandatory_eval="1"
			test_for_interrupts="1"
			icon_skin="ui\\commodityIcons.xml"
			icon="basic_brew_category"
			interruptee_type="2" interrupter_type="1"
			filter="workshop" >
	
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			
			<require_work_building input="building"
							   tag="collect_laudanum"
							   not_tag="building_shutdown"
							   must_lock="0"/>
			
			<require_building_module input="booze_vat"
								for_building="building"
								tag="booze_vat"
								require_owned="1"
								not_tag="under_construction,module_disabled"
								must_lock="0"/>
			
			<require_can_path_to input="booze_vat" failure_reason="Booze Vat is blocked!"/>
			
			<require_multiple_gameobjects input="drink" amount="3" use_multiplier="1"
									tag="laudanum" range="100" closest="1"
									require_owned="1" must_unlock="0"/>
			
			<utility min="0" max="1599">
				<base_job_utility weight="1040"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position_and_pickup_things input="drink"/>
				<walk_to_module input="booze_vat"/>
				<place_item_in_module_container input="booze_vat"/>
			</fsm>
		</job>
		
		<job name="Fill Booze Vat (laudanum)"
			display_name="Collect Laudanum for Pub"
			mandatory_eval="1"
			test_for_interrupts="1"
			icon_skin="ui\\commodityIcons.xml"
			icon="basic_brew_category"
			interruptee_type="2" interrupter_type="1"
			filter="workshop" >
	
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_can_path_to input="booze_vat" failure_reason="Booze Vat is blocked!"/>
			<require_work_building input="building"
							   tag="collect_laudanum"
							   not_tag="building_shutdown"
							   must_lock="0"/>
			
			<require_building_module input="booze_vat"
								for_building="building"
								tag="booze_vat"
								require_owned="1"
								not_tag="under_construction,module_disabled"
								must_lock="0"/>
			
			<require_gameobject input="drink"
						    tag="laudanum"
						    amount="1"
						    require_owned="1"
						    range="75"
						    failure_reason="Requires available beverage."
						    closest="1"/>
			
			<utility min="0" max="1599">
				<base_job_utility weight="1020"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="drink"/>
				<pickup_item input="drink"/>
				<walk_to_module input="booze_vat"/>
				<place_item_in_module_container input="booze_vat"/>
			</fsm>
		</job>
	</public_house_jobs>
     
     <academy_jobs>
		<job name="Learn Skills"
			display_name="Learn Skills"
			mandatory_eval="1"
			interruptee_type="3" interrupter_type="2"
			icon_skin="ui\thoughtIcons.xml"
			icon="journal_icon"
               can_be_social="0"
			is_social="0"
			filter="workshop" >

			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_work_building input="building"
							   must_lock="0"
							   not_tag="no_supplies1"/>
               
               <require_building_module input="bookshelf"
								for_building="building"
								tag="bookshelf"
								not_tag="under_construction,module_disabled"
								must_lock="1"/>
			
			<utility min="0" max="1000">
				<base_job_utility weight="900"/>
				<has_tag input="desk" tag="training_bookshelf2" weight="150"/>
			</utility>
			<fsm>
				<walk_to input="bookshelf" />
				<learn_things input="bookshelf" />
			</fsm>
		</job>
		
		<job name="Resupply Office 1 (academy)"
			display_name="Procure Paper for Training"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="lower_class" />
			<require_work_building input="building" tag="needs_resupply1" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="paper_stack"
							range="150" closest="1"
							failure_reason="Requires paper."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 1 (academy, overseer)"
			display_name="Procure Paper for Training"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="middle_class" />
			<require_work_building input="building" tag="needs_resupply1_badly" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="paper_stack"
							range="150" closest="1"
							failure_reason="Requires paper."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 2 (academy)"
			display_name="Procure Ink for Training"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="lower_class" />
			<require_work_building input="building" tag="needs_resupply2" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="ink_bucket"
							range="150" closest="1"
							failure_reason="Requires ink."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 2 (academy, overseer)"
			display_name="Procure Ink for Training"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="middle_class" />
			<require_work_building input="building" tag="needs_resupply2_badly" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="ink_bucket"
							range="150" closest="1"
							failure_reason="Requires ink."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
     </academy_jobs>

	<chapel_jobs>
		<job name="Idle in Chapel"
			display_name="Idle in Chapel"
			mandatory_eval="1"
			interruptee_type="1" interrupter_type="0"
			icon_skin="ui\orderIcons.xml"
			icon="chapel"
			is_social="1">

			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_work_building input="building"
							   must_lock="0"
							   not_tag="building_shutdown"/>
			
			<require_work_building_position input="destination"/>
			
			<require_gameobject input="altar"
							range="5"
							tag="chapel_altar"
							not_tag="under_construction,module_disabled"
							must_lock="0"/>
			
			<utility min="0" max="30">
				<base_job_utility weight="10"/>
			</utility>
			<fsm>
				<walk_to_adjacent_target_position input="destination"/>
				<waste_time />
			</fsm>
		</job>
		
		<job name="Do Event Arc Religion"
			display_name="Work On Special Project"
			mandatory_eval="1"
			icon_skin="ui\\orderIcons.xml"
			icon="chapel"
			interruptee_type="3"
			interrupter_type="2"
			can_be_social="0"
			filter="workshop">
		
			<require_work_building input="building"
							   failure_reason="Requires work building."
							   tag="eventlocked"
							   not_tag="no_supplies1"
							   must_lock="0" />
			
			<require_work_building_position input="destination" must_lock="0" />
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
	
			<utility min="0" max="1100">
				<base_job_utility weight="1100"/>
			</utility>
			<fsm>
				<walk_to_adjacent_target_position input="destination"/>
				<do_event_arc_religion input="building" />
			</fsm>
		</job>
		
		<job name="Perform Last Rites"
			display_name="Perform Last Rites"
			mandatory_eval="1"
			interruptee_type="1" interrupter_type="0"
			icon_skin="ui\orderIcons.xml"
			icon="chapel"
			filter="workshop">

			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			
			<require_work_building input="building"
							   failure_reason="Requires work building."
							   not_tag="no_supplies1"
							   must_lock="0" />
			
			<require_gameobject range="30"
							tag="dead,human"
							not_tag="last_rites_performed"
							input="body"
							closest="1"
							failure_reason="Requires available body."
							must_lock="0"/>
			
			<utility>
				<base_job_utility weight="20"/>
			</utility>
			<fsm>
				<walk_to input="body"/>
				<perform_last_rites input="body" />
			</fsm>
		</job>
		
		<job name="Perform Last Rites (grave)"
			display_name="Perform Last Rites"
			mandatory_eval="1"
			interruptee_type="1" interrupter_type="0"
			icon_skin="ui\orderIcons.xml"
			icon="chapel"
			filter="workshop">

			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			
			<require_work_building input="building"
							   failure_reason="Requires work building."
							   not_tag="no_supplies1"
							   must_lock="0" />
			
			<require_gameobject range="30"
							tag="grave,citizen_grave"
							not_tag="last_rites_performed"
							input="grave"
							closest="1"
							failure_reason="Requires available body."
							must_lock="0"/>
			
			<utility>
				<base_job_utility weight="20"/>
			</utility>
			<fsm>
				<walk_to input="grave"/>
				<perform_last_rites_on_grave input="grave" />
			</fsm>
		</job>

		<job name="Wander in Chapel" display_name="Wander in Chapel"
			mandatory_eval="1"
			interruptee_type="1"
			interrupter_type="0"
			icon_skin="ui\orderIcons.xml" icon="chapel"
			is_social="1">

			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_work_building input="building" must_lock="0" />
			<require_work_building_position input="destination"/>
			
			<utility min="0" max="49">
				<base_job_utility weight="10"/>
			</utility>
			<fsm>
				<walk_to_adjacent_target_position input="destination"/>
			</fsm>
		</job>

		<job name="Pray (anywhere)" display_name="Pray"
			mandatory_eval="1"
			interruptee_type="1" interrupter_type="0"
			icon_skin="ui\orderIcons.xml" icon="chapel"
			is_social="1">

			<require_not_sitting/>
			<require_empty_hands/>
			 
			<utility min="0" max="49">
				<base_job_utility weight="3"/>
				<trait name="Spiritually Inclined" weight="7"/>
			</utility>
			<fsm>
				<animate name="pray" />
			</fsm>
		</job>

		<job name="Pray in Chapel (self)" display_name="Pray"
			mandatory_eval="1"
			interruptee_type="1" interrupter_type="0"
			icon_skin="ui\orderIcons.xml" icon="chapel"
			is_social="1">

			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_work_building input="building" must_lock="0"/>
			<require_work_building_position input="destination"/>
			
			<utility min="0" max="49">
				<base_job_utility weight="15"/>
			</utility>
			<fsm>
				<walk_to_adjacent_target_position input="destination"/>
				<animate name="pray" />
			</fsm>
		</job>

		<job name="Preach in Chapel (group)"
			mandatory_eval="1"
			display_name="Preach in Chapel"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="chapel"
			filter="workshop">
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_character_has_tag tag="can_preach"/>
			<require_work_building input="building"
							   failure_reason="Requires work building."
							   not_tag="no_supplies1"
							   must_lock="0" />
			
			<require_building_module input="altar"
								for_building="building"
								tag="chapel_altar"
								not_tag="under_construction"
								must_lock="1"/>

			<utility min="0" max="1599">
				<base_job_utility weight="1400"/>				
			</utility>
			<fsm>
				<walk_to input="altar" />
				<give_sermon input="building"/>
			</fsm>
		</job>
		
		<job name="Take Confession"
			display_name="Take Confession"
				test_for_interrupts="1"
				icon_skin="ui\\thoughtIcons.xml"
				icon="holy_cog"
				interruptee_type="2" interrupter_type="1"
				filter="workshop" >
	
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_character_has_no_tag tag="fleeing"/>
			<require_work_building input="building"
							   failure_reason="Requires work building."
							   not_tag="no_supplies1"
							   must_lock="0" />
			
			<!-- <require_character_has_tag tag="vicar"/>     Quis custodiet ipsos custodes? -->      
			<utility min="0" max="1599">
				<base_job_utility weight="1400"/>
			</utility>
			
			<fsm>
				<weak_follow input="sender" />
				<vicar_take_confession input="sender" />
			</fsm>
		</job>
	
		<job name="Denounce Fishy Person"
				display_name="Denounce Fishy Person"
				mandatory_eval="1"
				icon_skin="ui\orderIcons.xml"
				interruptee_type="2"
				interrupter_type="1"
				is_social="1">
				
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_has_no_tag tag="fishy_state"/>
			<require_gameobject range="10"
							input="fish"
							tag="fishy_state"
							must_lock="1"
							not_tag="corpse,asleep"/>
			<require_gameobject_can_be_sociable input="fish"/>
	
			<utility min="0" max="30">
				<base_job_utility weight="5"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="fish" />
				<animate_with input="fish" name="blaming" />
			</fsm>
		</job>
	
		<job name="Confront Spectre"
				display_name="Confront Spectre"
				mandatory_eval="1"
				icon_skin="ui\orderIcons.xml"
				icon="skull"
				interruptee_type="2"
				interrupter_type="1"
				is_social="1">
				
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_has_no_tag tag="cultist"/>
			<require_work_building input="building"
							   failure_reason="Requires work building."
							   not_tag="no_supplies1"
							   must_lock="0" />
			
			<require_gameobject range="12"
							input="spectre"
							tag="spectre"
							not_tag="persistent"
							must_lock="1"/>
	
			<utility min="0" max="30">
				<base_job_utility weight="50"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="spectre" name="run" />
				<vicar_confront_spectre input="spectre" />
			</fsm>
		</job>
		
		<!--
			<job name="Denounce Cultist">
			</job>
		
		Basically a more spiteful version for if you can't convert a cultist.
		Should make everyone who hears the denunciation like the cultist less
		- except cultists, who like the Vicar less.
		-->

		<job name="Perform Exorcism (event)"
			display_name="Perform Exorcism"
			mandatory_eval="0"
			icon_skin="ui\orderIcons.xml"
			icon="chapel"
			interruptee_type="4"
			interrupter_type="3">
				
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_has_no_tag tag="cultist"/>
			
			<on_abort behaviour="yield"/>
	
			<utility min="0" max="2500">
				<base_job_utility weight="2500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="possessed_thing" name="run" />
				<vicar_perform_exorcism input="possessed_thing" />
			</fsm>
		</job>

		<job name="Resupply Office 1 (chapel)"
			display_name="Procure Votive Cogs"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="lower_class" />
			<require_work_building input="building" tag="needs_resupply1" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="iron_cogs"
							range="150" closest="1"
							failure_reason="Requires icon cogs."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 1 (chapel, overseer)"
			display_name="Procure Votive Cogs"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="middle_class" />
			<require_work_building input="building" tag="needs_resupply1_badly" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="iron_cogs"
							range="150" closest="1"
							failure_reason="Requires iron cogs."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<!--<job name="Resupply Office 2 (chapel)"
			display_name="Procure Iron Cogs"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="lower_class" />
			<require_work_building input="building" tag="needs_resupply2" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="brass_cogs"
							range="150" closest="1"
							failure_reason="Requires brass cogs."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Office 2 (chapel, overseer)"
			display_name="Procure Votive Cogs"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="foreign_office"
			can_be_social="0"
			filter="workshop">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_party_filter name="workshop"/>
			<require_character_on_shift/>
			<require_character_has_tag tag="middle_class" />
			<require_work_building input="building" tag="needs_resupply2_badly" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="brass_cogs"
							range="150" closest="1"
							failure_reason="Requires brass cogs."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>-->
		
	</chapel_jobs>

	<!-- LOWER CLASS JOBS -->

	<lower_class>
		
		<job name="Eat Basic Food" display_name="Eat Cooked Food"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
				test_for_interrupts="1">
			
			<require_not_sitting/>
			<require_character_has_no_tag tag="selenian_infested" />
			
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_personal_stat_geq name="hunger" amount="2" failure_reason="Requires sufficient hunger."/>
			<require_gameobject tag="basic_food"
							amount="1" input="food" range="50" closest="1" 
							failure_reason="Requires available food."
							require_owned="1" />
			
			<utility max="2299">
				<base_job_utility weight="1800"/>
			</utility>
			
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<pickup_item input="food"/>
				<consume_food input="food"/>
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Suck Up To Superior (lower class)" display_name="Suck Up To Superior (Off-shift)"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1" interrupter_type="0"
			is_social="1">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_not_on_shift/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable,citizen"
							not_tag="corpse,lower_class"/>
			
			<require_gameobject_can_be_sociable input="friend"/>
			<utility min="0" max="30">
				<base_job_utility weight="0"/>
				<trait name="Obsequious Bootlicker" weight="3"/>
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<suck_up_to input="friend" />
			</fsm>
		</job>

	</lower_class>
	
	<rage_state>
		<!--
			There are two types of rage_state jobs:
			1. one type to override work shifts
			2. one type to do during social shifts
			
			Oh, and 3. Exit Rage Mode is its own deal, but falls under 1.
		-->
		
		<job name="Exit Rage Mode"
			display_name="Calming Down"
                    mandatory_eval="1"
                    interruptee_type="3" 
                    interrupter_type="2"
                    can_be_social="0"
                    test_for_interrupts="1">
               
               <require_not_sitting/>
               <require_empty_hands failure_reason="Character required to have empty hands."/>
               <require_character_personal_stat_leq name="anger" amount="20" />
               
               <utility >
                    <base_job_utility weight="2000"/>
               </utility>
               <fsm>
                    <anger_state_transition name="off"/>
               </fsm>
          </job>
	
	<!-- On-shift rage jobs -->
	
		<job name="Slap Other in Anger"
			display_name="Slap Worker in Anger"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0">
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_on_shift/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable,lower_class,citizen"
							not_tag="dead"/>
			
			<require_gameobject_can_be_sociable input="friend"/>
			
			<utility >
				<base_job_utility weight="250"/>
				<feeling name="anger" weight="250"/>
				<trait name="Brutish" weight="500"/>
				<random value="100" weight="10" />
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<animate_with input="friend" name="slapping" />
				<give_memories input="friend" name="slapped" />
				<feel_about input="friend" name="-1" />
				<feel_about_me input="friend" name="-2" />
				<react_with input="friend" name="slapped" />
			</fsm>
		</job>
	
		<job name="Get Angry Drink (on-shift)"
               display_name="Drink due to Rage (on-shift)"
                    mandatory_eval="1"
                    interruptee_type="2" 
                    interrupter_type="1" 
                    icon_skin="ui\thoughtIcons.xml" 
                    icon="beer_mug">
               
               <require_not_sitting/>
               <require_empty_hands/>
			<require_character_has_no_tag tag="drank_today" do_not_fill_dependency="1" />
			<require_character_on_shift/>
               <require_building input="building"
                                 tag="public_house,has_contents"
                                 must_lock="0"/>
               
               <require_building_module input="booze_vat"
                                        for_building="building"
                                        tag="booze_vat"
                                        not_tag="under_construction"
                                        must_lock="0"/>
               
               <require_building_module input="chair"
                                        for_building="building"
                                        tag="sittable"
                                        not_tag="occupied,module_disabled,under_construction"
                                        must_lock="1"/>
         
               <utility >
				<base_job_utility weight="1000"/>
				<random value="100" weight="10" />
               </utility>
               <fsm>
                    <walk_to_module input="booze_vat"/>
                    <pub_get_drink_from_vat input="building"/>
                    <pub_drink_in_chair input="chair"/>
               </fsm>
          </job>
		
		 <job name="Stomp Due To Rage (on-shift)"
			 display_name="Stomp Due To Rage" 
				mandatory_eval="1"  
				icon_skin="ui\thoughtIcons.xml" icon="angry"
				interruptee_type="2" 
                    interrupter_type="1" 
				can_be_social="0">
			
			<require_not_sitting/>
			<require_empty_hands />
			<require_character_on_shift/>
			<require_random_location range="10"
								input="wanderlocation"/>
			
			<utility >
				<base_job_utility weight="1000"/>
				<random value="100" weight="10" />
			</utility>
			<fsm>
				<walk_to input="wanderlocation" />
				<animate name="idle_angry"/>
				<animate name="stomp_enthusiastically"/>
				<give_memories name="Stomped Due To Rage" />
			</fsm>
		</job>
		 
		<job name="Wander into Wilderness (rage, on-shift)"
			display_name="Run into Wilderness"
			icon_skin="ui\thoughtIcons.xml" icon="angry"
			mandatory_eval="1"
			interruptee_type="2"
			interrupter_type="1"
			can_be_social="0">
			
			<require_not_sitting/>
			<require_empty_hands />
			<require_character_on_shift/>
			<require_random_location range="30"
								input="wanderlocation"/>
			
			<utility >
				<base_job_utility weight="500"/>
				<random value="100" weight="10" />
				<any_civilization input="wanderlocation" weight="-1400" />
			</utility>
			<fsm>
				<walk_to input="wanderlocation"/>
				<animate name="freak_out"/> 
			</fsm>
		</job>
		
		<job name="Yell at Someone (on-shift)"
			display_name="Yell at Someone"
			icon_skin="ui\thoughtIcons.xml" icon="angry"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="2"
			interrupter_type="1">
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable"
							not_tag="corpse"/>
			
			<require_gameobject_can_be_sociable input="friend"/>
			<require_character_has_no_tag tag="fleeing"/>
			<require_empty_hands/>

			<utility >
				<base_job_utility weight="1000"/>
				<random value="100" weight="10" />
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<yell_at input="friend" />
				<give_memories input="friend" name="yelled" />
				<feel_about input="friend" name="-1" />
				<feel_about_me input="friend" name="-2" />
			</fsm>
		</job>
	
	<!-- off-shift rage jobs -->
	
		<job name="Contemplate Murder"
			display_name="Contemplate Murder"
				mandatory_eval="1" 
				can_interrupt="0"
				test_for_interrupts="1"
				icon_skin="ui\thoughtIcons.xml" 
				icon="act_of_murder"
				interruptee_type="4" 
				interrupter_type="3"
				is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_has_no_tag tag="doing_murder_rampage"/>
			<require_character_personal_stat_geq name="anger" amount="25" failure_reason="Requires sufficient anger."/>

			<require_gameobject input="enemy"
							tag="citizen"
							not_tag="dead"
							range="32"
							must_lock="0"
							failure_reason="Requires available human target."/>
			
			<!-- <require_character_is_rival input="enemy" /> -->
			<utility max="25">
				<base_job_utility weight="1"/>
				<feeling name="anger" weight="1"/>
				<trait name="Brutish" weight="3"/>
				<trait name="Of Criminal Element" weight="2" />
				<trait name="Big Game Hunter" weight="1"/>
			</utility>
			<fsm>
				<add_murderpoints input="enemy" />
			</fsm>
		</job>
		
		<job name="Axe Murder (Rival)" display_name="Commit Murder"
				mandatory_eval="1" 
				can_interrupt="1"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher"
				interruptee_type="4" 
				interrupter_type="3"
				is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_personal_stat_geq name="anger" amount="40" failure_reason="Requires sufficient anger." do_not_fill_dependency="1"/>
			<require_character_personal_stat_geq name="murderpoints" amount="4" failure_reason="" do_not_fill_dependency="1"/>
			<require_gameobject input="enemy"
							tag="citizen"
							not_tag="dead"
							range="32"
							must_lock="0"
							closest="0"
							failure_reason="Requires available human target."/>
			
			<require_character_is_rival input="enemy" />
			<utility max="15">
				<base_job_utility weight="1"/>
				<feeling name="anger" weight="1"/>
			</utility>
			<fsm>
				<set_tag name="doing_murder_rampage" />
				<murderer_warning name="axemurder"/>
				<attack_melee_until_kill input="enemy"/>
			</fsm>
		</job>
		
		<job name="Axe Murder (Anyone)" display_name="Commit Murder"
				mandatory_eval="1" 
				can_interrupt="1"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher"
				interruptee_type="4" 
				interrupter_type="3"
				is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands />
			<require_character_personal_stat_geq name="anger" amount="40" do_not_fill_dependency="1"/>
			<require_character_personal_stat_geq name="murderpoints" amount="6" do_not_fill_dependency="1"/>
			<require_gameobject input="enemy"
							tag="citizen"
							not_tag="dead"
							range="32"
							must_lock="0"
							closest="1"
							failure_reason="Requires available human target."
							do_not_fill_dependency="1"/>
			
			<utility max="10">
				<base_job_utility weight="0"/>
				<feeling name="anger" weight="1"/>
			</utility>
			<fsm>
				<set_tag name="doing_murder_rampage" />
				<murderer_warning name="axemurder"/>
				<attack_melee_until_kill input="enemy"/>
			</fsm>
		</job>
          
		<job name="Kill Kill" display_name="Kill Kill"
				mandatory_eval="1" 
				can_interrupt="1"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher"
				interruptee_type="4" 
				interrupter_type="3">
			
			<require_not_sitting/>
			<require_empty_hands />
			<require_character_has_tag tag="doing_murder_rampage" do_not_fill_dependency="1" />
			<require_gameobject input="enemy"
							tag="citizen"
							not_tag="dead"
							range="32"
							must_lock="0"
							closest="1"
							failure_reason="Requires available human target."
							do_not_fill_dependency="1"/>
			
			<utility max="1200">
				<base_job_utility weight="1200"/>
			</utility>
			<fsm>
				<attack_melee_until_kill input="enemy"/>
			</fsm>
		</job>
		
          <job name="Seek Confession (anger)"
               display_name="Seek Comfort from Vicar"
               mandatory_eval="1" 
               test_for_interrupts="1"
               icon="holy_cog" 
               icon_skin="ui\orderIcons.xml" 
               interruptee_type="3" 
               interrupter_type="2"
			is_social="1">
			
               <require_empty_hands/>
               <require_not_sitting/>
               <require_building input="building"
						   tag="chapel,overseer_active"
						   not_tag="no_supplies1"
						   must_lock="0"/>
               
               <require_character_has_no_tag tag="vicar"/>
               <utility max="50" >
                    <base_job_utility weight="5"/>
				<feeling name="fear" weight="1"/>
				<trait name="Spiritually Inclined" weight="10"/>
               </utility>
     
               <fsm>
                    <walk_to_building input="building"/>
                    <file_office_job input="building" name="Take Confession"/>
                    <wait_for_confession input="building"/>
               </fsm>
          </job>
		
		<job name="Punch Rival" display_name="Punch Rival"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable"
							not_tag="corpse"/>
			
			<require_gameobject_can_be_sociable input="friend"/>
			<require_character_feelings_about_leq input="friend" amount="-1"/>
			<require_character_has_no_tag tag="fleeing"/>
			
			
			<utility>
				<base_job_utility weight="5"/>
				<feeling name="anger" weight="1"/>
				<trait name="Brutish" weight="10"/>
				<trait name="Of Criminal Element" weight="5"/>
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<punch input="friend" />
				<feel_about_me input="friend" name="-5" />
			</fsm>
		</job>
		
		<job name="Attack Random Creature"
			display_name="Attack Animal In Rage"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="2"
			interrupter_type="1"
			is_social="1">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_gameobject input="enemy"
							tag="animal"
							range="25"
							not_tag="dead"/>
			
			<require_gameobject_can_be_sociable input="enemy"/>
			<require_character_has_no_tag tag="fleeing"/>
			
			<utility>
				<base_job_utility weight="5"/>
				<feeling name="anger" weight="1"/>
				<trait name="Brutish" weight="10"/>
			</utility>
			<fsm>
				<weak_follow input="enemy" name="run" />
				<attack_melee input="enemy"/>
			</fsm>
		</job>
		
		<job name="Attack Foreigner"
			display_name="Attack Foreigner In Rage"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_gameobject range="10"
							input="enemy"
							tag="foreigner"
							not_tag="corpse,dead"/>
			
			<require_character_has_no_tag tag="fleeing"/>
			
			<utility >
				<base_job_utility weight="0"/>
				<trait name="Xenophobic" weight="10"/>
			</utility>
			<fsm>
				<weak_follow input="enemy" />
				<attack_melee input="enemy"/>
			</fsm>
		</job>
		
		<!-- <job name="Smash Thing In Anger"
			display_name="Smash Stuff"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
		
			<require_mood name="angry" />
			<require_gameobject range="10"
							input="smashable"
							tag="commodity"
							not_tag="food,refined,container"
							must_lock="1"
							closest="1"
							do_not_fill_dependency="1"/>
			
			<require_character_personal_stat_geq name="anger" amount="30" />
			
			<require_empty_hands />
			<utility min="0" max="30">
				<base_job_utility weight="0"/>
				<feeling name="anger" weight="1">
					<trait name="Brutish" weight="1"/>
					<trait name="Of Criminal Element" weight="1"/>
				</feeling>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="smashable"/>	
				<wreck_object input="smashable" name="stomp_enthusiastically" />
				<animate name="idle_happy"/>
			</fsm>
			<history importance="10" />
		</job> -->
          
          <job name="Stomp Due To Rage (off-shift)"
			display_name="Stomp Due To Rage" 
				mandatory_eval="1"  
				icon_skin="ui\thoughtIcons.xml" 
				icon="angry"
				interruptee_type="1" 
                    interrupter_type="0" 
				can_be_social="0" 
				is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands />
			<require_character_not_on_shift/>
			<require_random_location range="10"
								input="wanderlocation"/>
			
			<utility >
				<base_job_utility weight="5"/>
			</utility>
			<fsm>
				<walk_to input="wanderlocation" />
				<animate name="idle_angry"/>
				<animate name="stomp_enthusiastically"/>
				<give_memories name="Stomped Due To Rage" />
			</fsm>
		</job>
		
		<job name="Wander into Wilderness (rage, off-shift)"
			display_name="Run into Wilderness"
			icon_skin="ui\thoughtIcons.xml" 
			icon="angry"
			mandatory_eval="1"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_character_not_on_shift/>
			<require_random_location range="40"
								input="wanderlocation"/>
			
			<utility >
				<base_job_utility weight="5"/>
				<any_civilization input="wanderlocation" weight="-5" />
			</utility>
			<fsm>
				<walk_to input="wanderlocation" name="run"/>
				<animate name="freak_out"/> 
			</fsm>
		</job>
		
		<job name="Yell at Someone (rage, off-shift)"
			display_name="Yell at Someone"
			icon_skin="ui\thoughtIcons.xml" icon="angry"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands/>
			 <require_character_not_on_shift/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable"
							not_tag="corpse"/>
			
			<require_gameobject_can_be_sociable input="friend"/>
			<require_character_has_no_tag tag="fleeing"/>
			

			<utility >
				<base_job_utility weight="10"/>
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<yell_at input="friend" />
				<give_memories input="friend" name="yelled" />
				<feel_about input="friend" name="-1" />
				<feel_about_me input="friend" name="-2" />
			</fsm>
		</job>
	</rage_state>
	
     <despair_state>
          <!--
			All despair jobs are social aside from Exit Despair State.
			(... And anything really important that is triggered manually anyway.)
		-->
		
          <job name="Exit Despair State"
			display_name="Returning to Normal"
				icon_skin="ui\thoughtIcons.xml" icon="taciturn"
                    mandatory_eval="1"
                    interruptee_type="3" 
                    interrupter_type="2"
                    can_be_social="0"
                    test_for_interrupts="1">
               
               <require_not_sitting/>
               <require_empty_hands failure_reason="Character required to have empty hands."/>
               <require_character_personal_stat_leq name="despair" amount="20"/>
               
               <utility>
                    <base_job_utility weight="2000"/>
               </utility>
               <fsm>
                    <despair_state_transition name="off"/>
               </fsm>
          </job>
		
		<job name="Butcher Human Corpse (despair)"
			display_name="Butcher Human To See What's Inside"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml" 
			icon="butcher_icon"
			can_be_social="0" 
			test_for_interrupts="1"
			interruptee_type="3" 
			interrupter_type="2"
			is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>

			<require_gameobject input="friend"
							range="100"
							tag="human,dead,meat_source"
							must_lock="1"
							closest="1"
							failure_reason="Butchering human corpse requires an available human corpse (obviously)." />
			
			<require_character_personal_stat_geq name="hunger" amount="2" />
			
			<utility max="50">
				<base_job_utility weight="1"/>
				<trait name="Morbid" weight="20"/>
				<trait name="Epicurean" weight="5"/>
			</utility>
			<fsm>
				<walk_to input="friend"/>
				<butcher input="friend"/>
			</fsm>
			<!--<fills_reqs>
				<require_gameobject tag="food" amount="1" input="food" range="100" />
			</fills_reqs>-->
		</job>
          
		<job name="Wander into Wilderness (despair)"
			display_name="Run into Wilderness (despair)"
			icon_skin="ui\thoughtIcons.xml" icon="despair"
			mandatory_eval="1"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_random_location range="40"
								input="wanderlocation"/>
			
			<utility max="50">
				<base_job_utility weight="5"/>
				<character_personal_stat name="despair" weight="1"/>
				<any_civilization input="wanderlocation" weight="-50" />
			</utility>
			<fsm>
				<walk_to input="wanderlocation" name="run"/>
				<animate name="freak_out"/> 
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Whisper About Strange Things"
			display_name="Whisper About Strange Things"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_trait name="Strange" failure_reason="Requires strange trait."/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable"
							not_tag="corpse"/>
			
			<require_gameobject_can_be_sociable input="friend"/>
			<require_character_has_no_tag tag="fleeing"/>
			
			<utility max="50">
				<base_job_utility weight="10"/>
				<character_personal_stat name="despair" weight="1"/>
				<any_civilization input="wanderlocation" weight="-50" />
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<animate_with input="friend" name="whispering" />
				<give_memories input="friend" name="whispered" />
				<feel_about input="friend" name="-1" />
			</fsm>
		</job>
		
		<job name="Change Building Name (Bad)"
			display_name="Change Building Name"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml"
			icon="workshops_category"
			interruptee_type="2"
			interrupter_type="1"
			is_social="1">
			
			<require_not_sitting/>
			<require_character_has_tag tag="middle_class" />
			<require_character_personal_stat_geq name="despair" amount="50" failure_reason="Requires sufficient despair."/>
			<require_work_building input="building"
							   must_lock="0"
							   not_tag="bad_name"
							   failure_reason="Requires work building."/>
			
			<utility>
				<base_job_utility weight="100"/>
			</utility>
			<fsm>
				<change_building_name_to_bad input="building"/>
			</fsm>
		</job>
		
		<job name="Rant About The Sea" display_name="Rant About The Sea"
				mandatory_eval="1"
				icon_skin="ui\orderIcons.xml" 
				icon="idle_icon"
				can_be_social="0" 
				interruptee_type="2" 
				interrupter_type="1"
				is_social="1">

			<require_not_sitting />
			<require_empty_hands />
			<require_character_has_tag tag="fishy_state" />
			
			<utility max="100">
				<base_job_utility weight="10"/>
				<character_personal_stat name="despair" weight="1"/>
				<session_bool value="1" name="isNight" weight="10" />
			</utility>
			<fsm>
				<exclaim name="sea" />
				<animate name="insanity_worship"/>
			</fsm>
		</job>
		
		<job name="Gaze Longingly At The Sea"
			display_name="Gaze Longingly At The Sea"
				mandatory_eval="1"
				icon_skin="ui\orderIcons.xml" 
				icon="idle_icon"
				can_be_social="0"
				interruptee_type="2" 
				interrupter_type="1"
				is_social="1">

			<require_character_personal_stat_geq name="despair" amount="30" failure_reason="Requires sufficient despair."/>
			<require_not_sitting/>
			<require_character_has_tag tag="fishy_state" />
			
			<utility max="100">
				<base_job_utility weight="5"/>
				<character_personal_stat name="despair" weight="1"/>
				<session_bool value="1" name="isNight" weight="15" />
			</utility>
			<fsm>
				<walk_to_closest_water />
				<emote name="sea"/>
				<animate name="insanity_worship"  />
			</fsm>
		</job>
		
		<job name="Preach the End Times" display_name="Preach the End Times"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml" icon="chapel"
			is_social="1">

			<require_not_sitting/>
			<require_empty_hands />
			<utility max="100">
				<base_job_utility weight="1"/>
				<character_personal_stat name="despair" weight="1"/>
				<trait name="Spiritually Inclined" weight="20"/>
			</utility>
			<fsm>
				<preach_endtimes />
			</fsm>
		</job>
		<!--
		<job name="Hug Friend Due to Despair"
			display_name="Hug Friend Due to Despair"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_gameobject range="20"
							input="friend"
							tag="conversable"
							not_tag="corpse,fleeing"/>
			
			<require_gameobject_can_be_sociable input="friend"/>
			<require_character_feelings_about_geq input="friend" amount="3"/>
			
			<utility max="50" >
				<base_job_utility weight="10"/>
				<character_personal_stat name="despair" weight="1"/>
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<hug_with input="friend" name="sadHug" />
			</fsm>
		</job>
		-->
		<job name="Dance Frantically"
			display_name="Dance With Frantic Joy"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands/>
			<utility max="50">
				<base_job_utility weight="0"/>
				<character_personal_stat name="happiness" weight="1"/>
				<feeling name="happiness" weight="5"/>
			</utility>
			<fsm>
				<dance_freakout />
			</fsm>
		</job>
		
		<job name="Freak Out In Joy" display_name="Freak Out In Joy"
			mandatory_eval="1" can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands/>
			<utility max="50">
				<base_job_utility weight="0"/>
				<character_personal_stat name="happiness" weight="1"/>
				<feeling name="happiness" weight="5"/>
			</utility>
			<fsm>
				<joy_freakout />
			</fsm>
		</job>
		
		<job name="Talk to Animal" display_name="Talk to Animal"
			mandatory_eval="1" can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_gameobject range="35"
							input="animal"
							must_lock="1"
							closest="1"
							tag="large_carnivore"
							not_tag="corpse"/>
			
			<require_not_sitting/>
			<require_empty_hands/>
			<utility max="50">
				<base_job_utility weight="5"/>
				<character_personal_stat name="despair" weight="1"/>
			</utility>
			<fsm>
				<weak_follow input="animal" name="run"/>
				<talk_to_animal input="animal" />
			</fsm>
		</job>
		
		<job name="Talk to Corpse"
			display_name="Talk to Corpse"
			mandatory_eval="1"
			can_be_social="0"
			icon_skin="ui\thoughtIcons.xml" icon="skull"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_gameobject range="30"
							input="corpse"
							must_lock="1"
							tag="corpse"/>
			
			<require_not_sitting/>
			<require_empty_hands/>
			
			<utility >
				<base_job_utility weight="1"/>
				<character_personal_stat name="despair" weight="1"/>
				<trait name="Morbid" weight="30"/>
			</utility>
			<fsm>
				<weak_follow input="corpse" />
				<talk_to_corpse input="corpse" />
			</fsm>
		</job>
		
		<job name="Flee From Nothing"
			display_name="Flee from Imagined Horror"
			mandatory_eval="1"
			can_be_social="0"
			can_interrupt="1"
			icon_skin="ui\thoughtIcons.xml" icon="afraid"
			interruptee_type="1" interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_random_location range="15"
								input="location"
								min_elevation="0"
								require_flat="0"/>
			<require_not_sitting/>

			<utility >
				<base_job_utility weight="5"/>
				<character_personal_stat name="fear" weight="1"/>
				<feeling name="fear" weight="5" />
			</utility>
			<fsm>
				<set_tag name="fleeing" />
				<walk_to input="location" name="fleeing"/>
				<remove_tag name="fleeing" />
			</fsm>
		</job>
		
          <job name="Seek Confession (Despair)"
               display_name="Seek Comfort from Vicar"
               mandatory_eval="1" 
               test_for_interrupts="1"
               icon="holy_cog" 
               icon_skin="ui\orderIcons.xml" 
               interruptee_type="3" 
               interrupter_type="2"
			is_social="1">
               
			<require_empty_hands/>
               <require_not_sitting/>
               <require_building input="building"
						   tag="chapel,overseer_active"
						   not_tag="no_supplies1"
						   must_lock="0"/>
			
			<require_gameobject input="vicar"
							tag="chapel_jobs"
							not_tag="corpse"
							range="20"
							must_lock="0"
							closest="1"
							failure_reason="Requires available vicar."
							do_not_fill_dependency="1"/>
			
               <require_empty_hands/>

               <require_character_has_no_tag tag="vicar"/>
		     <utility max="50" >
                    <base_job_utility weight="5"/>
				<feeling name="fear" weight="1"/>
				<trait name="Spiritually Inclined" weight="10"/>
               </utility>
               <fsm>
                    <walk_to_building input="building"/>
                    <file_office_job input="building" name="Take Confession"/>
                    <wait_for_confession input="building"/>
               </fsm>
          </job>
		
		<job name="Cure Despair With Laudanum"
               display_name="Drink Laudanum Due To Despair"
                    mandatory_eval="1"
                    interruptee_type="2" 
                    interrupter_type="1" 
                    is_social="1"
                    icon_skin="ui\commodityIcons.xml" icon="laudanum_bottle">
               
		     <require_not_sitting/>
               <require_empty_hands/>
               <require_building input="building"
                                 tag="public_house,has_laudanum"
                                 must_lock="0"/>
               
               <require_building_module input="booze_vat"
                                        for_building="building"
                                        tag="booze_vat"
                                        not_tag="under_construction"
                                        must_lock="0"/>
               
               <require_building_module input="chair"
                                        for_building="building"
                                        tag="sittable"
                                        not_tag="occupied,under_construction"
                                        must_lock="1"/>
         
               <utility max="100">
				<base_job_utility weight="50"/>
				<character_personal_stat name="despair" weight="2"/>
               </utility>
               <fsm>
                    <walk_to_module input="booze_vat"/>
                    <pub_get_drink_from_vat input="building" name="laudanum"/>
                    <pub_drink_in_chair input="chair" />
               </fsm>
          </job>
          
          <job name="Get Despair Drink"
               display_name="Drink due to Intense Despair"
                    mandatory_eval="1"
                    interruptee_type="2" 
                    interrupter_type="1" 
                    is_social="1"
                    icon_skin="ui\thoughtIcons.xml" 
                    icon="beer_mug">
         
               <require_not_sitting/>
               <require_empty_hands/>
			<require_character_has_no_tag tag="drank_today" do_not_fill_dependency="1" />
               <require_building input="building"
                                 tag="public_house,has_contents"
                                 must_lock="0"/>
               
               <require_building_module input="booze_vat"
                                        for_building="building"
                                        tag="booze_vat"
                                        not_tag="under_construction"
                                        must_lock="0"/>
               
               <require_building_module input="chair"
                                        for_building="building"
                                        tag="sittable"
                                        not_tag="occupied,under_construction"
                                        must_lock="1"/>
         
               <utility max="100">
				<base_job_utility weight="50"/>
				<character_personal_stat name="despair" weight="2"/>
               </utility>
               <fsm>
                    <walk_to_module input="booze_vat"/>
                    <pub_get_drink_from_vat input="building"/>
                    <pub_drink_in_chair input="chair"/>
               </fsm>
          </job>
          
          <job name="Despair Hide"
			display_name="Cower due to Despair" 
				mandatory_eval="1"  
				icon_skin="ui\thoughtIcons.xml" 
				icon="afraid"
				interruptee_type="2" 
                    interrupter_type="1" 
				can_be_social="0" 
				is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands />
			<require_building input="building"
						   must_lock="0"
						   failure_reason="Requires available building"/>
			
			<require_character_has_no_tag tag="military"/>
			<require_character_has_no_tag tag="fishy_state"/>

			<utility min="0" max="100">
				<base_job_utility weight="10"/>
				<trait name="Craven" weight="20"/>
				<trait name="Foolishly Brave" weight="-50"/>
				<character_personal_stat name="despair" weight="1"/>
				<character_personal_stat name="fear" weight="1"/>
			</utility>
			<fsm>
				<walk_to_building input="building" />
				<animate name="scared"/>
				<give_memories name="Cowered In Despair" />
			</fsm>
		</job>
          
          <job name="Despair Hide (Outside)"
			display_name="Cower due to Intense Despair" 
				mandatory_eval="1"  
				icon_skin="ui\thoughtIcons.xml" 
				icon="afraid"
				interruptee_type="2" 
                    interrupter_type="1" 
				can_be_social="0" 
				is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands />
               <require_random_location range="20" input="destination"/>
			
			<utility min="0" max="100">
				<trait name="Craven" weight="20"/>
				<trait name="Foolishly Brave" weight="-50"/>
				<base_job_utility weight="10"/>
				<character_personal_stat name="despair" weight="1"/>
				<character_personal_stat name="fear" weight="1"/>
			</utility>
			<fsm>
				<walk_onto input="destination" />
				<animate name="scared"/>
				<give_memories name="Cowered In Despair (Outside)" />
			</fsm>
		</job>
		
		<job name="Stare Longingly At The Sea"
			display_name="Stare Longingly At The Sea"
			mandatory_eval="1"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_trait name="Fishy Behaviour"/>
			
			<require_random_location range="15"
								input="destination"
								max_elevation="-1"
								require_flat="0"/>
			
			<utility max="150" >
				<base_job_utility weight="50"/>
				<character_personal_stat name="despair" weight="1"/>
			</utility>
			<fsm>
				<walk_to input="destination"/>
				<stare_longingly_at_sea/>
			</fsm>
		</job>
		
		<job name="Perform Beetle Curse"
			display_name="Perform Beetle Curse"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="3" interrupter_type="2"
			is_social="1">
			
			<require_not_sitting />
			<require_empty_hands />
			<require_trait name="An Inordinate Fondness for Beetles" />
			
			<require_character_feelings_about_leq input="friend" amount="-1"/>
			<require_character_personal_stat_geq name="despair"
										  amount="60"
										  failure_reason="Requires sufficient despair."/>
			
			<require_gameobject	input="beetle"
							range="20"
							closest="1"
							tag="beetle" />
			
			<require_gameobject input="friend"
							range="16"
							tag="citizen"
							not_tag="corpse"/>
			
			<!--<require_gameobject_can_be_sociable input="friend"/>-->
			
			<utility min="0" max="30">
				<base_job_utility weight="1"/>
				<feeling name="anger" weight="3"/>
			</utility>
			<fsm>
				<walk_to input="beetle" />
				<magic_cast_start_poof_self name="beetle" />
				<weak_follow input="friend" name="run" />  <!-- sneak? -->
				<magic_cast_beetle_curse input="friend"/>
				<walk_away_from_creature input="friend" name="run"/>
			</fsm>
		</job>
		
		<job name="Perform Tree Curse"
			display_name="Perform Tree Curse"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="3" interrupter_type="2"
			is_social="1">
			
			<require_not_sitting />
			<require_empty_hands />
			<require_trait name="Interest in Exotic Wildernesses" />
			<require_character_feelings_about_leq input="friend" amount="-1"/>
			<require_character_personal_stat_geq name="despair"
										  amount="60"
										  failure_reason="Requires sufficient despair."/>
			
			<require_gameobject	input="tree"
							range="20"
							closest="1"
							tag="tree" />
			
			<require_gameobject input="friend"
							range="16"
							tag="citizen"
							not_tag="corpse"/>
			
			<utility min="0" max="30">
				<base_job_utility weight="1"/>
				<feeling name="anger" weight="3"/>
			</utility>
			<fsm>
				<walk_to input="tree" />
				<magic_cast_start_poof_self name="exotic_wilderness" />
				<weak_follow input="friend" name="run" />  <!-- sneak? -->
				<magic_cast_tree_curse input="friend"/>
				<walk_away_from_creature input="friend" name="run"/>
			</fsm>
		</job>
     </despair_state>
	
	<middle_class>
		<job name="Eat Quality Food" display_name="Eat Quality Food"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
				test_for_interrupts="1">
			
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_gameobject tag="quality_food"
							amount="1" input="food" range="50" closest="1" 
							failure_reason="Requires available food."
							require_owned="1" />
			
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_personal_stat_geq name="hunger" amount="1" failure_reason="Requires sufficient hunger."/>
			
			<utility max="2299">
				<base_job_utility weight="1800"/>
			</utility>
			
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<pickup_item input="food"/>
				<consume_food input="food"/>
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Suck Up To Superior (middle class)" display_name="Suck Up To Superior (Off-shift)"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_character_not_on_shift/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable,upper_class,citizen"
							not_tag="corpse"/>
			
			<require_gameobject_can_be_sociable input="friend"/>
			<require_character_has_no_tag tag="fleeing"/>
			<require_empty_hands/>

			<utility min="0" max="30">
				<base_job_utility weight="0"/>
				<trait name="Obsequious Bootlicker" weight="3"/>
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<suck_up_to input="friend" />
			</fsm>
		</job>
		
		<job name="Change Building Name (Good)"
			display_name="Change Building Name"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml"
			icon="workshops_category"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_work_building input="building"
							   must_lock="0"
							   tag="bad_name"
							   failure_reason="Requires work building."/>
		
			<require_character_has_no_tag tag="despair_state" do_not_fill_dependency="1" />
			<require_character_personal_stat_leq name="despair"
										  amount="25"
										  failure_reason="Requires sufficiently low despair."/>

			<utility>
				<base_job_utility weight="2"/>
			</utility>

			<fsm>
				<change_building_name_to_good input="building"/>
			</fsm>
		</job>

		<job name="Inspect Machinery (Artisan w/Claimed Building)"
			display_name="Admire Fine Machinery (Off-shift)"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml" icon="cycle_image"
			interruptee_type="1" interrupter_type="0"
			is_social="1">
			
			<require_character_not_on_shift/>
			<require_work_building input="building"
							   failure_reason="Requires work building."
							   must_lock="0"/>
			
			<require_building_module input="machine"
								tag="machine"
								claimed_building="1"
								failure_reason="Requires a building module."
								in_gsd="1"/>
			
			<require_not_sitting/>
			<utility min="0" max="49">
				<base_job_utility weight="5"/>
			</utility>
			<fsm>
				<walk_to_module input="machine"/>
				<inspect_machinery/>
				<feel_happy/>
			</fsm>
		</job>

		
		
	</middle_class>

	<!-- all hat use jobs go here. -->

	<!-- <hat_use>
		<job name="Wear Hat" display_name="Wear Hat" mandatory_eval="0" interruptee_type="1" interrupter_type="1">
			<require_no_hat failure_reason="Character is already wearing a hat."/>
			<require_gameobject input="hat" range="30" tag="hat" failure_reason="Requires available hat." closest="1"/>
			<require_not_sitting/>
			<require_not_attending_party/>
			<utility>
				<base_job_utility weight="1"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="hat"/>
				<pickup_hat input="hat"/>
			</fsm>
		</job>
	</hat_use> -->

	<!-- general work party labours. -->

	<work_party_jobs>
		
		<job name="Wander Near Overseer (Human)" display_name="Wander Near Overseer"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml" icon="overseer_icon"
			interruptee_type="1" interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_character_has_tag tag="lower_class" />
			<require_character_has_no_tag tag="mining_jobs" />
			
			<utility min="0" max="30">
				<base_job_utility weight="30"/>
			</utility>
			<fsm>
				<walk_to_near_my_overseer />
			</fsm>
		</job>
		
		<job name="Mine Surface Node" display_name="Mine Surface Node"
			mandatory_eval="0"
			loop="0"
			icon_skin="ui\commodityIcons.xml"
			icon="icon_pickaxe"
			interruptee_type="2"
			interrupter_type="1"
			filter="mining">
			
			<on_abort behaviour="yield"/>
			
			<require_empty_hands />
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_party_filter name="mining"/>
			<require_no_work_party_workshop failure_reason="Requires a character without a workshop."/>
			<require_item_drop_location input="drop_location"/>
			
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="oreNode"/>
				<mine_surface_node input="oreNode"/>
				<increment_character_skill name ="stoneworking"/>
				<fill_input_for_held_item name="drop_location"/>
				<walk_to_adjacent_position_for_item_drop input="drop_location" />
				<place_item_behaviour input="drop_location" />
			</fsm>
			<history importance="10" />
		</job>

		<job name="Flatten Terrain" display_name="Flatten Terrain"
			mandatory_eval="0"
			test_for_interrupts="1"
			can_be_social="0"
			icon_skin="ui\orderIcons.xml" icon="flatten"
			interruptee_type="2" interrupter_type="1"
			filter="construction" >
			
			<on_abort behaviour="kill"/>
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_party_filter name="construction"/>
			<require_no_work_party_workshop failure_reason="Requires a character without a workshop."/>
			<require_flat_square input="jobsite" must_lock="1" />
			<require_empty_hands />
			
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to_adjacent_target_position input="jobsite"/>
				<flatten_terrain input="jobsite"/>
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Chop Tree" display_name="Chop Tree"
			mandatory_eval="0"
			test_for_interrupts="1"
			can_be_social="0"
			loop="0"
			icon_skin="ui\orderIcons.xml" icon="chop_tree_icon"
			interruptee_type="2" interrupter_type="1"
			filter="chopping">
			
			<on_abort behaviour="yield"/>
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_party_filter name="chopping"/>
			<require_no_work_party_workshop failure_reason="Requires a character without a workshop."/>
			<require_item_drop_location input="drop_location"/>
			<require_empty_hands />
			
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="tree"/>
				<chop_tree input="tree"/>
				<fill_input_for_held_item name="drop_location"/>
				<walk_to_adjacent_position_for_item_drop input="drop_location" />
				<place_item_behaviour input="drop_location" />
		
			</fsm>
		</job>

		<job name="Clear Terrain"
			display_name="Clear Terrain"
			mandatory_eval="0"
			loop="0"
			icon_skin="ui\orderIcons.xml"
			icon="dig_icon"
			interruptee_type="2"
			interrupter_type="1"
			filter="construction" >
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_party_filter name="construction"/>
			<require_no_work_party_workshop failure_reason="Requires a character without a workshop."/>
			<on_abort behaviour="yield"/>
			<require_empty_hands />
			 
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="clearable"/>
				<clear_object input="clearable"/>
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Remove Forageables"
			display_name="Remove Foragables"
			mandatory_eval="0"
			loop="0"
			icon_skin="ui\thoughtIcons.xml"
			icon="jobhand"
			interruptee_type="2"
			interrupter_type="1"
			filter="construction" >
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_party_filter name="construction"/>
			<require_no_work_party_workshop failure_reason="Requires a character without a workshop."/>
			<on_abort behaviour="yield"/>
			<require_empty_hands />
			 
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="forageable"/>
				<harvest_forageSource input="forageable"/>
			</fsm>
			<history importance="10" />
		</job>

		<job name="Dismantle Objects" display_name="Dismantle Object"
			mandatory_eval="0"
			can_be_social="0"
			icon_skin="ui\orderIcons.xml" icon="dig_icon"
			interruptee_type="2" interrupter_type="1"
			filter="construction" >
			
			<on_abort behaviour="yield"/>
			
			<require_work_party_filter name="construction"/>
			<require_no_work_party_workshop failure_reason="Requires a character without a workshop."/>
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_character_on_shift/>
			<require_empty_hands />
			
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="object"/>
				<dismantle_object input="object"/>
			</fsm>
			<history importance="10" />
		</job>

		<job name="Remove Landmines" display_name="Remove Landmines"
			mandatory_eval="0"
			can_be_social="0"
			icon_skin="ui\orderIcons.xml" icon="dig_icon"
			interruptee_type="2" interrupter_type="1"
			filter="construction" >
			
			<on_abort behaviour="yield"/>
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_party_filter name="construction"/>
			<require_no_work_party_workshop failure_reason="Requires a character without a workshop."/>
			<require_empty_hands />
			
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="landmine"/>
				<dismantle_object input="landmine"/>
			</fsm>
			<history importance="10" />
		</job>

		<job name="Forage" display_name="Forage"
			mandatory_eval="0"
			can_be_social="0"
			icon_skin="ui\commodityIcons.xml" icon="saskatoonberries_bushel"
			interruptee_type="2" interrupter_type="1"
			filter="foraging">
      
			<on_abort behaviour="yield"/>
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_party_filter name="foraging"/>
			<require_no_work_party_workshop failure_reason="Requires a character without a workshop."/>
			<require_item_drop_location input="drop_location"/>
			
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="forageSource"/>
				<harvest_forageSource input="forageSource"/>
				<!--<increment_character_skill name="naturalism"/>-->
				<fill_input_for_held_item name="drop_location"/>
				<walk_to_adjacent_position_for_item_drop input="drop_location" />
				<place_item_behaviour input="drop_location" />
			</fsm>
			<history importance="10" />
		</job>

	<!-- Farming Jobs -->

		<job name="Farming" display_name="Farming"
			mandatory_eval="0"
			can_be_social="0"
			icon_skin="ui\orderIcons.xml" icon="farming"
			interruptee_type="2" interrupter_type="1"
			filter="farming">
			
			<on_abort behaviour="yield"/>
	
			<require_work_party_owns_object input="farm" must_lock="0"/>
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_empty_hands />
			<!--<require_no_work_party_workshop failure_reason="Requires a character without a workshop."/>-->
			
			<require_work_party_filter name="farming"/>
			
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
				<has_tag input="crop" tag="destroyed" weight="100"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="crop"/>
				<farming input="crop"/>
				<!-- skill inc handled in farming.fsm -->
			</fsm>
		</job>

		
		<!-- Farmers get special high-priority crop protection jobs. -->
		<job name="Shoo Animal Away" display_name="Shoo Animal"
				mandatory_eval="1"
				can_be_social="0" 
				can_interrupt="1"
				interruptee_type="3" 
				interrupter_type="2"
				filter="farming">
			
			<require_work_party_filter name="farming" do_not_fill_dependency="1"/>
			
			<require_gameobject range="10"
							input="animal"
							tag="bad_animal"
							not_tag="dead,corpse,vermin,fleeing"
							must_lock="1"
							closest="1"
							do_not_fill_dependency="1"/>
			
			<utility min="800" max="1599">
				<base_job_utility weight="1500" />
				<distance_from input="animal" weight="-1" />
			</utility>
			<fsm>
				<set_tag name="shooing" />
				<walk_to_near_position input="animal" name="run" />
				<shoo_animal name="stomp_something" input="animal" />
				<remove_tag name="shooing" />
			</fsm>
			<history importance="10" />
		</job>

		<job name="Squish Vermin (farmer)" display_name="Squish Vermin"
				mandatory_eval="1" 
				can_be_social="0" 
				can_interrupt="1"
				interruptee_type="3" 
				interrupter_type="2"
				filter="farming">
			
			<!-- farmers can get an upgraded priority version of this. -->
			<require_work_party_filter name="farming" do_not_fill_dependency="1"/>
			<require_character_on_shift/>
			<require_gameobject range="4"
							input="vermin"
							tag="vermin"
							not_tag="corpse,dead"
							must_lock="0"
							closest="1"
							do_not_fill_dependency="1"/>
			
			<require_character_personal_stat_leq name="inCombat" amount="1"/>
			
			<utility min="0" max="1599">
				<base_job_utility weight="1250" />
				<distance_from input="vermin" weight="-1" />
			</utility>
			<fsm>
				<walk_to_adjacent_position input="vermin" name="run" />
				<squish_vermin input="vermin" />
			</fsm>
			<history importance="10" />
		</job>

	<!-- everyone can resupply the Barracks! -->
	
		<job name="Resupply Barracks Ammo 1"
			display_name="Resupply Barracks"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="barracks"
			can_be_social="0"
			filter="hauling">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_character_on_shift/>
			
			<require_building input="building" tag="barracks,needs_resupply1" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="ammo1"
							range="150" closest="1"
							failure_reason="Requires Stone Pellet Ammunition."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="500"/>
				<has_tag input="building" tag="needs_resupply1_badly" weight="500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>

		<job name="Resupply Barracks Ammo 2"
			display_name="Resupply Barracks"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="barracks"
			can_be_social="0"
			filter="hauling">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_character_on_shift/>
			
			<require_building input="building" tag="barracks,needs_resupply2" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="ammo2"
							range="150" closest="1"
							failure_reason="Requires Ball Cartridge Ammunition."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="500"/>
				<has_tag input="building" tag="needs_resupply2_badly" weight="500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Barracks Ammo 3"
			display_name="Resupply Barracks"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="barracks"
			can_be_social="0"
			filter="hauling">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_character_on_shift/>
			
			<require_building input="building" tag="barracks,needs_resupply3" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="ammo3"
							range="150" closest="1"
							failure_reason="Requires Full Metal Jacket Ammunition."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="500"/>
				<has_tag input="building" tag="needs_resupply3_badly" weight="500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>
		
		<job name="Resupply Barracks Ammo 4"
			display_name="Resupply Barracks"
			mandatory_eval="1"
			loop="0"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="barracks"
			can_be_social="0"
			filter="hauling">
	
			<require_empty_hands />
			<require_not_sitting/>
			<require_character_on_shift/>
			
			<require_building input="building" tag="barracks,needs_resupply4" not_tag="under_construction" must_lock="0"/>
			<require_gameobject input="supplies" tag="ammo4"
							range="150" closest="1"
							failure_reason="Requires Crate of Grenades."
							require_owned="1" />
			
			<utility>
				<base_job_utility weight="500"/>
				<has_tag input="building" tag="needs_resupply4_badly" weight="500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="supplies"/>
				<pickup_item input="supplies"/>
				<building_held_supply_check input="building" />
				<walk_to_building input="building" />
				<building_add_supplies input="building"/>
			</fsm>
		</job>

	</work_party_jobs>

	<citizen>
          
		<job name="Inspect New Workplace"
			display_name="Inspect New Workplace"
			mandatory_eval="0"
			loop="0"
			can_interrupt="1"
			test_for_interrupts="1"
			interruptee_type="2"
			interrupter_type="1"
			icon_skin="ui\orderIcons.xml"
			icon="workcrew_inside"
			can_be_social="0"
			filter="workshop">
		
			<require_empty_hands />
			<require_not_sitting/>
			<require_work_building input="building" not_tag="under_construction" must_lock="0"/>
			
			<utility>
				<base_job_utility weight="2000"/>
			</utility>
			<fsm>
				<walk_to_building input="building" />
				<react_to_building_quality input="building"/>
			</fsm>
		</job>
		
          <job name="Enter Despair Mode" display_name="Become Consumed By Despair"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
                    can_be_social="0"
				test_for_interrupts="1">
			
			<require_not_sitting/>
			<require_character_has_tag tag="middle_class" />
               <require_character_has_no_tag tag="despair_state"/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_personal_stat_geq name="despair" amount="50" failure_reason="Requires sufficient despair."/>
			
			<utility max="2299">
				<base_job_utility weight="1300"/>
			</utility>
			<fsm>
				<despair_state_transition name="on"/>
			</fsm>
		</job>
		
		<job name="Enter Rage Mode" display_name="Become Consumed By Rage"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
                    can_be_social="0"
				test_for_interrupts="1">
			
			<require_not_sitting/>
			<require_character_has_tag tag="middle_class" />
               <require_character_has_no_tag tag="rage_state"/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_personal_stat_geq name="anger" amount="50" failure_reason="Requires sufficient despair."/>
			
			<utility max="2299">
				<base_job_utility weight="1300"/>
			</utility>
			<fsm>
				<anger_state_transition name="on"/>
			</fsm>
		</job>
          
		<job name="Retreat (Within Civilization)"
			display_name="Retreating (Within Civilization)"
			mandatory_eval="0"
			can_be_social="0"
			can_interrupt="1"
			icon_skin="ui\thoughtIcons.xml" icon="retreat"
			interruptee_type="3" interrupter_type="2" >
			
			<require_not_sitting/>
			<require_gameobject input="enemy"
							tag="hostile_agent"
							not_tag="dead"
							range="16"
							must_lock="0"
							failure_reason="Fleeing requires something horrible to flee from."/>			
			<utility>
				<base_job_utility weight="-1"/>
			</utility>
			<fsm>
				<set_tag name="fleeing" />
				<unlock input="enemy"/>
				<walk_away_from_creature input="enemy" name="run"/>
				<remove_tag name="fleeing" />
				<flee_success_test />
			</fsm>
		</job>
		
		<job name="Retreat (Outside Civilization)"
			display_name="Retreating Toward Civilization"
			mandatory_eval="0"
			can_be_social="0"
			can_interrupt="1"
			icon_skin="ui\thoughtIcons.xml" icon="retreat"
			interruptee_type="3" interrupter_type="2" >
			
			<require_civ_dist_geq input="200"/>
			<require_closest_civilization_location input="the_place"/>
			<!--<require_no_item_instant />-->
			<require_not_sitting/>

			<utility>
				<base_job_utility weight="-1"/>
			</utility>
			<fsm>
				<set_tag name="fleeing" />
				<attempt_emote name="retreat" />
				<walk_to_near_location input="the_place" name="run"/>
				<remove_tag name="fleeing" />
				<flee_success_test />
			</fsm>
		</job>
		
		<!--
		<job name="Shoot At Entity (civilian, spontaneous target)" display_name="Shoot At Entity"
				can_interrupt="1" mandatory_eval="1"
				interruptee_type="4" interrupter_type="3"
				icon_skin="ui\orderIcons.xml" icon="guns_image"
				can_be_social="0"
				filter="military" >

			<require_no_item_instant />
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_wield_tool tag="firearm" failure_reason="Requires available weapon."/>
			<require_tool_uses tag="firearm" uses="1" />
			<require_gameobject input="enemy"
							tag="hostile_agent"
							range="16"
							must_lock="0"
							failure_reason="Attacking requires a target hostile."
							closest="1"
							do_not_fill_dependency="1"/>
			
			<utility>
				<base_job_utility weight="-1"/>
			</utility>
			<fsm>
				<attack_ranged input="enemy" name="run"/>
			</fsm>
		</job>

		<job name="Melee Attack Entity (civilian, spontaneous target)" display_name="Melee Attack Entity"
				mandatory_eval="0"
				can_interrupt="1"
				can_be_social="0"
				interruptee_type="4" interrupter_type="3"
				icon_skin="ui\orderIcons.xml" icon="guns_image"
				filter="military" >

			<require_no_item_instant />
			<require_not_sitting/>
			<require_not_attending_party/>
			
			<require_gameobject input="enemy"
							tag="hostile_agent"
							range="10"
							closest="1"
							must_lock="0"
							failure_reason="Attacking requires a target enemy."
							do_not_fill_dependency="1" />
			
			<utility>
				<base_job_utility weight="-1"/>
			</utility>
			<fsm>
				<attack_melee input="enemy" name="run"/>
			</fsm>
		</job> -->
		
		<!-- Not referenced anywhere, so deprecating for 42D.
		<job name="Retreat" display_name="Retreating (General Retreating)"
				mandatory_eval="1" can_interrupt="1"
				icon_skin="ui\thoughtIcons.xml" icon="retreat"
				interruptee_type="3" interrupter_type="2" >

			<require_character_personal_stat_leq name="morale" amount="-25" failure_reason="Requires sufficient demoralization."/>
			<require_random_location range="20" input="destination"/>
			<require_no_item_instant />
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_gameobject input="enemy"
							tag="hostile_agent"
							range="15" must_lock="0"
							failure_reason="Fleeing requires something horrible to flee from."/>
			
			<require_random_location range="25" input="map_center" use_origin="1"/>
			<utility>
				<base_job_utility weight="-1"/>
			</utility>
			<fsm>
				<set_tag name="fleeing" />
				<attempt_emote name="retreat" />
				<unlock input="enemy"/>
				<walk_away_from_creature input="enemy" name="run"/>
				<remove_tag name="fleeing" />
				<flee_success_test />
			</fsm>
		</job> -->
		
		<job name="Survey Location (event)"
			display_name="Survey Location"
			mandatory_eval="0"
			test_for_interrupts="0"
			interruptee_type="4" interrupter_type="3"
			icon_skin="ui\thoughtIcons.xml" icon="retreat">
			
			<require_not_sitting/>
			<require_empty_hands />
			<require_gameobject input="destination"
							tag="event_waypoint"
							range="500"
							must_lock="1"
							closest="1"
							failure_reason="Requires beacon to explore to."
							do_not_fill_dependency="1"/>
			
			<on_abort behaviour="yield"/>
			
			<utility >
				<base_job_utility weight="2500"/>
			</utility>
			<fsm>
				<walk_onto input="destination" />
				<animate name="survey"/>
				<waypoint_completed input="destination"/>
			</fsm>
		</job>

	<!-- Horror first-sighting jobs. -->
		
	<job name="See Fishperson" display_name="See Fishperson"
			icon_skin="ui\orderIcons.xml" icon="explore_image"
			mandatory_eval="1"
			interruptee_type="4" interrupter_type="3">
		
		<!-- should dead fishpeople be seen too? : Probably. -->
		<require_character_has_no_tag tag="fishperson_seen" />
		<require_gameobject input="enemy"
						tag="fishperson"
						not_tag="corpse,food"
						range="12"
						must_lock="0"
						closest="1"
						failure_reason="Requires a fishperson." />
		
		<utility>
			<base_job_utility weight="2000"/>
		</utility>
		<fsm>
			<walk_to_near_target input="enemy" />
			<!--<cower_in_fear input="enemy" name="fishperson" />-->
			<see_horror input="enemy"/>
			<walk_away_from_creature input="enemy" name="fleeing"/>
		</fsm>
		<history importance="10" />
	</job>
	
	<job name="See Obeliskian" display_name="See Obeliskian"
		icon_skin="ui\orderIcons.xml" icon="explore_image"
		mandatory_eval="1"
		interruptee_type="4"
		interrupter_type="3">
		
		<require_character_has_no_tag tag="obeliskian_seen" />
		<require_gameobject input="enemy"
						tag="obeliskian"
						not_tag="dormant,artifact,corpse"
						range="12"
						must_lock="0"
						closest="1"
						failure_reason="Requires an ." />
		
		<utility>
			<base_job_utility weight="2000"/>
		</utility>
		<fsm>
			<walk_to_near_target input="enemy" />
			<see_horror input="enemy"/>
			<walk_away_from_creature input="enemy" name="fleeing"/>
		</fsm>
		<history importance="10" />
	</job>
	
	<job name="See Selenian"
		display_name="See Selenian"
		icon_skin="ui\orderIcons.xml"
		icon="explore_image"
		mandatory_eval="1"
		interruptee_type="4" interrupter_type="3">
		
		<require_character_has_no_tag tag="selenian_seen" />
		<require_gameobject input="enemy"
						tag="selenian"
						not_tag="dormant,artifact,corpse,dead"
						range="18"
						must_lock="0"
						closest="1"
						failure_reason="Requires a Selenian." />
		
		<utility>
			<base_job_utility weight="2000"/>
		</utility>
		<fsm>
			<walk_to_near_target input="enemy" />
			<see_horror input="enemy"/>
			<walk_away_from_creature input="enemy" name="fleeing"/>
		</fsm>
		<history importance="10" />
	</job>
	
	<job name="See Geometer"
		display_name="See Geometer"
		icon_skin="ui\orderIcons.xml"
		icon="explore_image"
		mandatory_eval="1"
		interruptee_type="4" interrupter_type="3">
		
		<require_character_has_no_tag tag="geometer_seen" />
		<require_gameobject input="enemy"
						tag="geometer_biped"
						not_tag="dormant,artifact,corpse,dead"
						range="18"
						must_lock="0"
						closest="1"
						failure_reason="Requires a Geometer." />
		
		<utility>
			<base_job_utility weight="2000"/>
		</utility>
		<fsm>
			<walk_to_near_target input="enemy" />
			<see_horror input="enemy"/>
			<walk_away_from_creature input="enemy" name="fleeing"/>
		</fsm>
		<history importance="10" />
	</job>
	
	<job name="Flee from Fire"
		display_name="Fleeing from Fire"
		mandatory_eval="1"
		can_interrupt="1"
		test_for_interrupts="1"
		icon_skin="ui\thoughtIcons.xml" icon="afraid"
		interruptee_type="3" interrupter_type="2">
		
		<!--<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="militia" />-->
		
          <require_gameobject input="burning"
						tag="burning"
						range="5"
						must_lock="0"
						failure_reason="Fleeing requires something horrible to flee from."/>
		
          <utility>
               <base_job_utility weight="1000"/>
          </utility>
          <fsm>
               <set_tag name="fleeing" />
			<animate_at input="burning" name="scared" />
               <walk_away_from_creature input="burning" name="fleeing"/>
               <remove_tag name="fleeing" />
          </fsm>
     </job>
	
	<job name="Flee from Fishperson (skittish)" display_name="Fleeing from Nearby Fishperson"
		mandatory_eval="1"
		can_interrupt="0"
		test_for_interrupts="1"
		icon_skin="ui\thoughtIcons.xml" icon="afraid"
		interruptee_type="3" interrupter_type="2">
		
		<character_personal_stat_leq name="morale" weight="-65"/>
		
		<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="militia" />
		<require_character_has_no_tag tag="cultist_fishperson" />
		
		<require_overseer_not_trait name="Military Training" />
          <require_gameobject input="enemy"
						tag="fishperson"
						not_tag="dead,food"
						range="3"
						must_lock="0"
						failure_reason="Fleeing requires something horrible to flee from."/>
		
          <utility>
               <base_job_utility weight="200"/>
			<trait name="Fishy Behaviour" weight="-200"/>
          </utility>
          <fsm>
               <set_tag name="fleeing" />
			<animate_at input="enemy" name="scared" />
               <walk_away_from_creature input="enemy" name="fleeing"/>
               <remove_tag name="fleeing" />
          </fsm>
     </job>

	

	<!-- Colonists not allowed to attack, but can still try to mess with them -->
	<job name="Intimidate Fishperson" display_name="Intimidate Fishperson"
		icon="fishperson_angry" icon_skin="thoughtIcons.xml"
		can_be_social="0"
		can_interrupt="0"
		mandatory_eval="1"
		test_for_interrupts="1"
		is_social="1"  >
		
		<require_character_has_no_tag tag="cultist_fishperson" />
		
		<require_gameobject input="fishperson"
						tag="fishperson"
						not_tag="hostile_horror,dead,food,hostile_agent,fleeing"
						range="12"
						must_lock="0"
						closest="1"
						failure_reason="Requires non-hostile fishperson." />
	
		<utility>
			<base_job_utility weight="0"/>
			<trait name="Fishy Behaviour" weight="-5" />
			<trait name="Craven" weight="-20"/>
			<feeling name="anger" weight="1">
				<trait name="Brutish" weight="1"/>
				<trait name="Xenophobic" weight="3"/>
				<trait name="Staunch Traditionalist" weight="1"/>
			</feeling>
			<feeling name="fear" weight="0">
				<trait name="Brutish" weight="1"/>
				<trait name="Xenophobic" weight="3"/>
			</feeling>
			<feeling name="indifferent" weight="0">
				<trait name="Xenophobic" weight="1"/>
			</feeling>
		</utility>
		
		<fsm>
			<intimidate_fishperson input="fishperson" />
		</fsm>
	</job>
	
	<!-- Neutral effect; just curious and a bit rude -->
	<job name="Gawk At Fishperson" display_name="Gawk At Fishperson"
		icon="fishperson" icon_skin="thoughtIcons.xml"
		can_be_social="1" can_interrupt="0"
		mandatory_eval="1" is_social="1" test_for_interrupts="1" >
	
		<require_gameobject input="fishperson"
						tag="fishperson"
						not_tag="hostile_horror,dead,food,hostile_agent,fleeing"
						range="12"
						must_lock="0"
						closest="1"
						failure_reason="Requires non-hostile fishperson." />
	
		<utility>
			<base_job_utility weight="1"/>
			<trait name="Fishy Behaviour" weight="3" />
			<trait name="Scholarly" weight="2"/>
			<trait name="Interest in Exotic Wildernesses" weight="2"/>
			<trait name="Xenophobic" weight="-10"/>
			<feeling name="anger" weight="-2"/>
			<feeling name="fear" weight="-2"/>
		</utility>
		
		<fsm>
			<!-- TODO for real -->
			<weak_follow input="fishperson" />
			<animate_at input="fishperson" name="inspect_painting_shrug" />
		</fsm>
	</job>
		
	<!-- Positive effect; try to chat to fishperson 
	<job name="Talk To Fishperson" display_name="Talk To Fishperson"
		icon="fishperson" icon_skin="thoughtIcons.xml"
		can_be_social="1"
		can_interrupt="0"
		mandatory_eval="1"
		test_for_interrupts="1"
		is_social="1" >
		
		<require_gameobject input="fishperson"
						tag="fishperson"
						not_tag="hostile_horror,dead,food,fleeing"
						range="12"
						must_lock="0"
						closest="1"
						failure_reason="Requires non-hostile, alive fishperson." />
	
		<utility>
			<base_job_utility weight="0"/>
			<trait name="Fishy Behaviour" weight="3" />
			<trait name="Strange" weight="2"/>
			<trait name="Adventurous" weight="2"/>
			<trait name="Craven" weight="-5"/>
			<trait name="Staunch Traditionalist" weight="-5"/>
			<trait name="Xenophobic" weight="-10"/>
			<feeling name="anger" weight="-2" />
			<feeling name="fear" weight="-2" />
		</utility>
		
		<fsm>
			<weak_follow input="fishperson" />
			<gossip_with input="fishperson" />
		</fsm>
	</job>-->
	
	<!-- END fishpeople stuff -->
		
		<job name="Create Assignment Container" display_name="Create Assignment Container"
				mandatory_eval="0" can_interrupt="1"
				icon_skin="ui\orderIcons.xml" icon="hunting"
				interruptee_type="2" interrupter_type="1">
			
			<require_no_assignment_container/>
			<require_random_location range="3" tag="assignment_center" input="crate_location"/>
			<utility>
				<base_job_utility weight="800"/>
			</utility>
			<fsm>
				<create_assignment_container input="crate_location"/>
			</fsm>
		</job>

		<job name="Plant Grass"
			display_name="Plant Grass"
				mandatory_eval="0"
				loop="0"
				interruptee_type="1"
				interrupter_type="0"
				icon_skin="ui\orderIcons.xml"
				icon="plant_grass"
				can_be_social="0" 
				filter="construction">

			<require_empty_hands />
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_work_party_filter name="construction"/>
			<require_character_on_shift/>
			
			<on_abort behaviour="yield"/>
			<utility>
				<base_job_utility weight="900"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="element_position"/>
				<place_plant input="element_position" name="grass" />
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Plant Shrubbery"
			display_name="Plant Shrubbery"
				mandatory_eval="0"
				loop="0"
				interruptee_type="1"
				interrupter_type="0"
				icon_skin="ui\orderIcons.xml"
				icon="plant_shrubbery"
				can_be_social="0" 
				filter="construction">

			<require_empty_hands />
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_work_party_filter name="construction"/>
			<require_character_on_shift/>
			
			<on_abort behaviour="yield"/>
			<utility>
				<base_job_utility weight="900"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="element_position"/>
				<place_plant input="element_position" name="shrubbery" />
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Plant Flowers"
			display_name="Plant Flowers"
				mandatory_eval="0"
				loop="0"
				interruptee_type="1"
				interrupter_type="0"
				icon_skin="ui\orderIcons.xml"
				icon="plant_flowers"
				can_be_social="0" 
				filter="construction">

			<require_empty_hands />
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_work_party_filter name="construction"/>
			<require_character_on_shift/>
			
			<on_abort behaviour="yield"/>
			<utility>
				<base_job_utility weight="900"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="element_position"/>
				<place_plant input="element_position" name="flowers" />
			</fsm>
			<history importance="10" />
		</job>

    <job name="Assemble Fence"
			display_name="Assemble Fence"
				mandatory_eval="0"
				loop="0"
				interruptee_type="1"
				interrupter_type="0"
				icon_skin="ui\orderIcons.xml"
				icon="gabion_high_image"
				can_be_social="0"
				filter="construction">

      <require_empty_hands />
      <require_not_sitting/>
      <require_not_attending_party/>
      <require_work_party_filter name="construction"/>
      <require_character_on_shift/>
	 <require_character_has_no_tag tag="military" />

      <require_gameobject input="logs"
					 tag="timber"
							range="150" closest="1"
							failure_reason="Requires timber."
							require_owned="1" />

      <failure_alert
				icon_file="ui\orderIcons.xml" icon="x_red_icon"
				heading="Not Enough Timber"
				description="There are no logs close enough to where you are trying to build a Gabion."
				snooze="300000" />
      <!-- LOGS.-->

      <on_abort behaviour="yield"/>
      <utility>
        <base_job_utility weight="900"/>
      </utility>
      <fsm>
        <walk_to_adjacent_position input="logs"/>
        <pickup_item input="logs"/>
        <walk_to_adjacent_position input="fence"/>
        <building_destroy_item input="logs"/>
        <assemble_fence input="fence"/>
        <increment_character_skill name ="constructionRepair"/>
      </fsm>
      <history importance="10" />
    </job>

    <job name="Assemble Gabion"
			display_name="Assemble Gabion"
				mandatory_eval="0"
				loop="0"
				interruptee_type="1"
				interrupter_type="0"
				icon_skin="ui\orderIcons.xml"
				icon="gabion_high_image"
				can_be_social="0" 
				filter="construction">

			<require_empty_hands />
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_work_party_filter name="construction"/>
			<require_character_on_shift/>
			
			<require_gameobject input="logs" tag="timber"
							range="100" closest="1"
							failure_reason="Requires timber."
							require_owned="1" />
			
			<failure_alert
				icon_file="ui\orderIcons.xml" icon="x_red_icon"
				heading="Not Enough Timber"
				description="There are no logs close enough to where you are trying to build a Gabion."
				snooze="300000" />
			<!-- LOGS.-->
			
			<on_abort behaviour="yield"/>
			<utility>
				<base_job_utility weight="900"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="logs"/>
				<pickup_item input="logs"/>
				<walk_to_adjacent_position input="element_position"/>
				<building_destroy_item input="logs"/>
				<place_gabion input="element_position" name="full"/>
				<increment_character_skill name ="constructionRepair"/>
			</fsm>
			<history importance="10" />
		</job>

		<job name="Assemble Gabion (Half)"
			display_name="Assemble Gabion (Half)"
				mandatory_eval="0"
				loop="0"
				interruptee_type="1"
				interrupter_type="0"
				icon_skin="ui\orderIcons.xml"
				icon="gabion_half_image"
				can_be_social="0" 
				filter="construction">
			
			<require_character_on_shift/>
			<require_empty_hands />
			<require_gameobject input="logs"
							range="100"
							tag="timber"
							failure_reason="Requires available timber."
							closest="1"
							require_owned="1" />
			
			<failure_alert
				icon_file="ui\orderIcons.xml" icon="x_red_icon"
				heading="Not Enough Timber"
				description="There are no logs close enough to where you are trying to build a Gabion."
				snooze="300000" />
			<!-- LOGS.-->

			<require_not_sitting/>
			<require_not_attending_party/>
			<require_work_party_filter name="construction"/>
			
			<on_abort behaviour="yield"/>
			<utility>
				<base_job_utility weight="900"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="logs"/>
				<pickup_item input="logs"/>
				<walk_to_adjacent_position input="element_position"/>
				<building_destroy_item input="logs"/>
				<spawn_hammer />
				<wield_tool />
				<place_gabion input="element_position" name="half"/>
				<increment_character_skill name ="constructionRepair"/>
			</fsm>
			<history importance="10" />
		</job>
		

		<job name="Place Landmine" display_name="Place Landmine"
				mandatory_eval="0" loop="0" can_be_social="0"
				interruptee_type="1" interrupter_type="0"
				icon_skin="ui\orderIcons.xml" icon="landmine"
				filter="construction">

			<require_empty_hands />
			<require_gameobject input="landmine"
							range="50"
							tag="landmine"
							failure_reason="Requires available landmine."
							closest="1"
							require_owned="1" />
			
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_work_party_filter name="construction"/>
			<require_character_on_shift/>
			
			<on_abort behaviour="yield"/>
			<utility>
				<base_job_utility weight="400"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="landmine"/>
				<pickup_item input="landmine"/>
				<walk_to_adjacent_position input="element_position"/>
				<building_destroy_item input="landmine"/>
				<place_landmine input="element_position" />
				<force_wander/>
			</fsm>
			<history importance="10" />
		</job>

		<job name="Attack (mob justice)" display_name="Mob Justice!"
			mandatory_eval="1"
			can_interrupt="1"
			test_for_interrupts="0"
			can_be_social="0"
			icon_skin="ui\orderIcons.xml" icon="guns_image"
			interruptee_type="3"
			interrupter_type="2">
 
			<require_not_sitting/>
			<require_character_has_no_tag tag="military" do_not_fill_dependency="1"/>
			<require_character_has_no_tag tag="frontier_justice" do_not_fill_dependency="1"/>
			<require_gameobject input="enemy"
							tag="frontier_justice"
							not_tag="corpse"
							range="20"
							must_lock="0"
							closest="1"
							failure_reason="Attacking requires a target of frontier justice."
							do_not_fill_dependency="1"/>
			
			<require_character_personal_stat_geq name="morale" amount="-40" do_not_fill_dependency="1"/>
			
			<utility min="0" max="799">
				<base_job_utility weight="17"/>
			</utility>
			<fsm>
				<set_tag name="executing_justice" />
				<attack_melee input="enemy" name="run"/>
				<remove_tag name="executing_justice" />
			</fsm>
		</job>

		<job name="Attack Ranged (mob justice)" display_name="Mob Justice!"
			can_interrupt="1" mandatory_eval="1"
			icon_skin="ui\orderIcons.xml" icon="guns_image"
			interruptee_type="2" interrupter_type="1">

			<require_not_sitting/>
			<require_character_has_no_tag tag="frontier_justice"/>
			<require_tool_uses tag="firearm" uses="1" />
			
			<!-- if I am justiced, don't let somebody else justice me! -->
			<require_gameobject input="enemy"
							tag="frontier_justice"
							not_tag="corpse"
							range="20"
							must_lock="0"
							closest="1"
							failure_reason="Attacking requires a target of frontier justice."/>
			
			<utility min="0" max="1599">
				<base_job_utility weight="13"/>
			</utility>
			<fsm>
				<set_tag name="executing_justice" />
				<attack_ranged input="enemy" name="run"/>
				<remove_tag name="executing_justice" />
			</fsm>
		</job>

		<job name="Flee (frontier justice)"
			display_name="Fleeing"
			mandatory_eval="0" can_interrupt="1"
			icon_skin="ui\thoughtIcons.xml" icon="afraid"
			interruptee_type="4"
			interrupter_type="3">

			<require_random_location range="10"
								input="location" min_elevation="0"
								require_flat="0"
								failure_reason="Requires available random location."/>
			
			<require_character_has_no_tag tag="doing_murder_rampage"/>
			<!-- murderers don't run. -->
			<require_not_sitting/>
			<require_no_item_instant />
			<!--<require_empty_hands/>-->
			<utility min="2300">
				<base_job_utility weight="2000"/>
				<!-- TODO military shouldn't auto-flee -->
			</utility>
			<fsm>
				<set_tag name="fleeing" />
				<walk_to input="location" name="fleeing"/>
				<remove_tag name="fleeing" />
			</fsm>
		</job>

		<job name="Flee From Murderer" display_name="Flee From Murderer"
			mandatory_eval="1"
			can_interrupt="1"
			icon_skin="ui\thoughtIcons.xml"
			icon="retreat"
			can_be_social="0"
			interruptee_type="4"
			interrupter_type="3">

			<require_not_sitting/>
			<require_no_item_instant />
			<require_character_has_no_tag tag="military,doing_murder_rampage,executing_justice"/>
			
			<require_gameobject input="enemy"
							tag="doing_murder_rampage"
							not_tag="corpse,fleeing"
							range="7"
							must_lock="0"
							failure_reason="Fleeing requires something horrible to flee from."
							closest="1"
							do_not_fill_dependency="1"/>
			
			<utility >
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<set_tag name="fleeing" />
				<unlock input="enemy"/>
				<walk_away_from_creature input="enemy" name="run"/>
				<remove_tag name="fleeing" />
				<flee_success_test />
			</fsm>
		</job>
		
		<job name="Flee (Human)"
			display_name="Flee"
			mandatory_eval="0"
			can_interrupt="1"
			icon_skin="ui\thoughtIcons.xml"
			icon="retreat"
			can_be_social="0"
			interruptee_type="4"
			interrupter_type="3">

			<require_not_sitting/>
			<require_no_item_instant />
			<require_random_location range="5" input="destination"/>
			<utility >
				<base_job_utility weight="-1"/>
			</utility>
			<fsm>
				<set_tag name="fleeing" />
				<walk_to input="destination" name="run"/>
				<remove_tag name="fleeing" />
			</fsm>
		</job>
		<job name="Flee Far Away (Human)"
			display_name="Flee Far Away"
				mandatory_eval="0"
				can_interrupt="1"
				can_be_social="0"
				icon_skin="ui\thoughtIcons.xml" icon="retreat"
				interruptee_type="4"
				interrupter_type="3">

			<require_not_sitting/>
			<require_no_item_instant />
			<require_random_location range="30" input="destination"/>
			<utility >
				<base_job_utility weight="-1"/>
			</utility>
			<fsm>
				<set_tag name="fleeing" />
				<walk_to input="destination" name="run"/>
				<remove_tag name="fleeing" />
			</fsm>
		</job>
		
		<job name="Raise Alarm" display_name="Raise Alarm"
			mandatory_eval="1" can_interrupt="1"
			icon_skin="ui\orderIcons.xml" icon="hunting"
			interruptee_type="4" interrupter_type="3">

			<require_gameobject input="enemy"
							tag="hostile_agent"
							not_tag="alarm_waypoint_active"
							range="15"
							must_lock="0"
							failure_reason="Requires hostile agent to call alarm on."
							do_not_fill_dependency="1"/>
			<utility>
				<base_job_utility weight="-1"/>
			</utility>
			<fsm>
				<create_alarm_waypoint input="enemy" />
				<set_tag_other input="enemy" name="alarm_waypoint_active" />				
			</fsm>
		</job>

    <job name="Gather Building Materials"
			display_name="Gather Building Materials"
			mandatory_eval="0"
			icon_skin="ui\orderIcons.xml"
			icon="stockpile"
			can_be_social="0"
			interruptee_type="2"
			interrupter_type="1"
			filter="construction">

      <require_work_party_filter name="construction"/>
      <require_no_item />
      <require_empty_hands/>
      <require_not_sitting/>
      <require_character_on_shift/>
      <!--
      <require_gameobject input="goods"
							tag_from_job="1"
							failure_reason="Requires suitable building material."
							must_unlock="0"
							closest="1"
							require_owned="1" />
              -->
      <require_multiple_gameobjects input="goods" amount="1" use_multiplier="1" tag_from_job="1" range="100" closest="1"
							 failure_reason="Requires suitable building material." require_owned="1" must_unlock="0"/>

      <on_abort behaviour="yield"/>

      <utility min="800" max="1599">
        <base_job_utility weight="2000"/>
      </utility>

      <fsm>
        <walk_to_adjacent_position_and_pickup_things input="goods"/>        
        <walk_to_adjacent_position input="building_position"/>
        <building_add_to_materials input="building"/>
      </fsm>
    </job>

    <job name="Gather Building Materials (Upgrade Building)"
			display_name="Gather Building Materials"
			mandatory_eval="0"
			icon_skin="ui\orderIcons.xml"
			icon="stockpile"
			can_be_social="0"
			interruptee_type="2"
			interrupter_type="1"
			filter="construction">
			
			<require_work_party_filter name="construction"/>
			<require_no_item />
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_gameobject input="goods"
							tag_from_job="1"
							failure_reason="Requires suitable building material."
							must_unlock="0"
							closest="1"
							require_owned="1" />

			<on_abort behaviour="yield"/>
			 
			<utility min="800" max="1599">
				<base_job_utility weight="2000"/>
			</utility>

			<fsm>
				<walk_to_adjacent_position input="goods"/>
				<pickup_item input="goods"/>
				<walk_adjacent_to_building input="building"/>
				<building_add_to_materials input="building"/>
			</fsm>
		</job>

    <job name="Gather Building Materials (standalone module)" 
  			display_name="Gather Building Materials" 
				mandatory_eval="0" 
				icon_skin="ui\orderIcons.xml" 
				icon="carpentry_icon" 
				can_be_social="0" 
				interruptee_type="2" 
				interrupter_type="1" 
				filter="construction">
			
			<require_work_party_filter name="construction"/>
			<require_not_tag input="module" tag="unreachable"/>      
			<require_gameobject input="goods" tag_from_job="1" failure_reason="Requires suitable building material." must_unlock="0" require_owned="1" closest="1"/>

			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_on_shift/>
			 
			<require_can_path_to input="module"/>
      
			<on_abort behaviour="yield"/>
			<utility min="800" max="1599">
				<base_job_utility weight="1200"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="goods"/>
				<pickup_item input="goods"/>
				<walk_to input="module"/>
				<building_add_to_module_materials input="module"/>
			</fsm>
		</job>

    <!-- building destruction -->

		<job name="Disassemble Module"
			display_name="Disassemble Module"
			mandatory_eval="0"
			icon_skin="ui\orderIcons.xml"
			icon="carpentry_icon"
			interruptee_type="2"
			interrupter_type="1"
			filter="construction">
			
			<on_abort behaviour="yield"/>
			<require_not_sitting/>
			<require_work_party_filter name="construction"/>
			<require_not_attending_party/>
			<require_character_on_shift/>
			 
			<utility min="800" max="1599">
				<base_job_utility weight="1500"/>
			</utility>
			<fsm>
				<walk_to_module input="module"/>
				<destruct_module input="module"/>
			</fsm>
			<history importance="10" />

		</job>

		<job name="Disassemble Building"
			display_name="Disassemble Building" 
				mandatory_eval="0" 
				icon_skin="ui\orderIcons.xml" 
				icon="carpentry_icon" 
				interruptee_type="2" 
				interrupter_type="1"
				filter="construction">
			
			<on_abort behaviour="yield"/>
			<require_work_party_filter name="construction"/>
			<require_not_sitting/>
			<require_character_on_shift/>
			
			<utility min="800" max="1599">
				<base_job_utility weight="1500"/>
			</utility>
			<fsm>
				<walk_adjacent_to_building input="building"/>
				<destruct_building input="building"/>
			</fsm>
			<history importance="10" />
		</job>

		<!-- Construct a building. -->

		<job name="Construct Building" display_name="Construct Building" 
				mandatory_eval="0" 
				icon_skin="ui\orderIcons.xml" 
				icon="carpentry_icon" 
				can_be_social="0" 
				interruptee_type="2" 
				interrupter_type="1" 
				filter="construction">
			
			<require_work_party_filter name="construction"/>
			<require_blueprint input="building" failure_reason="Building has no blueprint."/>
			<on_abort behaviour="yield"/>
			<require_building_costs failure_reason="Requires all building material to be dropped off."/>
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_empty_hands />
			<require_character_has_no_tag tag="enraged" do_not_fill_dependency="1" />
			
			<utility min="800" max="1599">
				<base_job_utility weight="2000"/>
			</utility>
			<fsm>
				<walk_to_building input="building"/>
				<construct_element input="building"/>
				<increment_character_skill name ="constructionRepair"/>
			</fsm>
			<history importance="10" />
		</job>

	<!--
	<job name="Upgrade Building" display_name="Upgrade Building"
				mandatory_eval="0"
				icon_skin="ui\orderIcons.xml"
				icon="carpentry_icon"
				can_be_social="0"
				interruptee_type="2"
				interrupter_type="1"
				filter="construction">

      <require_work_party_filter name="construction"/>
      <on_abort behaviour="yield"/>
      <require_building_costs failure_reason="Requires all building material to be dropped off."/>
      <require_not_sitting/>
      <require_character_on_shift/>
	
      <utility min="800" max="1599">
        <base_job_utility weight="2000"/>
      </utility>
      <fsm>
        <walk_to_building input="building"/>
      <construct_element input="building"/>
        <increment_character_skill name ="constructionRepair"/>
      </fsm>
      <history importance="10" />
	</job>
		-->

    <job name="Gather Building Materials (for module)"
			display_name="Gather Building Materials" 
				mandatory_eval="0" 
				icon_skin="ui\orderIcons.xml" 
				icon="carpentry_icon" 
				can_be_social="0" 
				interruptee_type="2" 
				interrupter_type="1" 
				filter="construction">
			
			<require_work_party_filter name="construction"/>
			<require_building_complete input="building"/>
			<require_not_tag input="module" tag="unreachable"/>      
			<require_no_item />
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_character_has_no_tag tag="enraged" do_not_fill_dependency="1" />
			
      <require_multiple_gameobjects input="goods" amount="1" use_multiplier="1" tag_from_job="1" range="100"
		failure_reason="Requires suitable building material."
		require_owned="1" must_unlock="0" closest="1"/>
	 
      <require_can_path_to input="module" failure_reason="Cannot path to the module."/>
      
			<on_abort behaviour="yield"/>
			<utility min="800" max="1599">
				<base_job_utility weight="1200"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position_and_pickup_things input="goods"/>
				<walk_to input="module"/>
				<building_add_to_module_materials input="module"/>
			</fsm>
		</job>

	<!--
	<job name="Gather Module Repair Materials"
			display_name="Gather Repair Materials"
			mandatory_eval="0"
			icon_skin="ui\orderIcons.xml" icon="stockpile"
			can_be_social="0"
			interruptee_type="3" interrupter_type="2">
			
			<require_not_tag input="module" tag="unreachable"/>
			<require_gameobject input="goods"
							tag_from_job="1"
							failure_reason="Requires suitable building material."
							must_unlock="0"
							require_owned="1"
							closest="1"/>
			<require_no_item />
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_on_shift/>
			 
			<require_can_path_to input="module"/>
			<on_abort behaviour="yield"/>
      
			<utility min="800" max="2500">
				<base_job_utility weight="2500"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="goods"/>
				<pickup_item input="goods"/>
				<walk_to input="module"/>
				<module_add_repair_material input="module"/>
			</fsm>
		</job>
		-->

		<job name="Construct Module (in building)" display_name="Construct Module"
				mandatory_eval="0" 
				icon_skin="ui\orderIcons.xml" 
				icon="carpentry_icon"
				can_be_social="0" 
				interruptee_type="2" 
				interrupter_type="1"
				filter="construction">
			
			<on_abort behaviour="yield"/>
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_party_filter name="construction"/>
			<require_character_has_no_tag tag="enraged" do_not_fill_dependency="1" />
			
			<require_building_complete input="building"/>
			<!-- referring to the building here, not the module. -->
			
			<require_building_costs failure_reason="Requires all building material to be dropped off."/>
			
			<require_not_tag input="module" tag="unreachable"/>
			<require_can_path_to input="module"/>
			 
			<utility min="800" max="1599">
				<base_job_utility weight="1500"/>
			</utility>
			<fsm>
				<walk_to_module input="module"/>
				<construct_module input="module"/>
			</fsm>
			<history importance="10" />
		</job>

    <job name="Construct Module (standalone)" display_name="Construct Module"
				mandatory_eval="0"
				icon_skin="ui\orderIcons.xml"
				icon="carpentry_icon"
				can_be_social="0"
				interruptee_type="2"
				interrupter_type="1"
				filter="construction">

		<on_abort behaviour="yield"/>
		<require_not_sitting/>
		<require_character_on_shift/>
		<require_work_party_filter name="construction"/>
		<require_building_costs failure_reason="Requires all building material to be dropped off."/>
		 
		 <!-- <require_building_costs failure_reason="Requires all building material to be dropped off."/> -->
		<require_character_has_no_tag tag="enraged" do_not_fill_dependency="1" />
		<require_not_tag input="module" tag="unreachable"/>
		<require_can_path_to input="module"/>
		 
		
		<utility min="800" max="1599">
			<base_job_utility weight="1500"/>
		</utility>
		<fsm>
			<walk_to_module input="module"/>
			<construct_module input="module"/>
		</fsm>
		<history importance="10" />
	</job>

    <job name="Assemble Construction"
			display_name="Assemble Construction"
				mandatory_eval="0" loop="0"
				icon_skin="ui\orderIcons.xml" 
				icon="hammer_icon"
				can_be_social="0"
				interruptee_type="1" 
				interrupter_type="0"
				filter="construction">
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_party_filter name="construction"/>
			<require_character_has_no_tag tag="enraged" do_not_fill_dependency="1" />
			
			<require_gameobject input="bricks"
							range="50"
							tag="bricks"
							failure_reason="Requires timber."
							closest="1"
							require_owned="1" />

			<failure_alert icon_file="ui\commodityIcons.xml" icon="bricks_pallet"
			heading="Not Enough Bricks" description="You lack the necessary materials to build this construction." snooze="300000" />

			<on_abort behaviour="yield"/>
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
				<!--<carrying_tool name="shovel" weight="100" />-->
			</utility>
			<fsm>
				<walk_to_adjacent_position input="bricks"/>
				<pickup_item input="bricks"/>
				<walk_to_adjacent_position input="element_position"/>
				<building_destroy_item input="bricks"/>
				<walk_to_adjacent_position input="element_position"/>
				<place_construction input="element_position" name="full"/>
			</fsm>
			<history importance="10" />
		</job>

    <job name="Assemble Airship Mast"
			display_name="Assemble Airship Mast"
				mandatory_eval="0" loop="0"
				icon_skin="ui\orderIcons.xml" 
				icon="hammer_icon"
				can_be_social="0"
				interruptee_type="3" 
				interrupter_type="1"
				filter="construction">
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_work_party_filter name="construction"/>
			<require_character_has_no_tag tag="enraged" do_not_fill_dependency="1" />
							
			<require_multiple_gameobjects input="timber" amount="1" use_multiplier="1" range="100" tag="timber" failure_reason="Requires available stone." closest="1" require_owned="1"/>
			<require_multiple_gameobjects input="planks" amount="2" use_multiplier="1" range="100" tag="planks" failure_reason="Requires available stone." closest="1" require_owned="1"/>
			<require_multiple_gameobjects input="bricks" amount="4" use_multiplier="1" range="100" tag="masonry" failure_reason="Requires available stone." closest="1" require_owned="1"/>

			<on_abort behaviour="yield"/>
			<utility min="800" max="1599">
				<base_job_utility weight="1000"/>
				<!--<carrying_tool name="shovel" weight="100" />-->
			</utility>
			<fsm>
				<walk_to_adjacent_position_and_pickup_things input="timber"/>
				<walk_to_adjacent_position input="element_position"/>
				<building_destroy_item input="timber"/>
				<walk_to_adjacent_position_and_pickup_things input="planks"/>
				<walk_to_adjacent_position input="element_position"/>
				<building_destroy_item input="planks"/>
				<walk_to_adjacent_position_and_pickup_things input="bricks"/>
				<walk_to_adjacent_position input="element_position"/>
				<building_destroy_item input="bricks"/>
				<walk_to_adjacent_position input="element_position"/>
				<place_construction input="element_position" name="full"/>
			</fsm>
			<history importance="10" />
		</job>

		<job name="Inspect Painting" display_name="Admire Painting (Off-shift)" 
				mandatory_eval="1" 
				icon_skin="ui\orderIcons.xml" 
				icon="cycle_image" 
				interruptee_type="2" 
				interrupter_type="0" 
				is_social="1">
			
			<require_character_not_on_shift/>
			<require_building_module input="painting" tag="painting" range="10" failure_reason="Requires a painting." in_gsd="1"/>
			<require_not_sitting/>
			<require_not_attending_party/>
			<utility max="30">
				<base_job_utility weight="5"/>
			</utility>
			<fsm>
				<walk_to_module input="painting"/>
				<inspect_painting/>
			</fsm>
		</job>

		<!-- RETURN GOODS TO STOCKPILE. If a good is out, and we want to put it in a stockpile, it's this job. -->

    <smart_object_behaviour name="Return Goods To Stockpile" must_lock="0" must_lock_ggp="1">
      <walk_to_adjacent_position input="goods"/>
      <pickup_item input="goods"/>
      <walk_to_adjacent_target_position input="stockpile"/>
      <drop_item input="stockpile"/>
      <force_wander_immediate/>
    </smart_object_behaviour>
    
    <smart_object_behaviour name="Return Goods To Container">
      <walk_to_adjacent_position input="goods"/>
      <pickup_item input="goods"/>
      <walk_to_adjacent_position input="stockpile"/>
      <place_item_in_container input="stockpile"/>
      <force_wander_immediate/>
    </smart_object_behaviour>

    <smart_object_behaviour name="Create Container">
      <walk_to_adjacent_position input="goods"/>
      <pickup_item input="goods"/>
      <walk_to_adjacent_position input="stockpile"/>
      <create_container input="stockpile"/>
      <force_wander_immediate/>
    </smart_object_behaviour>

    <smart_object_behaviour name="Merge Containers">
      <walk_to_adjacent_position input="goods"/>
      <pickup_item input="goods"/>
      <walk_to_adjacent_position input="stockpile"/>
      <merge_containers input="stockpile"/>
      <force_wander_immediate/>
    </smart_object_behaviour>

    <job name="Create Container From Two Goods" display_name="Return Goods"
			mandatory_eval="0" can_be_social="0" loop="0"
			icon_skin="ui\orderIcons.xml" icon="stockpile"
			goods_job="1"
			put_in_jobs="0" interruptee_type="2" interrupter_type="1"
			filter="hauling">
      
		<require_can_path_to input="goods"/>
		<!--<require_job_owner_is_owned /> -->
      <!--
        <require_container_object capability="Return Goods (To Stockpile)" input="stockpile" not_input="goods" tag="can_receive_goods" for_item="goods" require_owned="1" must_lock="0"/>
      -->
		<require_empty_hands failure_reason="Character cannot perform job while holding something" />
		<require_not_sitting/>
		<require_character_on_shift/>
		<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="rage_state" />
		<on_abort behaviour="yield"/>

      <utility >
        <base_job_utility weight="275"/>
        <distance_from input="goods" weight="-2" min="-50"/>
      </utility>
      <fsm>
        <walk_to_adjacent_position input="goods"/>
        <pickup_item input="goods"/>
        <walk_to_adjacent_position input="goods2"/>
        <create_container input="goods2"/>
        <force_wander_immediate/>
      </fsm>
    </job>

    <job name="Merge Containers" display_name="Return Goods"
			mandatory_eval="0" can_be_social="0" loop="0"
			icon_skin="ui\orderIcons.xml" icon="stockpile"
			goods_job="1"
			put_in_jobs="0" interruptee_type="2" interrupter_type="1"
			filter="hauling">
      
		<require_character_on_shift/>
		<!--<require_job_owner_is_owned /> -->
      <!--
        <require_container_object capability="Return Goods (To Stockpile)" input="stockpile" not_input="goods" tag="can_receive_goods" for_item="goods" require_owned="1" must_lock="0"/>
      -->
		<require_empty_hands failure_reason="Character cannot perform job while holding something" />
		<require_not_sitting/>
		<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="rage_state" />
		<on_abort behaviour="yield"/>

		<utility >
			<base_job_utility weight="275"/>
			<distance_from input="goods" weight="-2" min="-50"/>
		</utility>
		<fsm>
			<walk_to_adjacent_position input="goods"/>
			<pickup_item input="goods"/>
			<walk_to_adjacent_position input="goods2"/>
			<merge_containers input="goods2"/>
			<force_wander_immediate/>
		</fsm>
	</job>
 
	<job name="Return Goods (To Container)" display_name="Return Goods (To Container)"
			mandatory_eval="0" can_be_social="0" loop="0"
			icon_skin="ui\orderIcons.xml" icon="stockpile"
			 goods_job="1"
			put_in_jobs="0" interruptee_type="2" interrupter_type="1"
			filter="hauling">

		<require_can_path_to input="goods"/>
		<require_can_path_to input="goods2"/>
		<!--<require_job_owner_is_owned /> -->
		<require_empty_hands failure_reason="Character cannot perform job while holding something" />
		<require_not_sitting/>
		<require_character_on_shift/>
		<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="rage_state" />
		<require_work_party_filter name="hauling"/>
     
		<on_abort behaviour="yield"/>

	<utility >
		<base_job_utility weight="275"/>
		<distance_from input="goods" weight="-2" min="-50"/>
	</utility>

      <fsm>
        <walk_to_adjacent_position input="goods"/>
        <pickup_item input="goods"/>
        <walk_to_adjacent_position input="goods2"/>
        <place_item_in_container input="goods2"/>       
      </fsm>
    </job>

    <job name="Return Goods (To Stockpile)" display_name="Return Goods (To Stockpile)"
			mandatory_eval="0" can_be_social="0" loop="0"
			icon_skin="ui\orderIcons.xml" icon="stockpile"
			goods_job="1"
			put_in_jobs="0" interruptee_type="2" interrupter_type="1"
			filter="hauling">

		<require_can_path_to input="goods"/>
		<require_empty_hands failure_reason="Character cannot perform job while holding something" />
		<require_not_sitting/>
		<!--<require_job_owner_is_owned />-->

		<require_work_party_filter name="hauling"/>
		<require_character_on_shift/>
		<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="rage_state" />
		<on_abort behaviour="yield"/>

      <utility >
        <base_job_utility weight="275"/>
        <distance_from input="goods" weight="-2" min="-50"/>
      </utility>
      <fsm>
        <walk_to_adjacent_position input="goods"/>
        <pickup_item input="goods"/>
        <walk_to_adjacent_target_position input="stockpile"/>
        <drop_item input="stockpile"/>
        <force_wander_immediate/>
      </fsm>
    </job>

    <job name="Return Goods"
		display_name="Return Goods (To Smart)"
		mandatory_eval="0" can_be_social="0" loop="0"
		icon_skin="ui\orderIcons.xml" icon="stockpile"
		goods_job="1"
		put_in_jobs="0" interruptee_type="2" interrupter_type="1"
		filter="hauling">
            
			<require_work_party_filter name="hauling"/>
			<!--<require_job_owner_is_owned /> -->
			<require_container_object capability="Return Goods"
								 input="stockpile"
								 not_input="goods"
								 tag="can_receive_goods"
								 for_item="goods"
								 require_owned="1"
								 must_lock="0"/>
			
			<require_empty_hands failure_reason="Character cannot perform job while holding something" />
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_character_has_no_tag tag="military" />
			<require_character_has_no_tag tag="rage_state" />
			<on_abort behaviour="yield"/>

			<utility >
				<base_job_utility weight="275"/>
				<distance_from input="goods" weight="-2" min="-50"/>
			</utility>
	</job>

	<job name="Evict Bad Goods" display_Name="Organize Stockpile"
         mandatory_eval="0"
	    can_be_social="0"
	    loop="0"
         icon_skin="ui\orderIcons.xml" icon="stockpile"
         put_in_jobs="0"
         goods_job="1"
         interuptee_type="2"
         interrupter_type="1"
         filter="hauling">

		<require_work_party_filter name="hauling"/>
		<require_item_drop_location input="location" for_item="goods"/>
		<require_not_sitting/>
		<require_character_on_shift/>
		<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="rage_state" />
		<utility>
			<!-- Carrying stuff is tiring and boring I guess. -->
			<base_job_utility weight="200" />
			<distance_from input="location" weight="-1" />
		</utility>
		<fsm>
			<walk_to_adjacent_position input="goods"/>
			<pickup_item input="goods"/>
			<walk_to_adjacent_position input="location" />
			<drop_item input="location"/>
		</fsm>
	</job>
       
	<job name="Return Container" display_name="Return Container (To Smart)"
			mandatory_eval="0" can_be_social="0" loop="0"
			icon_skin="ui\orderIcons.xml" icon="stockpile"
			put_in_jobs="0"
			goods_job="1"
			interruptee_type="2" interrupter_type="1"
			filter="hauling">

		<require_work_party_filter name="hauling"/>
		<!--<require_job_owner_is_owned /> -->
		
		<require_container_object capability="Return Container" input="stockpile" not_input="goods" tag="can_receive_goods" for_item="goods" require_owned="1" must_lock="0"/>
		<require_empty_hands failure_reason="Character cannot perform job while holding something" />
		<require_not_sitting/>
		<require_character_on_shift/>
		<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="rage_state" />
		<on_abort behaviour="yield"/>

		<utility>
			<base_job_utility weight="275"/>
			<distance_from input="goods" weight="-2" min="-50"/>
		</utility>

		<fsm>
			<walk_to_adjacent_position input="goods"/>
			<pickup_item input="goods"/>
			<walk_to_adjacent_target_position input="stockpile"/>
			<drop_item input="stockpile"/>
			<force_wander_immediate/>
		</fsm>

		</job>
	
	<!--
	<job name="Search For Stolen Goods"
		display_name="Attempt To Destroy Stolen Goods"
		mandatory_eval="1"
		can_be_social="0"
		interruptee_type="2"
		interrupter_type="1"
		filter="hauling">
	
		<require_work_party_filter name="hauling"/>
		<require_session_bool name="destroyStolenGoods" value="1" />
		<require_empty_hands failure_reason="Character cannot perform job while holding something" />
		<require_character_on_shift/>
		<require_character_has_no_tag tag="rage_state" />
		<require_gameobject range="24"
						input="commodity"
						tag="commodity"
						must_lock="1"
						do_not_fill_dependency="1"/>
		
		<require_empty_hands />
		<utility min="0" max="1000">
			<base_job_utility weight="1000"/>
		</utility>
		<fsm>
			<walk_to_adjacent_position input="commodity" name="run"/>	
			<destroy_stolen_goods input="commodity" />
		</fsm>
		<history importance="10" />
	</job> -->

	<job name="Wander (Human w/Claimed Building)" display_name="Tidy Shop"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml" icon="cycle_image"
			interruptee_type="1" interrupter_type="0"
			is_social="1">
			
		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_on_shift/>
		<require_character_has_no_tag tag="military" />
		
		<require_work_building input="building"
						   must_lock="0"
						   failure_reason="Character requires a designated work building to tidy."/>
		
		<require_work_building_position input="destination"
								  failure_reason="Requires avaiable space within work building."/>

		<utility max="99">
			<base_job_utility weight="25"/>
		</utility>
		<fsm>
			<walk_to_adjacent_target_position input="destination"/>
			<sweep/>
		</fsm>
	</job>
	
	<job name="Clear Rubbish" display_name="Tidy Shop"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml" icon="cycle_image"
			interruptee_type="1" interrupter_type="0"
			is_social="1">
			
		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_on_shift/>
		<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="enraged" do_not_fill_dependency="1" />
		<!--<require_work_building input="building"
						   failure_reason="Character requires a designated work building to tidy."/>
		-->
		<require_gameobject input="rubbish"
						tag="rubbish"
						closest="1"
						range="10"
						do_not_fill_dependency="1"
						must_lock="1" />

		<utility max="99">
			<base_job_utility weight="20"/>
		</utility>
		<fsm>
			<walk_to_adjacent_target_position input="rubbish"/>
			<sweep input="rubbish"/>
		</fsm>
	</job>

	<job name="Destroy Item (order)"
		display_name="Destroy Item"
		mandatory_eval="0"
		icon_skin="ui\thoughtIcons.xml"
		icon="smash"
		interruptee_type="3"
		interrupter_type="2">
		
		<require_not_sitting/>
		<require_character_has_no_tag tag="frontier_justice" />
		<require_empty_hands />
		
		<on_abort behaviour="yield"/>
		
		<utility max="1599">
			<base_job_utility weight="1500"/>
			<session_bool value="1" name="isNight" weight="-500" />
		</utility>
		
		<fsm>
			<walk_to input="item" name="run"/>
			<destroy_item input="item" />
		</fsm>
		<history importance="10" />
	</job>
		
	<job name="Destroy Item (science order)"
			display_name="Forcibly Study Object"
			mandatory_eval="0"
			icon_skin="ui\thoughtIcons.xml"
			icon="smash"
			interruptee_type="3"
			interrupter_type="2">
		
		<require_not_sitting/>
		<require_character_has_no_tag tag="frontier_justice" />
		<require_empty_hands />
		
		<on_abort behavior="yield"/>
		<utility max="1599">
			<base_job_utility weight="1599"/>
		</utility>
		
		<fsm>
			<walk_to input="item" name="run"/>
			<set_string_on_director name="mundane,scientistDestroyedItem,Yes"/>
			<set_stage_on_director  name="mundane,ending"/>
			<destroy_item input="item" />
		</fsm>
		
	</job>

	<job name="Burial" display_name="Burial Duties"
			mandatory_eval="0"
			icon_skin="ui\orderIcons.xml" icon="graveyard"
			interruptee_type="2" interrupter_type="1">
			
			<require_zone_position input="graveyard" name="graveyard"
				failure_reason="Burial requires available graveyard.">
				
			<failure_alert icon_file="ui\orderIcons.xml" icon="graveyard"
				heading="We Need Graveyard Space"
				description="A burial cannot be carried out due to lack of graveyard space."
				snooze="60000" />
			
		</require_zone_position>
		
		<require_empty_hands />
		<require_not_sitting/>
		<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="upper_class" />
		
		<on_abort behaviour="yield"/>
		
		<utility max="1599">
			<base_job_utility weight="900"/>
			<session_bool value="1" name="isNight" weight="-500" />
		</utility>
		<fsm>
			<remove_zone_square input="graveyard"/>
			<walk_to input="body"/>
			<pickup_person input="body"/>
			<walk_to_adjacent_target_position input="graveyard"/>
			<drop_person input="body" name="burial"/>
			<place_grave input="graveyard"/>
			<hide_other input="body"/>
			<set_tag_other input="body" name="buried" />
		</fsm>
		<history importance="10" />
	</job>

	<job name="Dump Corpse"
		display_name="Dump Corpse"
			mandatory_eval="0"
			icon_skin="ui\orderIcons.xml" icon="graveyard"
			test_for_interrupts="1"
			interruptee_type="2" interrupter_type="1">
		
		<require_random_location range="40" input="dumplocation"/>
		<require_gameobject input="corpse"
				tag="corpse" 
				not_tag="give_proper_burial,animal,butcher_me,dumped_corpse"
				range="15"
				must_lock="1"
				failure_reason="Requires a non-colonist corpse."
				closest="1"
				require_owned="1"/>
		
		<require_not_sitting/>
		<require_empty_hands />
		<require_character_has_no_tag tag="military" /> 
		<require_character_has_no_tag tag="militia" />
		<require_character_has_no_tag tag="upper_class" />
		<!--<on_abort behaviour="yield"/>-->
		
		<utility max="1599">
			<base_job_utility weight="500"/>
			<!--<any_civilization input="corpse" weight="1000" />
			<session_bool value="1" name="isNight" weight="-500" />
			<any_civilization input="dumplocation" weight="-1500" />-->
		</utility>
		
		<fsm>
			<walk_to input="corpse"/>
			<pickup_person input="corpse"/>
			<walk_to_adjacent_position input="dumplocation"/>
			<drop_person input="corpse"/>
		</fsm>
		<history importance="10" />
	</job>

	<job name="Dump Corpse (player order)"
		display_name="Dump Corpse"
			mandatory_eval="0" 
			test_for_interrupts="1"
			icon_skin="ui\orderIcons.xml" 
			icon="arm_icon"
			interruptee_type="2" 
			interrupter_type="1">
		
		<require_random_location range="40" input="dumplocation"/>
		<require_not_sitting/>
		<require_empty_hands />
		<require_character_has_no_tag tag="military"/>
		<require_character_has_no_tag tag="militia" />
		<require_character_has_no_tag tag="upper_class"/>
		<!--<on_abort behaviour="yield"/>-->
		 
		<utility max="1599">
			<base_job_utility weight="30"/>
			<!--<any_civilization input="dumplocation" weight="-1500" />
			 dump outside of civilization-->
		</utility>
		<fsm>
			<walk_to input="body"/>
			<pickup_person input="body"/>
			<walk_to_adjacent_position input="dumplocation"/>
			<drop_person input="body"/>
			<set_tag_other input="body" name="dumped_corpse" />
		</fsm>
		<history importance="10" />
	</job>
		
	<job name="Bury Corpse (player order)" display_name="Burial Duties"
			mandatory_eval="0"
			icon_skin="ui\orderIcons.xml" 
			icon="graveyard"
			interruptee_type="2" 
			interrupter_type="1">
		
		<require_zone_position input="graveyard" name="graveyard"
				failure_reason="Burial requires available graveyard.">
			<failure_alert icon_file="ui\orderIcons.xml" icon="graveyard"
				heading="We Need Graveyard Space"
				description="A burial cannot be carried out due to lack of graveyard space."
				snooze="60000" />
			
		</require_zone_position>
		
		<require_empty_hands />
		<require_not_sitting/>
		<require_character_has_no_tag tag="military" />
		<require_character_has_no_tag tag="upper_class" />

		<utility max="1599">
			<base_job_utility weight="900"/>
			<session_bool value="1" name="isNight" weight="-500" />
		</utility>
		<fsm>
			<remove_zone_square input="graveyard"/>
			<walk_to input="body"/>
			<pickup_person input="body"/>
			<walk_to_adjacent_target_position input="graveyard"/>
			<drop_person input="body" name="burial"/>
			<place_grave input="graveyard"/>
			<hide_other input="body"/>
			<set_tag_other input="body" name="buried" />
		</fsm>
		<history importance="10" />
	</job>

	<job name="Finish Building Upkeep" display_name="Finish Building Upkeep"
		mandatory_eval="0"
		can_be_social="0"
		icon_skin="ui\orderIcons.xml" icon="wrench"
		interruptee_type="3" interrupter_type="2"
		filter="construction">
		
		<!-- Removing this until jobs pushed to workshop crews.
		<require_work_party_filter name="construction"/> -->
		
		<require_character_has_no_tag tag="military" />
			
		<require_not_sitting/>
		<require_character_on_shift/>
		<on_abort behaviour="yield"/>
		 
		<utility>
			<base_job_utility weight="2500"/>
		</utility>
		<fsm>
			<walk_adjacent_to_building input="module"/>
			<building_finish_upkeep input="module" />
		</fsm>
		<history importance="10" />
	</job>

	<!-- Deprecated w/ upkeep system
	<job name="Repair Module" display_name="Perform Module Repairs"
		mandatory_eval="0"
		can_be_social="0"
		icon_skin="ui\orderIcons.xml" icon="wrench"
		interruptee_type="3" interrupter_type="2"
		filter="construction">
		
		<require_work_party_filter name="construction"/>
		<require_not_sitting/>
		<require_module_repair_costs input="module"/>
		<require_character_on_shift/>
		<on_abort behaviour="yield"/>
		 
		<utility max="2500">
			<base_job_utility weight="2500"/>
		</utility>
		<fsm>
			<walk_to_adjacent_position input="module"/>
			<repair_module input="module" />
			<increment_character_skill name ="constructionRepair"/>
		</fsm>
		<history importance="10" />
	</job>-->

	<job name="Repair Building" display_name="Perform Structural Repairs"
		mandatory_eval="0"
		icon_skin="ui\orderIcons.xml" icon="wrench"
		can_be_social="0"
		interruptee_type="3"
		interrupter_type="2"
		filter="construction">
		
		<require_not_sitting/>
		<require_empty_hands />
		<require_character_has_no_tag tag="military" />
		<require_work_party_filter name="construction"/>
		<!--<require_module_repair_costs input="module"/>-->
		<require_character_on_shift/>
		<on_abort behaviour="yield"/>
		 
		<utility max="2500">
			<base_job_utility weight="2500"/>
		</utility>
		<fsm>
			<walk_adjacent_to_building input="building"/>
			<repair_building input="building" />
			<increment_character_skill name ="constructionRepair"/>
		</fsm>
		<history importance="10" />
	</job>

	<job name="Drop Carried Item" display_name="Drop Item"
		mandatory_eval="1"
		interruptee_type="2" interrupter_type="1"
		icon_skin="ui\orderIcons.xml" icon="arm_icon">

		<require_carried_item input="item" />
		<require_item_drop_location input="location" for_item="item"/>
		<require_not_sitting/>

		<utility>
			<!-- Carrying stuff is tiring and boring I guess. -->
			<base_job_utility weight="200" />
			<distance_from input="location" weight="-1" />
		</utility>
		<fsm>
      <fill_input_for_held_item name="location"/>
			<walk_to_adjacent_position input="location" />
			<drop_item input="location"/>
			<unlock input="item" />
		</fsm>
		<fills_reqs>
			<require_empty_hands />
			<require_no_item />
		</fills_reqs>
	</job>

	<job name="Insta-Drop Carried Item"
		display_name="Drop Item (enemy nearby)"
		icon_skin="ui\orderIcons.xml" icon="arm_icon"
		mandatory_eval="1"
		can_interrupt="1"
		test_for_interrupts="0"
		interruptee_type="3"
		interrupter_type="2" >

		<require_carried_item input="item" do_not_fill_dependency="1"/>
		<require_gameobject input="enemy" tag="hostile_agent"
						range="14" must_lock="0"
						failure_reason="Insta-drop requires a hostile agent." do_not_fill_dependency="1"/>
		
		<require_not_sitting/>
		
		<utility>
			<base_job_utility weight="750" />
			<distance_from input="hostile_agent" weight="-1" />
		</utility>
		<fsm>
			<insta_drop_item />
			<unlock input="item" />
		</fsm>
		<fills_reqs>
			<require_no_item_instant />
		</fills_reqs>
	</job>
<!--
	<job name="Melee Counterattack (civilian)" display_name="Melee Counterattack Entity"
			icon_skin="ui\orderIcons.xml" icon="guns_image"
			mandatory_eval="1" can_interrupt="1"
			interruptee_type="3" interrupter_type="2" >

		<require_not_sitting/>
		<require_no_item_instant />
		<require_not_attending_party/>
		<require_gameobject input="enemy" tag="hostile_agent"
						range="1"
						closest="1"
						must_lock="0"
						failure_reason="Attacking requires a target hostile."
						do_not_fill_dependency="1"/>
		
		<require_character_has_no_tag tag="military"/>
		<require_character_has_no_tag tag="militia"/>
		<utility min="2300">
			<base_job_utility weight="1700"/>
			<character_personal_stat name="numAfflictions" weight="-500"/>
			<character_personal_stat name="despair" weight="2"/>
			<character_personal_stat name="anger" weight="2"/>
			<character_personal_stat name="health" weight="100"/>
			<character_personal_stat name="morale" weight="20"/>
			<has_tag input="enemy" tag="fleeing" weight="-500"/>
		</utility>
		<fsm>
			<attack_melee input="enemy" name="run"/>
		</fsm>
	</job>

		<job name="Melee Counterattack (civilian with weapon)" display_name="Melee Counterattack Entity"
				mandatory_eval="1" 
				can_interrupt="1"
				interruptee_type="3" 
				interrupter_type="2"
				icon_skin="ui\orderIcons.xml" 
				icon="guns_image" >

			<require_not_sitting/>
			<require_no_item_instant />
			<require_not_attending_party/>
			<require_wield_tool tag="makeshift_melee_weapon" />
			<require_gameobject input="enemy"
							tag="hostile_agent"
							not_tag="dead,fleeing"
							range="1"
							closest="1"
							must_lock="0"
							failure_reason="Attacking requires a target hostile."
							do_not_fill_dependency="1"/>
			
			<require_character_has_no_tag tag="military"/>
			<require_character_has_no_tag tag="militia"/>
			<utility min="2300">
				<base_job_utility weight="1900"/>
				<character_personal_stat name="numAfflictions" weight="-500"/>
				<character_personal_stat name="despair" weight="2"/>
				<character_personal_stat name="anger" weight="1"/>
				<character_personal_stat name="health" weight="100"/>
				<character_personal_stat name="morale" weight="20"/>
				<has_tag input="enemy" tag="fleeing" weight="-500"/>
			</utility>
			<fsm>
				<attack_melee input="enemy" name="run"/>
			</fsm>
		</job>

		<job name="Ranged Attack (civilian)" display_name="Ranged Attack Entity"
				mandatory_eval="1" 
				can_interrupt="1"
				interruptee_type="3" 
				interrupter_type="2"
				icon_skin="ui\orderIcons.xml" 
				icon="guns_image" >

			<require_not_sitting/>
			<require_not_attending_party/>
			<require_no_item_instant />
			<require_gameobject input="enemy"
							tag="hostile_agent"
							not_tag="dead"
							range="18"
							closest="1"
							must_lock="0"
							failure_reason="Attacking requires a target hostile."
							do_not_fill_dependency="1"/>
			
			<require_wield_tool tag="firearm" failure_reason="Requires available weapon."/>
			<require_tool_uses tag="firearm" uses="1" />
			<require_character_has_no_tag tag="military"/>
			<require_character_has_no_tag tag="militia"/>
			<utility min="2300">
				<base_job_utility weight="2000"/>
				<character_personal_stat name="numAfflictions" weight="-250"/>
				<character_personal_stat name="health" weight="25"/>
				<character_personal_stat name="morale" weight="10"/>
				<has_tag input="enemy" tag="fleeing" weight="-250"/>
			</utility>
			<fsm>
				<attack_ranged input="enemy" name="run"/>
			</fsm>
		</job>
-->

	<!-- used for scripted fleeing -->
		<job name="Flee From Hostile Enemy" display_name="Fleeing From Enemy"
				icon_skin="ui\thoughtIcons.xml" 
				icon="afraid"
				mandatory_eval="0" 
				can_interrupt="1"
				interruptee_type="4" 
				interrupter_type="3">

			<!--<require_gameobject input="enemy" tag="hostile_agent" not_tag="fleeing" range="10" must_lock="0" failure_reason="Fleeing requires something horrible to flee from." closest="1"  do_not_fill_dependency="1"/>
			-->
			<require_not_sitting/>
			<!--<require_character_has_no_tag tag="military"/>
			<require_character_has_no_tag tag="militia"/>-->
			<utility min="2300">
				<base_job_utility weight="1500"/>
			</utility>
			<fsm>
				<set_tag name="fleeing" />
				<walk_away_from_creature input="enemy" name="fleeing"/>
				<remove_tag name="fleeing" />
				<flee_success_test />
			</fsm>
		</job>
		
<!--
		<job name="Flee Toward Civilization" display_name="Fleeing Toward Civilization"
				mandatory_eval="1" 
				can_interrupt="1"
				icon_skin="ui\thoughtIcons.xml" 
				icon="afraid" 
				can_be_social="0"
				interruptee_type="4" 
				interrupter_type="3">

			<require_gameobject input="enemy"
							tag="hostile_agent"
							not_tag="fleeing,dead"
							range="15"
							must_lock="0"
							failure_reason="Fleeing requires something horrible to flee from."
							do_not_fill_dependency="1"/>
			
			<require_closest_civilization_location input="destination"/>
			<require_character_has_no_tag tag="military"/>
			<require_character_has_no_tag tag="militia"/>
			<require_not_attending_party/>
			<require_not_sitting/>
			<require_no_item />
			
			<utility min="2300">
				<base_job_utility weight="-500"/>
				<character_personal_stat name="health" weight="-10"/>
				<character_personal_stat name="morale" weight="-10"/>
				<distance_from input="flee_target" weight="1" />
				<session_bool value="1" name="isNight" weight="100" />
			</utility>
			<fsm>
				<set_tag name="fleeing" />
				<walk_to input="destination" name="fleeing"/>
				<remove_tag name="fleeing" />
				<flee_success_test />
			</fsm>
		</job>-->

		<!--
	fight to the death!-->

		<job name="Experience Fear"
			display_name="Cower In Fear"
			mandatory_eval="1"
			icon_skin="ui\thoughtIcons.xml"
			icon="afraid"
			interruptee_type="3"
			interrupter_type="2"
			is_social="1">
			
			<require_gameobject input="enemy"
							tag="fishy_state"
							range="6"
							must_lock="0"
							failure_reason="Being afraid requires something horrible to be afraid of."/>
			
			<require_not_sitting/>
			<require_empty_hands />
			<require_character_has_no_tag tag="military"/>
			<require_character_has_no_tag tag="fishy_state"/>
			
			<utility max="30">
				<base_job_utility weight="6"/>
				<session_bool value="1" name="isNight" weight="5" />
			</utility>
			<fsm>
				<walk_to_near_target input="enemy" />
				<!-- Fishperson transformation stage 1: looks fishy. -->
				<cower_in_fear input="enemy" name="fishy_look" />
			</fsm>
		</job>
		
		<job name="Experience Fear (spectre)"
			display_name="Cower In Fear"
			mandatory_eval="1"
			icon_skin="ui\thoughtIcons.xml"
			icon="afraid"
			interruptee_type="3"
			interrupter_type="2"
			is_social="1">
			
			<require_gameobject input="enemy"
							tag="spectre"
							range="6"
							must_lock="0"
							failure_reason="Being afraid requires something horrible to be afraid of."/>
			
			<require_not_sitting/>
			<require_empty_hands />
			<require_no_item_instant />
			
			<utility max="30">
				<base_job_utility weight="6"/>
				<session_bool value="1" name="isNight" weight="5" />
			</utility>
			<fsm>
				<cower_in_fear input="enemy" name="spectre" />
			</fsm>
		</job>
	

	<!-- Turned off 'til we have fire.
	<job name="Run While On Fire" display_name="Run While On Fire" mandatory_eval="1"  icon_skin="ui\thoughtIcons.xml" icon="i_am_on_fire" interruptee_type="4" interrupter_type="3">    
		<require_character_has_tag tag="burning" />
		<require_random_location range="4" input="destination" min_elevation="0" require_flat="0" failure_reason="Requires available random location."/>
		<require_not_sitting/>
		<require_no_item_instant />
		<require_not_attending_party/>
		<utility min="2300">
			<base_job_utility weight="2500"/>
		</utility>
		<fsm>
			<walk_to input="destination" name="fleeing"/>
		</fsm>
	</job>-->

		<!-- Idle behaviours -->
	<job name="Idle (Military)" display_name="Idle"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml" 
			icon="idle_icon"
			can_be_social="1"
			interruptee_type="1" 
			interrupter_type="0"
			is_social="1">
			
		<require_character_has_tag tag="military" />
		
		<utility min="0" max="30">
			<base_job_utility weight="20"/>
		</utility>
		
		<fsm>
			<waste_time />
			<!--<set_string_on_director name="eldritch,scientistDestroyedItem,Yes"/>-->
		</fsm>
	</job>
		
	<job name="Idle (Human, On-shift)" display_name="Idle (On-shift)"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml"	
			icon="idle_icon"
			can_be_social="1"
			interruptee_type="1" 
			interrupter_type="0"
			is_social="1">
			
		<require_character_has_no_tag tag="military"/>
		<require_character_on_shift/>
		<utility min="0" max="30">
			<base_job_utility weight="20"/>
		</utility>
		
		<fsm>
			<waste_time />
		</fsm>
	</job>
	
	<job name="Idle (Human, Off-shift)" display_name="Idle (Off-shift)"
			mandatory_eval="1"
			icon_skin="ui\orderIcons.xml"	
			icon="idle_icon"
			can_be_social="1"
			interruptee_type="1" 
			interrupter_type="0"
			is_social="1">
			
		<require_character_has_no_tag tag="military"/>
		<require_character_not_on_shift/>
		<utility min="0" max="30">
			<base_job_utility weight="8"/>
		</utility>
		
		<fsm>
			<waste_time />
		</fsm>
	</job>
	
	<!-- <job name="Worship Near Shrine (video)"
		display_name="Worship At Cult Shrine"
		mandatory_eval="1"
		loop="0"
		icon_skin="ui\thoughtIcons.xml"
		icon="cultist_shrine"
		interruptee_type="4" interrupter_type="3"
		is_social="1">
		
		<require_not_sitting/>
		<require_random_location range="5" input="home_position"/>
		<require_gameobject closest="1" input="shrine" tag="cultist_shrine" range="150" must_lock="0" />
 		
		<utility min="0" max="2000">
			<base_job_utility weight="2000"/>
		</utility>
		<fsm>
			<cult_worship_shrine input="shrine" />
			<walk_to input="home_position" name="run" />
		</fsm>
	</job> -->

	<job name="Seek Confession"
		display_name="Seek Confession (Off-shift)"
		mandatory_eval="1" 
		test_for_interrupts="1"
		icon="holy_cog" 
		icon_skin="ui\orderIcons.xml" 
		interruptee_type="3" 
		interrupter_type="2"
		is_social="1" >
		
		<require_not_sitting/>
		<require_building input="building" tag="chapel,overseer_active" not_tag="no_supplies1,eventlocked" must_lock="0"/>
		<require_empty_hands/>
		<require_character_not_on_shift/>
		<require_character_has_no_tag tag="vicar"/>
    
		<utility min="0" max="10">
			<base_job_utility weight="2"/> <!-- 0 -->
			<feeling name="anger" weight="1">
				<trait name="Reclusive" weight="-2"/>
				<trait name="Spiritually Inclined" weight="3"/>

			</feeling>
			<feeling name="fear" weight="3">
				<trait name="Reclusive" weight="-2"/>
				<trait name="Spiritually Inclined" weight="3"/>
			</feeling>
			<feeling name="despair" weight="4"/>
		</utility>

		<fsm>
			<walk_to_building input="building"/>
			<file_office_job input="building" name="Take Confession"/>
			<wait_for_confession input="building"/>
		</fsm>
	</job>

	<job name="Listen to Preaching in Chapel"
		display_name="Listen to Preaching in Chapel (Off-shift)"
			mandatory_eval="1"
			interruptee_type="2" 
			interrupter_type="1" 
			is_social="1"
			icon_skin="ui\orderIcons.xml" 
			icon="chapel">
			
		<require_empty_hands/>
		<require_not_sitting/>
		<require_character_not_on_shift/>
		<require_character_has_no_tag tag="vicar" />
		
		<require_building input="building" tag="chapel,overseer_active" not_tag="no_supplies1" must_lock="0"/>
		<require_building_module input="chair" for_building="building" tag="sittable" not_tag="occupied" must_lock="1"/>
		<require_gameobject tag="preaching"
						not_tag="dead"
						input="vicar" range="50" 
						failure_reason="Requires a vicar to exist."
						do_not_fill_dependency="1"
						must_lock="0"/>

		<utility min="0" max="30">
			<base_job_utility weight="15"/>
			
			<feeling name="anger" weight="8">
				<trait name="Reclusive" weight="-4"/>
				<trait name="Spiritually Inclined" weight="6"/>
			</feeling>
			
			<feeling name="fear" weight="8">
				<trait name="Reclusive" weight="-4"/>
				<trait name="Easily Influenced" weight="4"/>
				<trait name="Spiritually Inclined" weight="6"/>
			</feeling>
			
			<feeling name="despair" weight="10"/>
			
			<feeling name="indifferent" weight="0">
				<trait name="Spiritually Inclined" weight="6"/>
			</feeling>
			
			<feeling name="happiness" weight="4">
				<trait name="Spiritually Inclined" weight="6"/>
			</feeling>
			
		</utility>
		<fsm>
			<walk_to_module input="chair"/>
			<sit_in_chair input="chair"/>
			<wait_for_sermon input="building"/>
			<get_out_of_chair/>
			<force_wander/>
		</fsm>
	</job>

	<job name="Drink Tea at Home (labourer)"
		display_name="Drink Tea at Home (Off-shift)"
			mandatory_eval="1"
			interruptee_type="2" 
			interrupter_type="1" 
			is_social="1"
			icon_skin="ui\thoughtIcons.xml" 
			icon="beer_mug">

		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_not_on_shift/>
		<require_character_has_tag tag="lower_class" />
		<require_character_has_no_tag tag="drank_today" do_not_fill_dependency="1" />
		
		<require_building input="building"
					   tag="lower_class_house"
					   must_lock="0"/>
		
		<require_building_module input="chair"
							for_building="building"
							tag="sittable"
							not_tag="occupied,module_disabled,under_construction"
							must_lock="1"/>
    
		<utility min="0" max="10">
			<base_job_utility weight="3"/>
		</utility>
		<fsm>
			<house_drink_tea_in_chair input="chair"/>
		</fsm>
	</job>

	<job name="Drink Tea at Home (overseer)"
		display_name="Drink Tea at Home (Off-shift)"
			mandatory_eval="1"
			interruptee_type="2" 
			interrupter_type="1" 
			is_social="1"
			icon_skin="ui\thoughtIcons.xml" 
			icon="beer_mug">

		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_not_on_shift/>
		<require_character_has_tag tag="middle_class" />
		<require_character_has_no_tag tag="drank_today" do_not_fill_dependency="1" />
		
		<require_building input="building"
					   tag="middle_class_house"
					   must_lock="0"/>
		
		<require_building_module input="chair"
							for_building="building"
							tag="sittable"
							not_tag="occupied,module_disabled,under_construction"
							must_lock="1"/>
    
		<utility min="0" max="10">
			<base_job_utility weight="3"/>
		</utility>
		<fsm>
			<house_drink_tea_in_chair input="chair"/>
		</fsm>
	</job>

	<job name="Drink Tea at Home (aristocrat)"
		display_name="Drink Tea at Home (Off-shift)"
			mandatory_eval="1"
			interruptee_type="2" 
			interrupter_type="1" 
			is_social="1"
			icon_skin="ui\thoughtIcons.xml" 
			icon="beer_mug">

		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_not_on_shift/>
		<require_character_has_tag tag="upper_class" />
		<require_character_has_no_tag tag="drank_today" do_not_fill_dependency="1" />
		
		<require_building input="building"
					   tag="upper_class_house"
					   must_lock="0"/>
		
		<require_building_module input="chair"
							for_building="building"
							tag="sittable"
							not_tag="occupied,module_disabled,under_construction"
							must_lock="1"/>
    
		<utility min="0" max="10">
			<base_job_utility weight="3"/>
		</utility>
		<fsm>
			<house_drink_tea_in_chair input="chair"/>
		</fsm>
	</job>

	<job name="Get Tea in Pub"
		display_name="Get Tea in Pub (Off-shift)"
			mandatory_eval="1"
			interruptee_type="2" 
			interrupter_type="1" 
			is_social="1"
			icon_skin="ui\thoughtIcons.xml" 
			icon="beer_mug">

		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_not_on_shift/>
		<require_character_has_no_tag tag="drank_today" do_not_fill_dependency="1" />
		
		<require_building input="building"
					   tag="public_house"
					   not_tag="has_contents"
					   must_lock="0"/>
		
		<require_building_module input="chair"
							for_building="building"
							tag="sittable"
							not_tag="occupied,module_disabled,under_construction"
							must_lock="1"/>
    
		<utility min="0" max="30">
			<base_job_utility weight="5"/>
		</utility>
		<fsm>
			<pub_drink_tea_in_chair input="chair"/>
		</fsm>
	</job>
	
	<job name="Get Drink in Pub"
		display_name="Get Drink in Pub (Off-shift)"
			mandatory_eval="1"
			interruptee_type="2" 
			interrupter_type="1" 
			is_social="1"
			icon_skin="ui\thoughtIcons.xml" 
			icon="beer_mug">

		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_not_on_shift/>
		<require_character_has_no_tag tag="drank_today" do_not_fill_dependency="1" />
		
		<require_building input="building"
					   tag="public_house,has_contents"
					   must_lock="0"/>
		
		<require_building_module input="booze_vat"
							for_building="building"
							tag="booze_vat"
							not_tag="under_construction,module_disabled"
							must_lock="0"/>
		
		<require_building_module input="chair"
							for_building="building"
							tag="sittable"
							not_tag="occupied,module_disabled,under_construction"
							must_lock="1"/>
    
		<utility min="0" max="30">
			<base_job_utility weight="10"/>
			<feeling name="despair" weight="1"/>
		</utility>
		<fsm>
			<walk_to_module input="booze_vat"/>
			<pub_get_drink_from_vat input="building"/>
			<pub_drink_in_chair input="chair"/>
		</fsm>
	</job>

	<job name="Get Medical Treatment in Barbershop"
		display_name="Get Medical Treatment in Barbershop"
			mandatory_eval="1"
			interruptee_type="2" 
			interrupter_type="1" 
			icon_skin="ui\orderIcons.xml"
			icon="barbershop_image"
			is_social="1">

		<require_not_sitting/>
		<require_empty_hands/>
		<require_character_has_no_tag tag="barber" />
		<require_character_personal_stat_geq name="numAfflictions" amount="1" />
		<require_building input="building"
					   tag="barber,overseer_active"
					   not_tag="no_supplies1"
					   must_lock="0"/>
		
		<require_building_module input="chair"
							for_building="building"
							tag="sittable"
							not_tag="occupied,under_construction,module_disabled"
							must_lock="1"/>
    
		<utility min="0" max="30">
			<base_job_utility weight="10"/>
			<character_personal_stat name="numAfflictions" weight="75"/>
		</utility>
		
		<fsm>
			<walk_to_module input="chair"/>
			<sit_in_chair input="chair"/>
			<file_office_job input="building" name="Administer Medical Treatment"/>
			<wait_for_treatment input="building"/>
		</fsm>
	</job>

	<job name="Fishy Transformation 1"
		display_name="A Terrible Transformation"
			mandatory_eval="0"
			icon_skin="ui\orderIcons.xml" 
			icon="idle_icon"
			can_be_social="0"
			interruptee_type="4" 
			interrupter_type="3">
		
		<require_character_has_no_tag tag="fishy_state"/>
		<require_not_sitting />
		<require_empty_hands />
		
		<utility min="0" max="799">
			<base_job_utility weight="1000" />
		</utility>
		
		<fsm>
			<fishy_transformation />
		</fsm>
	</job>

	<job name="Fishy Transformation 2"
		display_name="Heed The Call Of The Sea"
			mandatory_eval="0"
			icon_skin="ui\orderIcons.xml" 
			icon="idle_icon"
			can_be_social="0" 
			interruptee_type="4" 
			interrupter_type="3">

		<require_not_sitting />
		<require_empty_hands />
		<!--<require_biome_square input="destination" name="Prairie Coastline" samples="40"/>-->
		
		<utility min="0" max="799">
			<base_job_utility weight="1000" />
		</utility>
		<fsm>
			<!--<walk_into_closest_water />-->
			<become_fishperson />
		</fsm>
	</job>

		<!--
		<job name="Leave Party" display_name="Leave Party" mandatory_eval="0" interruptee_type="4" interrupter_type="3">
			
			<require_attending_party/>
			
			<fsm>
				<leave_party/>
			</fsm>
			
			<fills_reqs>
				<require_not_attending_party/>
			</fills_reqs>
		</job> -->

		<job name="Vacate Chair" display_name="Vacate Chair"
			mandatory_eval="0"
			interruptee_type="4"
			interrupter_type="3">
			
			<require_sitting/>
			<fsm>
				<get_out_of_chair/>
			</fsm>
			<history importance="1" />
			<fills_reqs>
				<require_not_sitting/>
			</fills_reqs>
		</job>

		<job name="Sit In Chair"
			display_name="Sit In Chair"
			mandatory_eval="0"
			interruptee_type="2" interrupter_type="2">
			
			<require_building_module input="chair"
								tag="sittable"
								not_tag="occupied"
								closest="1"/>
			<utility>
				<base_job_utility weight="0"/>
			</utility>
			<fsm>
				<walk_to_module input="chair"/>
				<sit_in_chair input="chair"/>
			</fsm>
			<history importance="1" />
			<fills_reqs>
				<require_sitting/>
			</fills_reqs>
		</job>

		<job name="Eat Cooked Food" display_name="Eat Cooked Food"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
				test_for_interrupts="1">

			<require_gameobject tag="cooked,food"
							amount="1" input="food" range="50" closest="1" 
							failure_reason="Requires available food."
							require_owned="1" />
			
			<require_character_personal_stat_geq name="hunger"
										  amount="2"
										  failure_reason="Requires sufficient hunger."/>
			
			<require_not_sitting/>
			<require_character_has_no_tag tag="selenian_infested" />
			<require_empty_hands failure_reason="Character required to have empty hands."/>
				    
			<utility max="2299">
				<base_job_utility weight="1500"/>
			</utility>
			
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<pickup_item input="food"/>
				<consume_food input="food"/>
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Eat Trade Food" display_name="Eat Trade Food"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
				test_for_interrupts="1">

			<require_character_personal_stat_geq name="hunger"
										  amount="5"
										  failure_reason="Requires sufficient hunger."/>
			
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_not_sitting/>
			<require_character_has_no_tag tag="selenian_infested" />
			<require_gameobject tag="trade_food,food"
							not_tag="raw,starvation_food"
							amount="1"
							input="food"
							range="50" closest="1"
							failure_reason="Requires available food."
							require_owned="1" />
			
			<utility max="2299">
				<base_job_utility weight="1500"/>
			</utility>
			
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<!--<check_for_cooked_food/> -->
				<pickup_item input="food"/>
				<consume_food input="food"/>
			</fsm>
			<history importance="10" />
		</job>
				
		<job name="Eat Raw Food" display_name="Eat Raw Food"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
				test_for_interrupts="1">

			<require_character_personal_stat_geq name="hunger" amount="4" failure_reason="Requires sufficient hunger."/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_character_has_no_tag tag="selenian_infested" />
			<require_gameobject tag="raw,food" not_tag="meat,starvation_food" amount="1" input="food"
							range="50" closest="1"
							failure_reason="Requires available food."
							require_owned="1" />
			<utility max="2299">
				<base_job_utility weight="1500"/>
			</utility>
			
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<!--<check_for_cooked_food/> -->
				<pickup_item input="food"/>
				<consume_food input="food"/>
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Eat Raw Meat" display_name="Eat Raw Meat"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
				test_for_interrupts="1">
			
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_character_has_no_tag tag="selenian_infested" />
			<require_gameobject input="food" tag="raw,meat" not_tag="human,starvation_food"
							amount="1"
							range="50" closest="1"
							failure_reason="Requires available food." />
			
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_personal_stat_geq name="hunger" amount="5" failure_reason="Requires sufficient hunger."/>
			
			<utility max="2299">
				<base_job_utility weight="1000"/>
			</utility>
			
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<!--<check_for_cooked_food/> -->
				<pickup_item input="food"/>
				<consume_food input="food"/>
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Eat Due to Starvation" display_name="Eat Due to Starvation"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
				test_for_interrupts="1">
			
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_character_has_no_tag tag="selenian_infested" />
			<require_gameobject input="food"
							tag="starvation_food"
							amount="1" 
							range="50"
							closest="1"
							failure_reason="Requires available food." />
			
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_personal_stat_geq name="hunger"
										  amount="4"
										  failure_reason="Requires sufficient hunger."/>
			<utility max="2299">
				<base_job_utility weight="1050"/>
			</utility>
			
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<pickup_item input="food"/>
				<consume_food input="food"/>
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Eat Human Flesh" display_name="Eat Human Flesh"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
				test_for_interrupts="1">
			
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_character_has_no_tag tag="selenian_infested" />
			<require_gameobject tag="raw,human,meat" amount="1" input="food"
							range="50"  closest="1"
							failure_reason="Requires available food." />
			
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_personal_stat_geq name="hunger" amount="8" failure_reason="Requires sufficient hunger."/>
			<require_character_personal_stat_geq name="despair" amount="25" failure_reason="Requires sufficient despair." />
			<utility max="2299">
				<base_job_utility weight="1000"/>
			</utility>
			
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<pickup_item input="food"/>
				<consume_food input="food"/>
			</fsm>
			<history importance="10" />
		</job>
		
		<job name="Eat Human Flesh (cannibal)"
			display_name="Eat Human Flesh"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
				test_for_interrupts="1">
			
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_character_has_no_tag tag="selenian_infested" />
			<require_character_has_tag tag="cannibal"/>
			<require_gameobject tag="raw,human,meat"
							amount="1"
							input="food"
							range="50"
							closest="1"
							failure_reason="Requires available food." />
			
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_personal_stat_geq name="hunger" amount="2" failure_reason="Requires sufficient hunger."/>
			<require_character_personal_stat_geq name="despair" amount="25" failure_reason="Requires sufficient despair." />
			<utility max="2299">
				<base_job_utility weight="1250"/>
			</utility>
			
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<pickup_item input="food"/>
				<consume_food input="food"/>
			</fsm>
			<history importance="10" />
		</job>
				
		<!-- Setting this aside while we balance food consumption. -dgb
		<job name="Eat Food in a Chair" display_name="Eat Food (in chair)"
			mandatory_eval="1" test_for_interrupts="1"
			interruptee_type="3" interrupter_type="2">
			
			<require_not_sitting/>
			<require_character_personal_stat_geq name="hunger" amount="9" failure_reason="Requires sufficient hunger."/>
			<require_building_module input="chair" tag="sittable" not_tag="occupied" failure_reason="Requires available table space."/>
			<require_gameobject tag="food" amount="1" input="food" range="100" failure_reason="Requires available food." closest="1" />
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<utility max="2299">
				<distance_from input="food" weight="-1"/>
				<distance_from input="chair" weight="-1"/>
				<base_job_utility weight="0"/>
				<character_personal_stat name="hunger" weight="100"/>
				<has_tag input="food" tag="cooked" weight="100"/>
				<has_tag input="food" tag="preserved_food" weight="0"/>
				<has_tag input="food" tag="raw" weight="-50"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<pickup_item input="food"/>
				<walk_to_module input="chair"/>
				<sit_in_chair input="chair"/>
				<consume_food input="food"/>
				 note: I am now still hanging out in this chair. 
			</fsm>
			<history importance="10" />
		</job>

		<job name="Eat Food at a Table" display_name="Eat Food (at table)"
			mandatory_eval="1"
			interruptee_type="3" interrupter_type="2"
			 test_for_interrupts="1">
			
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_building_module input="placetosit" tag="table" failure_reason="Requires available table space."/>
			<require_character_personal_stat_geq name="hunger" amount="9" failure_reason="Requires sufficient hunger."/>
			<require_gameobject tag="food" amount="1" input="food" range="100" failure_reason="Requires available food."  closest="1" />
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<utility max="2299">
				<distance_from input="placetosit" weight="-1" />
				<base_job_utility weight="0"/>
				<character_personal_stat name="hunger" weight="100"/>
				<has_tag input="food" tag="cooked" weight="100"/>
				<has_tag input="food" tag="preserved_food" weight="0"/>
				<has_tag input="food" tag="raw" weight="-50"/>
			</utility>
			<fsm>
				<walk_to_adjacent_position input="food"/>
				<pickup_item input="food"/>
				<walk_to_module input="placetosit"/>
				<walk_to_join_table input="table"/>
				<place_on_table input="placetosit"/>
				<pickup_item_from_table input="food"/>
				<consume_food input="food"/>
			</fsm>
			<history importance="10" />
		</job>-->
		
		<!-- for when butcher order is given by hand -->
		<job name="Butcher Corpse (player order)" display_name="Butcher Animal Corpse"
				mandatory_eval="0"
				interruptee_type="3" interrupter_type="2"
				icon_skin="ui\orderIcons.xml" icon="butcher_icon"
				can_be_social="0"
				filter="hauling">
			
			<require_not_sitting/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_has_no_tag tag="military" />
			<require_character_on_shift/>
			<require_character_has_no_tag tag="workshop_jobs" />
			
			<on_abort behaviour="yield" />
			
			<utility min="800" max="1599">
				<base_job_utility weight="750"/>
			</utility>
			<fsm>
				<walk_to input="corpse"/>
				<butcher_to_stack input="corpse"/>
			</fsm>
		</job>

		<job name="Butcher Animal Corpse (spontaneous)"
			display_name="Butcher Animal Corpse"
				mandatory_eval="1"
				interruptee_type="3" 
				interrupter_type="2"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher_icon"
				can_be_social="0"
				filter="hauling">
			
			<!--<require_work_party_filter name="hunting"/>-->
			<require_character_on_shift/>
			<require_not_sitting/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_has_no_tag tag="military" />
			<require_gameobject input="food"
							range="24"
							tag="animal,meat_source,dead"
							failure_reason="Butchering animal corpses requires available animal corpses (obviously)."
							must_lock="1"
							closest="1"/>
			
			<on_abort behaviour="yield" />
			 
			
			<utility min="0" max="799">
				<base_job_utility weight="505"/>
			</utility>
			<fsm>
				<walk_to input="food"/>
				<butcher_to_stack input="food"/>
			</fsm>
			<fills_reqs>
				<require_gameobject tag="food" amount="1" input="food" range="100"/>
			</fills_reqs>
		</job>

		<job name="Forage Due To Hunger" display_name="Forage Due To Hunger"
				mandatory_eval="1" 
				test_for_interrupts="1"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher_icon"
				can_be_social="0"
				interruptee_type="3" 
				interrupter_type="2">

			<require_not_sitting/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_not_attending_party/>
			<require_gameobject input="forage_food_source" range="16"
							tag="forage_food_source"
							failure_reason="Requires a foragable food source."
							must_lock="1" closest="1"/>
			<require_character_personal_stat_geq name="hunger" amount="6" failure_reason="Requires sufficient hunger."/>
			
			<utility max="0">
				<base_job_utility weight="499"/>
			</utility>
			
			<fsm>
				<walk_to input="forage_food_source"/>
				<set_tag_other input="forage_food_source" name="harvest_once" />
				<harvest_forageSource input="forage_food_source" />
			</fsm>
			
			<!--<fills_reqs>
				<require_gameobject tag="forage_food_source" amount="1" input="forage_food_source" range="30" closest="1"/>
			</fills_reqs>-->
		</job>
		
				
		<job name="Forage Due To Hunger (In Civ)" display_name="Forage Due To Hunger"
			mandatory_eval="1"
			test_for_interrupts="1"
			icon_skin="ui\orderIcons.xml"
			icon="butcher_icon"
			can_be_social="0"
			interruptee_type="3"
			interrupter_type="2">
			
			<require_not_sitting/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_not_attending_party/>
			<require_gameobject input="forage_food_source" range="50"
							tag="forage_food_source" civ_value_leq="10"
							failure_reason="Requires a foragable food source."
							must_lock="1" closest="1"/>
			<require_character_personal_stat_geq name="hunger" amount="6"
										  failure_reason="Requires sufficient hunger."/>
			
			<utility max="0">
				<base_job_utility weight="499"/>
			</utility>
			
			<fsm>
				<walk_to input="forage_food_source"/>
				<set_tag_other input="forage_food_source" name="harvest_once" />
				<harvest_forageSource input="forage_food_source" />
			</fsm>
		</job>
          

		<job name="Butcher Fishperson Corpse (hunger)" display_name="Butcher Fishperson Corpse"
				mandatory_eval="1" 
				test_for_interrupts="1"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher_icon"
				can_be_social="0"
				interruptee_type="3" 
				interrupter_type="2">
			
			<require_not_sitting/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_character_has_no_tag tag="military" />
			
			<require_gameobject input="corpse"
							range="25"
							tag="dead_fishperson,fishperson,dead"
							not_tag="food"
							failure_reason="Butchering fishperson corpse requires an available fishperson corpse (obviously)."
							must_lock="1"
							closest="1"/>
			
			<require_character_personal_stat_geq name="hunger" amount="5" />
			
			<on_abort behaviour="yield" />
			<utility max="799">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="corpse"/>
				<check_for_cooked_food/>
				<butcher_to_stack input="corpse"/>
			</fsm>
			<fills_reqs>
				<require_gameobject tag="food" amount="1" input="corpse" range="25"/>
			</fills_reqs>
		</job>

		<job name="Butcher Fishperson Corpse (player order)" display_name="Butcher Fishperson Corpse"
				mandatory_eval="0" 
				test_for_interrupts="1"
				interruptee_type="3" 
				interrupter_type="2"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher_icon"
				can_be_social="0" >
			
			<require_not_sitting/>
			<require_character_on_shift/>
			<require_character_has_no_tag tag="military" />
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<!--<require_gameobject input="corpse" range="50" tag="dead_fishperson" failure_reason="Butchering fishperson corpses requires available fishperson corpses (obviously)." must_lock="1"/>
			-->
			<on_abort behaviour="yield" />
			
			<utility min="799" max="800">
				<base_job_utility weight="500"/>
				<character_personal_stat name="hunger" weight="10"/>
			</utility>
			<fsm>
				<walk_to input="corpse"/>
				<butcher_to_stack input="corpse"/>
			</fsm>
		</job>
		
		<job name="Butcher Human Corpse" display_name="Butcher Human Corpse"
				mandatory_eval="1"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher_icon"
				can_be_social="0" 
				test_for_interrupts="1"
				interruptee_type="3" 
				interrupter_type="2">
			
			<require_not_sitting/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_gameobject input="friend"
							range="50"
							tag="human,dead,meat_source"
							must_lock="1"
							closest="1"
							failure_reason="Butchering human corpse requires an available human corpse (obviously)." />
			
			<require_character_personal_stat_geq name="hunger" amount="6" />
			
			<utility max="2299">
				<base_job_utility weight="500"/>
			</utility>
			<fsm>
				<walk_to input="friend"/>
				<check_for_cooked_food/>
				<butcher input="friend"/>
			</fsm>
			<fills_reqs>
				<require_gameobject tag="raw,food" amount="1" input="food" range="100" />
			</fills_reqs>
		</job>

		<job name="Butcher Human Corpse (Cannibalism)" display_name="Butcher Human Corpse"
				mandatory_eval="1"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher_icon"
				can_be_social="0" 
				test_for_interrupts="1"
				interruptee_type="3" 
				interrupter_type="2">
			
			<require_not_sitting/>
			<require_character_has_tag tag="cannibalistic_murderer" do_not_fill_dependency="1"/>
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			<require_gameobject input="friend" range="100" tag="human,dead,meat_source"
							must_lock="1" closest="1"
							failure_reason="Butchering human corpse requires an available human corpse (obviously)." />
			
			<require_character_personal_stat_geq name="hunger" amount="4" />
			
			<utility max="2299">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<walk_to input="friend"/>
				<butcher input="friend"/>
			</fsm>
			<!--<fills_reqs>
				<require_gameobject tag="food" amount="1" input="food" range="100" />
			</fills_reqs>-->
		</job>

		<job name="Hunt Due To Hunger (melee)"
			display_name="Attack Animal Due To Hunger"
			mandatory_eval="1" 
			can_interrupt="1"
			icon_skin="ui\orderIcons.xml" 
			icon="butcher"
			interruptee_type="4" 
			interrupter_type="3">

			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_has_tag tag="starving" do_not_fill_dependency="1"/>
			<require_character_has_tag tag="has_melee_attack" />
			<require_character_personal_stat_geq name="hunger"
										  amount="6"
										  failure_reason="Requires sufficient hunger." do_not_fill_dependency="1"/>
			
			<require_gameobject input="enemy"
							tag="animal"
							not_tag="corpse,food"
							range="24"
							must_lock="0"
							closest="1"
							failure_reason="Requires available meat target." do_not_fill_dependency="1"/>
			
			<utility max="1599">
				<base_job_utility weight="499"/>
			</utility>
			<fsm>
				<attack_melee_until_kill input="enemy" name="run"/>
				<create_job input="enemy" name="Butcher Human Corpse" />
			</fsm>
		</job>


	<!--
		<job name="Angry Murder"
			display_name="Angry Murder"
			mandatory_eval="1" 
			can_interrupt="1"
			icon_skin="ui\orderIcons.xml" 
			icon="butcher"
			interruptee_type="4" 
			interrupter_type="3"
			is_social="1">

			<require_not_sitting/>
			<require_character_personal_stat_geq name="angry" amount="60" />
			
			<require_gameobject input="enemy" tag="citizen" not_tag="corpse" range="32" must_lock="0" closest="1" failure_reason="Requires available human target."/>
			<require_character_is_not_friend input="enemy"/>

			<utility max="1599">
				<base_job_utility weight="1000"/>
			</utility>
			<fsm>
				<attack_melee_until_kill input="enemy" name="run"/>
			</fsm>
		</job>
-->
		<job name="Cannibalistic Murder (melee)"
			display_name="Cannibalistic Murder"
				mandatory_eval="1" 
				can_interrupt="1"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher"
				interruptee_type="4" 
				interrupter_type="3">

			<require_not_sitting/>
			<require_character_has_tag tag="cannibalistic_murderer" do_not_fill_dependency="1"/>
			<require_wield_tool tag="axe" failure_reason="Requires murderaxe."/>
			<require_character_personal_stat_geq name="hunger"
										  amount="6"
										  failure_reason="Requires sufficient hunger." do_not_fill_dependency="1"/>
			
			<require_gameobject input="enemy"
							tag="human"
							not_tag="dead,corpse,meat,food"
							range="32"
							must_lock="0"
							closest="1"
							failure_reason="Requires available human target."/>
			
			<utility max="1599">
				<base_job_utility weight="1550"/>
			</utility>
			<fsm>
				<attack_melee_until_kill_then_butcher input="enemy" name="run"/>
				<!--<create_job input="enemy" name="Butcher Human Corpse (Cannibalism)" />-->
			</fsm>
			<history name="Homicidal Rampage" importance="100" />
		</job>
		
		<job name="Begin Cannibalistic Murder"
			display_name="Begin Cannibalistic Murder"
				mandatory_eval="0"
				test_for_interrupts="0"
				can_interrupt="1"
				icon_skin="ui\orderIcons.xml" 
				icon="butcher"
				interruptee_type="4" 
				interrupter_type="3">
			
			<utility max="1599">
				<base_job_utility weight="1"/>
				<feeling name="anger" weight="1"/>
			</utility>
			<fsm>
				<begin_homicidal_rampage name="cannibal_murder" />
			</fsm>
		</job>
		

		<job name="Squish Vermin"
			display_name="Squish Vermin"
				mandatory_eval="1" 
				can_be_social="0" 
				can_interrupt="1"
				interruptee_type="2" 
				interrupter_type="1">
			
			<!--<require_work_party_filter name="farming"/>-->

			<require_gameobject input="vermin"
							range="10"
							tag="vermin"
							not_tag="corpse,dead"
							must_lock="1"
							closest="1"
							do_not_fill_dependency="1"/>
			
			<require_character_personal_stat_leq name="inCombat" amount="1"/>
			
			<utility min="0" max="1599">
				<base_job_utility weight="1500" />
			</utility>
			<fsm>
				<walk_onto input="vermin" name="run" />
				<squish_vermin input="vermin" />
			</fsm>
			<history importance="10" />
		</job>

		<job name="Civilian Hassle Fishperson (troublemaker)"
			display_name="Hassle Aggressive Fishperson"
				mandatory_eval="1" 
				can_be_social="0" 
				can_interrupt="1"
				interruptee_type="3" 
				interrupter_type="2">
			
			<require_civ_dist_leq input="1"/>
			<require_character_has_no_tag tag="cultist_fishperson" />
			<require_gameobject input="fishperson"
							tag="bad_fishperson"
							not_tag="fleeing,corpse,food,exit_map"
							range="8"
							must_lock="1"
							closest="1"
							do_not_fill_dependency="1"/>
			
			<utility min="0" max="1599">
				<base_job_utility weight="500" />
				<distance_from input="fishperson" weight="-1" />
			</utility>
			<fsm>
				<walk_to_near_position input="fishperson" name="run" />
				<intimidate_fishperson input="fishperson" />
			</fsm>
			<history importance="10" />	
		</job>
		
		<job name="Return To Civilization (Human, Off-shift)" display_name="Return To Civilization (Off-shift)"
				mandatory_eval="1" 
				icon_skin="ui\orderIcons.xml" 
				icon="cycle_image"
				test_for_interrupts="1"
				interruptee_type="1" 
				interrupter_type="0"
				is_social="1">
			
			<require_character_not_on_shift/>
			<require_civ_dist_geq input="100"/>
			<require_closest_civilization_location input="destination"/>
			<require_not_sitting/>
			
			<utility min="0" max="99">
				<base_job_utility weight="10" />
				<character_personal_stat name="hunger" weight="1"/>
			</utility>
			<fsm>
				<walk_to_near_location input="destination"/>
			</fsm>
		</job>
		
		<job name="Return To Civilization (Human, On-Shift)" display_name="Return To Civilization"
				mandatory_eval="1" 
				icon_skin="ui\orderIcons.xml" 
				icon="cycle_image"
				test_for_interrupts="1"
				interruptee_type="1" 
				interrupter_type="0"
				is_social="1">
			
			<require_civ_dist_geq input="200"/>
			<require_closest_civilization_location input="destination"/>
			<require_not_sitting/>
			
			<utility min="0" max="99">
				<base_job_utility weight="2" />
				<session_bool value="1" name="isNight" weight="10" />
				<character_personal_stat name="hunger" weight="1"/>
			</utility>
			<fsm>
				<walk_to_near_location input="destination"/>
			</fsm>
		</job>
		
		<job name="Wander (Human, Off-shift)" display_name="Wander (Off-shift)"
				mandatory_eval="1"
				icon_skin="ui\orderIcons.xml" 
				icon="cycle_image" 
				interruptee_type="1" 
				interrupter_type="0"
				is_social="1">
			<require_character_not_on_shift/>
			<require_random_location range="5" input="destination"/>
			<require_not_sitting/>
			<require_not_attending_party/>
			<utility min="0" max="30">
				<base_job_utility weight="8"/>
			</utility>
			<fsm>
				<walk_to input="destination"/>
			</fsm>
		</job>
		
		<job name="Wander (Human, On-shift)" display_name="Wander (On-shift)"
				mandatory_eval="1"
				icon_skin="ui\orderIcons.xml" 
				icon="cycle_image" 
				interruptee_type="1" 
				interrupter_type="0"
				is_social="1">
			<require_character_on_shift/>
			<require_random_location range="5" input="destination"/>
			<require_not_sitting/>
			<require_not_attending_party/>
			<utility min="0" max="30">
				<base_job_utility weight="1"/>
			</utility>
			<fsm>
				<walk_to input="destination"/>
			</fsm>
		</job>
		
		<job name="Inspect Food (Epicurean)"
			display_name="Inspect Food (Off-shift)"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_gameobject range="16"
							input="noms"
							tag="food,cooked"
							not_tag="raw,food"
							do_not_fill_dependency="1"/>
			
			<require_trait name="Epicurean"
						failure_reason="Requires Epicurean trait."/>
			<require_empty_hands/>
			<require_character_not_on_shift/>
			
			<utility min="0" max="30">
				<base_job_utility weight="2"/>
				<feeling name="despair" weight="5">
				</feeling>
			</utility>
			<fsm>
				<walk_to input="noms" />
				<animate_at input="noms" name="inspect_painting_moved" />
				<give_memories name="Examined Tasty Food" />
			</fsm>
		</job>
		
		<job name="Inspect Body (Morbid)"
			display_name="Inspect Food (Off-shift)"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_character_not_on_shift/>
			<require_not_sitting/>
			<require_gameobject range="16"
							input="bods"
							tag="corpse"
							not_tag="food"
							do_not_fill_dependency="1"/>
			
			<require_character_has_no_tag tag="fleeing"/>
			<require_trait name="Morbid" failure_reason="Requires Morbid trait."/>
			<require_empty_hands/>
			
			<utility min="0" max="30">
				<base_job_utility weight="3"/>
				<feeling name="despair" weight="5">
				</feeling>
			</utility>
			<fsm>
				<walk_to input="bods" />
				<animate_at input="bods" name="generic_ground_interaction" />
				<give_memories name="Examined Dead Body" />
			</fsm>
		</job>

		<job name="Make Out"
			display_name="Make Out (Off-shift)"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable"
							not_tag="corpse,fleeing"/>      
			<require_gameobject_can_be_sociable input="friend"/>
			<require_character_feelings_about_geq input="friend"
										   amount="5"/>
			<require_empty_hands/>
			<require_character_not_on_shift/>
			
			<utility min="0" max="30">
				<base_job_utility weight="1"/>
				<feeling name="despair" weight="5">
					<trait name="Romantic Inclination" weight="3"/>
					<trait name="Reclusive" weight="-3"/>
				</feeling>/>
				<feeling name="indifferent" weight="0">
					<trait name="Romantic Inclination" weight="3"/>
					<trait name="Reclusive" weight="-3"/>
				</feeling>/>
				<feeling name="happiness" weight="3">
					<trait name="Romantic Inclination" weight="3"/>
					<trait name="Reclusive" weight="-3"/>
				</feeling>
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<make_out_with input="friend" />
			</fsm>
		</job>
		
		<job name="Start a Dance"
			display_name="Dance with Joy (Off-shift)"
			mandatory_eval="1"
			test_for_interrupts="1"
			can_be_social="0"
			interruptee_type="1" interrupter_type="0"
			is_social="1">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_not_on_shift/>
			
			<utility min="0" max="30">
				<base_job_utility weight="0"/>
				<feeling name="happiness" weight="2">
					<trait name="Romantic Inclination" weight="1"/>
					<trait name="Reclusive" weight="-3"/>
				</feeling>
			</utility>
			<fsm>
				<set_tag name="dancing" />
				<dance />
			</fsm>
		</job>
		
		<job name="Dance With Other"
			display_name="Dance With Another (Off-shift)"
			mandatory_eval="1"
			test_for_interrupts="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_not_on_shift/>
			<require_gameobject range="9"
							input="dancer"
							tag="dancing"
							not_tag="corpse"/> 
			
			<utility min="0" max="30">
				<base_job_utility weight="0"/>
				<feeling name="happiness" weight="20">
					<trait name="Romantic Inclination" weight="20"/>
					<trait name="Reclusive" weight="-30"/>
				</feeling>
			</utility>
			<fsm>
				<animate_at input="dancer" name="dance" />
				<give_memories name="Did a Dance" />
				<animate_at input="dancer" name="dance" />
				<animate_at input="dancer" name="dance" />
			</fsm>
		</job>
		
		<job name="Cry over Gravestone"
			display_name="Cry over Gravestone"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_gameobject range="24"
							input="grave"
							must_lock="0"
							tag="grave"/>
			
			<require_not_sitting/>
			<require_empty_hands/>
			
			<utility min="0" max="10">
				<base_job_utility weight="1"/>
				<feeling name="despair" weight="1"/>
				<trait name="Romantic Inclination" weight="1"/>
			</utility>
			<fsm>
				<walk_to input="grave" />
				<animate_at input="grave" name="cry" />
				<give_memories name="Cried over a Gravestone" />
			</fsm>
		</job>
		
		<job name="Cry over Corpse"
			display_name="Cry over Corpse"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_gameobject range="24"
							input="grave"
							must_lock="0"
							tag="citizen,dead"
							not_tag="buried" />
			
			<require_not_sitting/>
			<require_empty_hands/>

			<utility min="0" max="2">
				<base_job_utility weight="1"/>
				<feeling name="despair" weight="1"/>
				<trait name="Romantic Inclination" weight="1"/>
			</utility>
			<fsm>
				<walk_to input="grave" />
				<animate_at input="grave" name="cry" />
				<give_memories name="Cried over a Body" />
			</fsm>
		</job>

		<job name="Hug Fishperson"
			display_name="Hug Fishperson"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable,fishperson"
							not_tag="corpse,food"/>
			
			<require_gameobject_can_be_sociable input="friend"/>

			<require_trait name="Fishy Behaviour"
						failure_reason="Requires fishy behavior trait."/>

			<utility min="0" max="30">
				<feeling name="happiness" weight="5">
					<trait name="Reclusive" weight="-3"/>
				</feeling>
			</utility>
			
			<fsm>
				<weak_follow input="friend" />
				<hug_with_fishperson input="friend" />
			</fsm>
		</job>
		
		<job name="Hug Friend Due to Happiness"
			display_name="Hug Friend Due to Happiness"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable"
							not_tag="corpse,fleeing"/>
			<require_gameobject_can_be_sociable input="friend"/>
			<require_character_feelings_about_geq input="friend"
										   amount="4"/>
			<require_empty_hands/>

			<utility min="0" max="30">
				<base_job_utility weight="1"/>
				<feeling name="happiness" weight="2">
					<trait name="Reclusive" weight="-3"/>
				</feeling>
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<hug_with input="friend" name="happyHug" />
			</fsm>
		</job>
		
		<job name="Hug Stranger Due to Happiness"
			display_name="Hug Stranger Due to Happiness"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_not_sitting/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable"
							not_tag="corpse,fleeing"/>
			<require_gameobject_can_be_sociable input="friend"/>
			<require_character_personal_stat_geq name="despair"
										  amount="20"
										  failure_reason="Requires sufficient despair."/>
			<require_empty_hands/>

			<utility min="0" max="30">
				<feeling name="happiness" weight="2">
					<trait name="Reclusive" weight="-6"/>
				</feeling>
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<hug_interrupt input="friend" name="hugging" />
			</fsm>
		</job>
		
		<job name="Pray in Fear"
			display_name="Pray Fearfully"
			mandatory_eval="1"
			interruptee_type="1" interrupter_type="0"
			icon_skin="ui\orderIcons.xml" icon="chapel"
			is_social="1">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_not_attending_party/>
			<require_character_personal_stat_geq name="despair"
										  amount="10"
										  failure_reason="Requires sufficient despair."/>
			
			<utility min="0" max="30">
				<base_job_utility weight="0"/>
				<feeling name="fear" weight="1">
					<trait name="Easily Influenced" weight="3"/>
					<trait name="Spiritually Inclined" weight="6"/>
				</feeling>
			</utility>
			<fsm>
				<pray_in_fear />
				<give_memories name="Prayed And Felt Better" />
			</fsm>
		</job>
		
		<job name="Pray at Shrine"
			display_name="Pray at Shrine"
			mandatory_eval="1"
			interruptee_type="1" interrupter_type="0"
			icon_skin="ui\orderIcons.xml" icon="chapel"
			is_social="1">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_gameobject range="20"
							input="shrine"
							not_tag="under_construction"
							tag="wall_shrine"/>
			
			<utility min="0" max="30">
				<base_job_utility weight="1"/>
				<trait name="Spiritually Inclined" weight="3"/>
				<trait name="Staunch Traditionalist" weight="3"/>
			</utility>
			<fsm>
				<walk_to_module input="shrine"/>	
				<animate name="pray" />
				<give_memories name="Prayed at Wall Shrine" />
			</fsm>
		</job>
		
		<job name="Blame Enemy"
			display_name="Blame Other for Woes"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_character_feelings_about_leq input="friend"
										   amount="-2"/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable,lower_class,citizen"
							not_tag="corpse,fleeing"/>
			
			<require_gameobject_can_be_sociable input="friend"/>
			
			<utility min="0" max="30">
				<base_job_utility weight="0"/>
				<feeling name="anger" weight="1"/>
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<blame_enemy input="friend" />
			</fsm>
		</job>
		
		<job name="Gossip"
			display_name="Gossip"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_empty_hands/>
			<require_not_sitting/>
			<require_gameobject range="16"
							input="friend"
							tag="conversable" not_tag="corpse,fleeing"/>
			
			<require_gameobject_can_be_sociable input="friend"/>
			<utility min="0" max="30">
				<base_job_utility weight="14"/>
				<feeling name="anger" weight="6">
					<trait name="Reclusive" weight="-4"/>
					<trait name="Common Mingler" weight="6"/>
				</feeling>
				<feeling name="fear" weight="6">
					<trait name="Reclusive" weight="-4"/>
					<trait name="Easily Influenced" weight="4"/>
					<trait name="Spiritually Inclined" weight="6"/>
					<trait name="Common Mingler" weight="4"/>
				</feeling>
				<feeling name="despair" weight="6"/>
				<feeling name="indifferent" weight="6"/>
				<feeling name="happiness" weight="8"/>
			</utility>
			<fsm>
				<weak_follow input="friend" />
				<gossip_with input="friend" />
			</fsm>
		</job>

		<job name="Feel Hungry"
			display_name="Express Hunger"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_character_personal_stat_geq name="hunger" amount="2" />
			<require_empty_hands failure_reason="Character required to have empty hands."/>
			
			<utility min="0" max="30">
				<base_job_utility weight="3" />
			</utility>
			
			<fsm>
				<feel_hungry />
			</fsm>
			<history importance="10" />
		</job>

		<job name="Feel Tired"
			display_name="Express Exhaustion"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="1"
			interrupter_type="0"
			is_social="1">
			
			<require_character_personal_stat_geq name="tiredness" amount="1" />
			<require_empty_hands />
			<utility min="0" max="30">
				<base_job_utility weight="3" />
			</utility>
			<fsm>
				<feel_tired />
			</fsm>
			<history importance="10" />
		</job>

		<!-- NAP TIME -->
		<job name="Sleep in Bed (labourer)" display_name="Sleep (in bed)"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="2" interrupter_type="1"
			test_for_interrupts="1" >
			
			<require_character_not_on_shift />
			<require_empty_hands />
			<require_not_sitting/>
			<require_character_has_tag tag="lower_class" />
			<require_character_has_no_tag tag="selenian_infested,sleepless" />
			<require_building_module input="bed"
								tag="lower_class_bed"
								not_tag="inoperative,damaged"
								failure_reason="Requires available bed."
								range="250"
								closest="1"/>
			
			<require_character_personal_stat_geq name="tiredness" amount="1"
							failure_reason="Requires sufficient tiredness."/>
			
			<utility max="2299">
				<base_job_utility weight="1500" />
				<session_bool value="1" name="isNight" weight="250" />
			</utility>
			<fsm>
				<walk_to_module input="bed" />
				<sleep input="bed" />
			</fsm>
		</job>
		
		<job name="Sleep in Bed (overseer)" display_name="Sleep (in bed)"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="2" interrupter_type="1"
			test_for_interrupts="1" >
			
			<require_character_not_on_shift />
			<require_empty_hands />
			<require_not_sitting/>
			<require_character_has_tag tag="middle_class" />
			<require_character_has_no_tag tag="selenian_infested,sleepless" />
			<require_building_module input="bed"
								tag="middle_class_bed"
								not_tag="inoperative,damaged"
								failure_reason="Requires available bed."
								range="250"
								closest="1"/>
			
			<require_character_personal_stat_geq name="tiredness" amount="1"
							failure_reason="Requires sufficient tiredness."/>
			
			<utility max="2299">
				<base_job_utility weight="1500" />
				<session_bool value="1" name="isNight" weight="250" />
			</utility>
			<fsm>
				<walk_to_module input="bed" />
				<sleep input="bed" />
			</fsm>
		</job>
				
		<job name="Sleep in Bed (aristocrat)" display_name="Sleep (in bed)"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="2" interrupter_type="1"
			test_for_interrupts="1" >
			
			<require_character_not_on_shift />
			<require_empty_hands />
			<require_not_sitting/>
			<require_character_has_tag tag="upper_class" />
			<require_character_has_no_tag tag="selenian_infested,sleepless" />
			<require_building_module input="bed"
								tag="upper_class_bed"
								not_tag="inoperative,damaged"
								failure_reason="Requires available bed."
								range="250"
								closest="1"/>
			
			<require_character_personal_stat_geq name="tiredness" amount="1"
							failure_reason="Requires sufficient tiredness."/>
			
			<utility max="2299">
				<base_job_utility weight="1500" />
				<session_bool value="1" name="isNight" weight="250" />
			</utility>
			<fsm>
				<walk_to_module input="bed" />
				<sleep input="bed" />
			</fsm>
		</job>

		<job name="Sleep (indoors)"
			display_name="Sleep (indoors)"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="2"
			interrupter_type="1">
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_not_on_shift/>
			<require_character_has_no_tag tag="selenian_infested,sleepless,requiresbed" />
			<require_character_personal_stat_geq name="tiredness"
										  amount="1"
										  failure_reason="Requires sufficient tiredness."/>
			<require_building input="building"
						   must_lock="0"
						   failure_reason="Requires available building"
						   range="250"/>
			
			
			<utility max="2299">
				<base_job_utility weight="1400" />
				<session_bool value="1" name="isNight" weight="250" />
			</utility>
			<fsm>
				<walk_to_building input="building" />
				<sleep input="building"/>
			</fsm>
		</job>

		<job name="Sleep (outside)"
			display_name="Sleep (outside)"
			mandatory_eval="1"
			can_be_social="0"
			interruptee_type="2"
			interrupter_type="1">
			
			
			<require_not_sitting/>
			<require_empty_hands/>
			<require_character_has_no_tag tag="sleepless,requiresbed" />
			<require_session_bool name="isNight" value="1" />
			<require_character_personal_stat_geq name="tiredness"
										  amount="2"
										  failure_reason="Requires sufficient tiredness"/>
			<require_random_location range="8"
								input="destination"
								min_elevation="0"
								require_flat="1"
								failure_reason="Requires available random location."/>
			
			<utility max="2299">
				<base_job_utility weight="1300" />
			</utility>
			<fsm>
				<walk_to input="destination" />
				<sleep />
			</fsm>
		</job>

		<!-- for testing - DGB -->
		<job name="Drink Me"
			display_name="Compelled to Drink"
			mandatory_eval="0"
			interruptee_type="3"
			interrupter_type="2" >
			
			<require_not_sitting/>
			<require_empty_hands/>
			
			<utility max="1000" >
				<base_job_utility weight="1000" />
			</utility>
			<fsm>
				<walk_to_adjacent_position input="drink" name="run"/>
				<pickup_item input="drink"/>
				<consume_drink input="drink"/>
			</fsm>
		</job>

	</citizen>

</jobsDB>
